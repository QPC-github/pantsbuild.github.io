<!DOCTYPE html>
<html lang="en">

<!--
  Copyright 2014 Pants project contributors (see CONTRIBUTORS.md).
  Licensed under the Apache License, Version 2.0 (see LICENSE).
-->

<head>
  <meta charset="utf-8" />
  <title>Python 3rdparty Pattern</title>
  <link rel="stylesheet" href="s.css">
  <script src="s.js"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="shortcut icon" href="logo.ico">
</head>

<body>

<div class="mainflow">
<nav class="breadcrumbs">
<ul>
<li><a href="index.html">Pants Build System</a>
<li><a href="3rdparty.html">Third-Party Dependencies</a>
<li><a href="3rdparty_py.html">Python 3rdparty Pattern</a>
</ul>
</nav>

<nav class="pagetoc">
<ul>
<li class="toc-h1"><a href="#3rdpartypython">3rdparty/python ¶</a></li>
<li class="toc-h1"><a href="#your-codes-build-file">Your Code's BUILD File ¶</a></li>
</ul>
</nav>

<!-- main content start -->
<body>
<!-- generated by pants! -->
<div class="h-plus-pilcrow"><h1 id="python-3rdparty-pattern">Python 3rdparty Pattern<a class="pilcrow-link" href="#python-3rdparty-pattern"> ¶</a></h1></div>
<p>In general, we use the
<a href="3rdparty.html">3rdparty idiom</a>
to organize
dependencies on code from outside the source tree. This document
describes how to make this work for Python code.</p>
<p>Your Python code can pull in code written elsewhere. Pants fetches code
via a library that uses pip-style specifications (name and
version-range).</p>
<div class="h-plus-pilcrow"><h2 id="3rdpartypython">3rdparty/python<a class="pilcrow-link" href="#3rdpartypython"> ¶</a></h2></div>
<p>To keep all of your code depending on the same versions of third-party
Python artifacts, you might use the idiom of keeping them in a directory
tree under <code>3rdparty/python</code>. If your organization has many such
dependencies, you might arrange them in several directories: this can
ease later "git detective work" when finding out who changed a version.</p>
<p><strong>pip-style requirements.txt:</strong></p>
<p>To define some third-party dependencies, use a
<a href="build_dictionary.html#bdict_python_requirements" xref="bdict_python_requirements">python_requirements</a> in your <code>BUILD</code>
file and make a pip <code>requirements.txt</code> file in the same directory.</p>
<p>E.g, your <code>3rdparty/python/BUILD</code> file might look like:</p>
<p>
<pre>
# see/edit requirements.txt in this directory to change deps.
python_requirements()
</pre>
</p>
<p>...with <code>3rdparty/python/requirements.txt</code> like:</p>
<p>
<pre>ansicolors==1.0.2

antlr_python_runtime==3.1.3
--allow-external antlr-python-runtime
--allow-unverified antlr-python-runtime

argparse==1.2.1
coverage&gt;=3.7,&lt;3.8
docutils&gt;=0.12,&lt;0.13
Markdown==2.1.1
mock==1.0.1</pre>
</p>
<p><code>python_requirements</code> defines a named target for each line in the
<code>requirements.txt</code> line. For example, a line like <code>ansicolors==1.0.2</code> in
<code>requirements.txt</code> defines a target named <code>ansicolors</code> that pulls in
ansicolors version 1.0.2.</p>
<p><strong>python_requirement_library and python_requirement:</strong></p>
<p>A <code>BUILD</code> file can also define requirements without a <code>requirements.txt</code>
file. Set up a
<a href="build_dictionary.html#bdict_python_requirement_library" xref="bdict_python_requirement_library">python_requirement_library</a>
with one or more
<a href="build_dictionary.html#bdict_python_requirement" xref="bdict_python_requirement">python_requirement</a>s
like:</p>
<div class="codehilite"><pre>python_requirement_library(
  name='beautifulsoup',
  requirements=[
    python_requirement(name='beautifulsoup',
                       requirement='BeautifulSoup==3.2.0'),
  ])
</pre></div>
<div class="h-plus-pilcrow"><h2 id="your-codes-build-file">Your Code's BUILD File<a class="pilcrow-link" href="#your-codes-build-file"> ¶</a></h2></div>
<p>In your code's <code>BUILD</code> file, introduce a dependency on the <code>3rdparty</code>
target:</p>
<p>
<pre>
python_library(name='greet',
  dependencies=[
    '3rdparty/python:ansicolors',
  ],
  sources=globs('*.py'),
)</pre>
</p>
<p>Then in your Python code, you can <code>import</code> from that package:</p>
<div class="codehilite"><pre>from colors import green
</pre></div>
</body>
<!-- main content end -->

</div> <!-- end of mainflow -->

<nav class="bignav">
  <div class="bignav-logo">
    <a href="index.html">
      <img src="logo.ico" alt="[pantsbuild logo]">
    </a>
  </div>
  <form class="search" action="https://www.google.com/search">
  <input name="as_q" class="query">
  <input name="as_sitesearch" value="pantsbuild.github.io" type="hidden">
  <input value="Search" type=submit class="button">
  </form>

<div class="site-toc">
<ul>
<li class="toc-h1 ">
<a href="java/hello.html">HelloMain</a>
</li>
<li class="toc-h2 ">
<a href="testproject/page.html">Why does this page exist?</a>
</li>
<li class="toc-h1 ">
<a href="3rdparty.html">Third-Party Dependencies</a>
</li>
<li class="toc-h2 toc-here">
Python 3rdparty Pattern
</li>
<li class="toc-h2 ">
<a href="3rdparty_jvm.html">JVM 3rdparty Pattern</a>
</li>
<li class="toc-h1 ">
<a href="build_dictionary.html">Pants BUILD Dictionary</a>
</li>
<li class="toc-h1 ">
<a href="goals_reference.html">Pants Goals Reference</a>
</li>
</ul>
</div>
</nav>

<div class="ci-status">
<a href="https://travis-ci.org/pantsbuild/pants">
<img src="https://travis-ci.org/pantsbuild/pants.png?branch=master"
     alt="Are the tests passing?" title="Are the tests passing?"></a><br>
<a href="https://coveralls.io/r/pantsbuild/pants?branch=master">
<img src="https://coveralls.io/repos/pantsbuild/pants/badge.png?branch=master"
     alt="Test Coverage Status" title="Test Coverage Status"></a>
</div>

</body>
</html>

