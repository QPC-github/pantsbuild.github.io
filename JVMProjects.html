

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>JVM Projects with Pants &mdash; pants 0.1 documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/pants-logo.ico"/>
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  

    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:'./',
        VERSION:'0.1',
        COLLAPSE_INDEX:false,
        FILE_SUFFIX:'.html',
        HAS_SOURCE:  true
      };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
    <link rel="top" title="pants 0.1 documentation" href="index.html"/>
        <link rel="next" title="Pants for Maven Experts" href="from_maven.html"/>
        <link rel="prev" title="Target Addresses" href="target_addresses.html"/>
 
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-39101739-2']);
  _gaq.push(['_trackPageview']);
</script>
<script type="text/javascript">
  // In a plain template, we'd put this in the footer block.
  // In the read-the-docs template, there is no footer. So use jQuery ready:
  $(document).ready(function() {
    // Ping Google analytics
    var ga = document.createElement('script');
    ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ?
              'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    ga.setAttribute('async', 'true');
    $(document).append(ga);

    // Show the travis-ci status graphic
    $('.wy-breadcrumbs').append(
      '<div style="float: right;">' +
      '<a href="https://travis-ci.org/twitter/commons">' +
      '<img src="https://travis-ci.org/twitter/commons.png?branch=master">' +
      '</a></div>');
  });
</script>
<style type="text/css">
/* Shoehorn in pants logo */
body .icon-home:before {
   content: "";
}

body .icon-home{
  background: transparent url(./_static/pants-logo.ico) center left no-repeat;
  background-position-x: 5px;
  padding-left: 40px;
  padding-right: 35px;
  line-height: 40px;
}

body a.icon-home:hover{
  background: #3d8cbf url(./_static/pants-logo.ico) center left no-repeat;
  background-position-x: 5px;
}

</style>


  <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="index.html" class="icon icon-home"> pants</a>
        <form class="wy-form" action="search.html" method="get">
  <input type="text" name="q" placeholder="Search docs" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="first_concepts.html">Pants Conceptual Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="first_concepts.html#goals-and-targets">Goals and Targets</a></li>
<li class="toctree-l2"><a class="reference internal" href="first_concepts.html#target-types">Target Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="first_concepts.html#what-pants-does">What Pants Does</a></li>
<li class="toctree-l2"><a class="reference internal" href="first_concepts.html#next-step">Next Step</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="first_tutorial.html">First Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="first_tutorial.html#invoking-pants">Invoking Pants</a></li>
<li class="toctree-l2"><a class="reference internal" href="first_tutorial.html#build-files">BUILD Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="first_tutorial.html#the-usual-commands">The Usual Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="first_tutorial.html#next">Next</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="target_addresses.html">Target Addresses</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">JVM Projects with Pants</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#relevant-goals-and-targets">Relevant Goals and Targets</a></li>
<li class="toctree-l2"><a class="reference internal" href="#build-for-a-simple-binary">BUILD for a Simple Binary</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-usual-commands-jvm">The Usual Commands: JVM</a></li>
<li class="toctree-l2"><a class="reference internal" href="#toolchain">Toolchain</a></li>
<li class="toctree-l2"><a class="reference internal" href="#java7-vs-java6-which-java">Java7 vs Java6, Which Java</a></li>
<li class="toctree-l2"><a class="reference internal" href="#bundles-deploy-able-runnable-file-trees">Bundles: Deploy-able Runnable File Trees</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="python-readme.html">Using Pants for Python development</a><ul>
<li class="toctree-l2"><a class="reference internal" href="python-readme.html#why-use-pants-for-python-development">Why use Pants for Python development?</a></li>
<li class="toctree-l2"><a class="reference internal" href="python-readme.html#getting-started">Getting started</a></li>
<li class="toctree-l2"><a class="reference internal" href="python-readme.html#tl-dr-hello-world-with-pants-python">TL;DR - &#8216;Hello world!&#8217; with Pants Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="python-readme.html#describing-python-environments-in-pants">Describing Python environments in Pants</a></li>
<li class="toctree-l2"><a class="reference internal" href="python-readme.html#building-your-first-pex">Building your first PEX</a></li>
<li class="toctree-l2"><a class="reference internal" href="python-readme.html#environment-manipulation-with-pants-py">Environment manipulation with <cite>pants py</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="python-readme.html#id1">Python Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="python-readme.html#manipulating-pex-behavior-with-environment-variables">Manipulating PEX behavior with environment variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="python-readme.html#how-pex-files-work">How PEX files work</a></li>
<li class="toctree-l2"><a class="reference internal" href="python-readme.html#advanced-pants-pex-features">Advanced Pants/PEX features</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="build_files.html">BUILD files</a><ul>
<li class="toctree-l2"><a class="reference internal" href="build_files.html#debugging-a-build-file">Debugging a BUILD File</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_files.html#default-target">Default Target</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_files.html#avoid-rglobs">Avoid rglobs</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_files.html#define-separate-targets-for-interface-and-implementation">Define Separate Targets for Interface and Implementation</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_files.html#depend-on-api-in-library-targets-implementation-in-binary-targets">Depend on API in Library Targets, Implementation in Binary Targets</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_files.html#which-build-files-are-executed-and-how">Which <tt class="docutils literal"><span class="pre">BUILD</span></tt> Files are &#8220;Executed&#8221;? (and how?)</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_files.html#id1">BUILD.* files</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="invoking.html">Invoking Pants Build</a><ul>
<li class="toctree-l2"><a class="reference internal" href="invoking.html#rc-files">rc files</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tshoot.html">Troubleshooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tshoot.html#maximum-verbosity">Maximum Verbosity</a></li>
<li class="toctree-l2"><a class="reference internal" href="tshoot.html#scrub-the-environment">Scrub the Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="tshoot.html#nailgun-5-seconds">Nailgun 5 seconds</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="3rdparty.html">Third-Party Dependencies</a><ul>
<li class="toctree-l2"><a class="reference internal" href="3rdparty_jvm.html">JVM 3rdparty Pattern</a></li>
<li class="toctree-l2"><a class="reference internal" href="3rdparty_py.html">Python 3rdparty Pattern</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ThriftDeps.html">Using Pants with Thrift Dependencies</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ThriftDeps.html#generating-code">Generating Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="ThriftDeps.html#thrift-example">Thrift Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="ThriftDeps.html#publishing">Publishing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="publish.html">Publishing Artifacts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="publish.html#life-of-a-publish">Life of a Publish</a></li>
<li class="toctree-l2"><a class="reference internal" href="publish.html#how-to">How To</a></li>
<li class="toctree-l2"><a class="reference internal" href="publish.html#restricting-to-release-branch">Restricting to &#8220;Release Branch&#8221;</a></li>
<li class="toctree-l2"><a class="reference internal" href="publish.html#troubleshooting">Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="publish.html#want-to-publish-something-publish-many-things">Want to Publish Something? Publish Many Things</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="setup_repo.html">Set up Your Source Tree for Pants</a><ul>
<li class="toctree-l2"><a class="reference internal" href="setup_repo.html#configuring-with-pants-ini">Configuring with <tt class="docutils literal"><span class="pre">pants.ini</span></tt></a></li>
<li class="toctree-l2"><a class="reference internal" href="setup_repo.html#configure-code-layout-with-source-root">Configure Code Layout with <cite>source_root</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="setup_repo.html#top-level-build-for-tree-global-config">Top-level <cite>BUILD.*</cite> for tree-global config</a></li>
<li class="toctree-l2"><a class="reference internal" href="setup_repo.html#build-in-the-source-tree-for-special-targets">BUILD.* in the source tree for special targets</a></li>
<li class="toctree-l2"><a class="reference internal" href="setup_repo.html#restricting-publish-to-release-branch">Restricting Publish to &#8220;Release Branch&#8221;</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installing Pants</a><ul>
<li class="toctree-l2"><a class="reference internal" href="install.html#system-wide-installation">System-wide Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="install.html#virtualenv-based-installation">Virtualenv-based Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="install.html#pex-based-installation">PEX-based Installation</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="build_dictionary.html">BUILD Dictionary</a><ul>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#file">__file__</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#amount">Amount</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#annotation-processor">annotation_processor</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#artifact">artifact</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#benchmark">benchmark</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#bundle">bundle</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#credentials">credentials</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#dependencies">dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#egg">egg</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#exclude">exclude</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#fancy-pants">fancy_pants</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#globs">globs</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#goal">goal</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#jar">jar</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#jar-library">jar_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#java-agent">java_agent</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#java-antlr-library">java_antlr_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#java-library">java_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#java-protobuf-library">java_protobuf_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#java-tests">java_tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#java-thrift-library">java_thrift_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#junit-tests">junit_tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#jvm-app">jvm_app</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#jvm-binary">jvm_binary</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#maven-layout">maven_layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#page">page</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#pants">pants</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#phase">phase</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#python-antlr-library">python_antlr_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#python-binary">python_binary</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#python-library">python_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#python-requirement">python_requirement</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#python-test-suite">python_test_suite</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#python-tests">python_tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#python-thrift-library">python_thrift_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#repo">repo</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#resources">resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#rglobs">rglobs</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#root-dir">ROOT_DIR</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#scala-library">scala_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#scala-specs">scala_specs</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#scala-tests">scala_tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#scalac-plugin">scalac_plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#setup-py">setup_py</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#source-root">source_root</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#time">Time</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#wiki">wiki</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="goals_reference.html">Goals Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#bench">bench</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#binary">binary</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#bootstrap">bootstrap</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#builddict">builddict</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#buildlint">buildlint</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#bundle">bundle</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#changed">changed</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#check-exclusives">check-exclusives</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#check-published-deps">check_published_deps</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#checkstyle">checkstyle</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#clean-all">clean-all</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#clean-all-async">clean-all-async</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#compile">compile</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#dependees">dependees</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#dependencies">dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#depmap">depmap</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#detect-duplicates">detect-duplicates</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#doc">doc</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#eclipse">eclipse</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#filedeps">filedeps</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#filemap">filemap</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#filter">filter</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#gen">gen</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#goals">goals</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#help">help</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#gref-phase-idea">idea</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#invalidate">invalidate</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#jar">jar</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#killserver">killserver</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#list">list</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#markdown">markdown</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#minimize">minimize</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#ng-killall">ng-killall</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#path">path</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#pathdeps">pathdeps</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#paths">paths</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#provides">provides</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#repl">repl</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#repl-dirty">repl-dirty</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#resolve">resolve</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#resources">resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#roots">roots</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#run">run</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#run-dirty">run-dirty</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#server">server</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#setup">setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#sort">sort</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#targets">targets</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#test">test</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="dev.html">Pants Developer Center</a><ul>
<li class="toctree-l2"><a class="reference internal" href="howto_contribute.html">Pants Contributors Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_develop.html">Pants Developers Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="dev_tasks.html">Task Developer&#8217;s Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="intellij.html">Pants Development with IntelliJ IDEA</a></li>
<li class="toctree-l2"><a class="reference internal" href="internals.html">Pants Internals</a></li>
<li class="toctree-l2"><a class="reference internal" href="targets.html">Targets Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="tasks.html">Tasks Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="base.html">Base Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="release.html">Release Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="docs.html">About the documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="credits.html">Credits</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top">
        <i data-toggle="wy-nav-top" class="icon icon-reorder"></i>
        <a href="/">pants</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <ul class="wy-breadcrumbs">
  <li><a href="index.html">Docs</a> &raquo;</li>
  <li><a href="">JVM Projects with Pants</a></li>
  
</ul>
<hr/>

          
  <div class="section" id="jvm-projects-with-pants">
<h1>JVM Projects with Pants<a class="headerlink" href="#jvm-projects-with-pants" title="Permalink to this headline">¶</a></h1>
<p>Assuming you know the <a class="reference internal" href="first_concepts.html"><em>basic Pants concepts</em></a> and have
gone through the <a class="reference internal" href="first_tutorial.html"><em>First Tutorial</em></a>, you&#8217;ve made a great start towards
using Pants to work with Java and Scala code. This page goes into some of
the details.</p>
<p>If you are accustomed to the Maven tool and contemplating moving to Pants,
you are not alone; <a class="reference internal" href="from_maven.html"><em>Pants for Maven Experts</em></a> has some advice.</p>
<div class="section" id="relevant-goals-and-targets">
<h2>Relevant Goals and Targets<a class="headerlink" href="#relevant-goals-and-targets" title="Permalink to this headline">¶</a></h2>
<p>When working with JVM languages, the following goals and targets are
especially relevant.</p>
<p><strong>Deployable Bundle</strong> <em>Runnable Binary, optionally with non-JVM files</em></p>
<blockquote>
<div><p>Deployable bundles are directories, optionally archived, that contain
all files necessary to run the application. The <tt class="docutils literal"><span class="pre">bundle</span></tt> goal is
used to create these deployable bundles from either <tt class="docutils literal"><span class="pre">jvm_binary</span></tt>
or <tt class="docutils literal"><span class="pre">jvm_app</span></tt> targets.</p>
<p>Bundling a <tt class="docutils literal"><span class="pre">jvm_binary</span></tt> target is appropriate when your application
is entirely jar-based; that is, its entirely class files and resources
packaged inside the jars themselves. If you application requires
&#8220;extra stuff&#8221; (e.g.: start scripts, config files) use a <tt class="docutils literal"><span class="pre">jvm_app</span></tt>
which allows you to include files in the bundle directory that are
supplemental to the binary jar and its dependencies.
You can learn <a class="reference internal" href="#jvm-bundles"><em>more about bundles</em></a>.</p>
</div></blockquote>
<p><strong>Runnable Binary</strong></p>
<blockquote>
<div>On its own, a <tt class="docutils literal"><span class="pre">jvm_binary</span></tt> BUILD target describes an executable <tt class="docutils literal"><span class="pre">.jar</span></tt>
(something you can run with <tt class="docutils literal"><span class="pre">java</span> <span class="pre">-jar</span></tt>). The jar is described as
executable because it contains a manifest file that specifies the main
class as well as classpath for all dependencies. If your program
contains only jars (and resources packaged in those jars), this is
all you need to run the binary. Use <tt class="docutils literal"><span class="pre">./pants</span> <span class="pre">goal</span> <span class="pre">binary</span></tt> to
compile its code; <tt class="docutils literal"><span class="pre">./pants</span> <span class="pre">goal</span> <span class="pre">run</span></tt> to run it &#8220;in place&#8221;.</div></blockquote>
<p><strong>Importable Code</strong></p>
<blockquote>
<div><p><tt class="docutils literal"><span class="pre">java_library</span></tt> BUILD targets make Java source code <tt class="docutils literal"><span class="pre">import</span></tt>able. The
rule of thumb is that each directory of <tt class="docutils literal"><span class="pre">.java</span></tt> files has a <tt class="docutils literal"><span class="pre">BUILD</span></tt> file
with a <tt class="docutils literal"><span class="pre">java_library</span></tt> target. A JVM target that has a <tt class="docutils literal"><span class="pre">java_library</span></tt> in
its <tt class="docutils literal"><span class="pre">dependencies</span></tt> can import its code. <tt class="docutils literal"><span class="pre">scala_library</span></tt> targets are
similar, but compiled with Scala.</p>
<p>To use pre-built <tt class="docutils literal"><span class="pre">.jar</span></tt>s, a JVM target can depend on a <tt class="docutils literal"><span class="pre">jar</span></tt>, a
reference to published code; these <tt class="docutils literal"><span class="pre">jar</span></tt>s normally live in a
<a class="reference internal" href="3rdparty.html"><em>directory called 3rdparty</em></a>.</p>
<p>Pants can <tt class="docutils literal"><span class="pre">publish</span></tt> a JVM library so code in other repos can use it;
if the <tt class="docutils literal"><span class="pre">*_library</span></tt> target has a <tt class="docutils literal"><span class="pre">provides</span></tt> parameter, that specifies
the repo/address at which to publish.</p>
<p>An <tt class="docutils literal"><span class="pre">annotation_processor</span></tt> BUILD target defines a Java library
one containing one or more annotation processors.</p>
</div></blockquote>
<p><strong>Tests</strong></p>
<blockquote>
<div><p>A <tt class="docutils literal"><span class="pre">junit_tests</span></tt> BUILD target holds source code for some JUnit tests;
typically, it would have one or more <tt class="docutils literal"><span class="pre">java_library</span></tt> targets as dependencies
and would import and test their code.</p>
<p>A <tt class="docutils literal"><span class="pre">scala_specs</span></tt> target is similar, but has source code for Scala specs.</p>
<p>The Pants <tt class="docutils literal"><span class="pre">test</span></tt> goal runs tests.</p>
</div></blockquote>
<p><strong>Generated Code</strong></p>
<blockquote>
<div>A <tt class="docutils literal"><span class="pre">java_thrift_library</span></tt> generates Java code from <tt class="docutils literal"><span class="pre">.thrift</span></tt> source; a JVM
target that has this target in its <tt class="docutils literal"><span class="pre">dependencies</span></tt> can <tt class="docutils literal"><span class="pre">import</span></tt> the
generated Java code. A <tt class="docutils literal"><span class="pre">java_protobuf_library</span></tt> is similar, but generates
Java code from protobuffer source.</div></blockquote>
</div>
<div class="section" id="build-for-a-simple-binary">
<h2>BUILD for a Simple Binary<a class="headerlink" href="#build-for-a-simple-binary" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference external" href="https://github.com/twitter/commons/tree/master/src/java/com/twitter/common/examples/pingpong">Twitter Commons Java pingpong sample</a>
code shows the BUILD file for a simple Java binary (in the <tt class="docutils literal"><span class="pre">main/</span></tt> directory):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># ==================================================================================================</span>

<span class="n">jvm_binary</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;main&#39;</span><span class="p">,</span>
  <span class="n">basename</span><span class="o">=</span><span class="s">&#39;pingpong&#39;</span><span class="p">,</span>
  <span class="n">source</span><span class="o">=</span><span class="s">&#39;Main.java&#39;</span><span class="p">,</span>
  <span class="n">main</span><span class="o">=</span><span class="s">&#39;com.twitter.common.examples.pingpong.main.Main&#39;</span><span class="p">,</span>
  <span class="n">dependencies</span><span class="o">=</span><span class="p">[</span>
    <span class="n">pants</span><span class="p">(</span><span class="s">&#39;src/java/com/twitter/common/examples/pingpong/handler&#39;</span><span class="p">)</span>
  <span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
<p>This small program has just one library, a <cite>java_library</cite>.
The rule of thumb is that
each directory of <tt class="docutils literal"><span class="pre">.java</span></tt> or <tt class="docutils literal"><span class="pre">.scala</span></tt> files has a library target. If you
find
yourself thinking &#8220;we should move some of this code to another directory,&#8221;
you probably also want to set up a <tt class="docutils literal"><span class="pre">BUILD`</span> <span class="pre">file</span> <span class="pre">with</span> <span class="pre">a</span> <span class="pre">``java_library</span></tt>
(or <tt class="docutils literal"><span class="pre">scala_library</span></tt>) target.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">java_library</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">&#39;handler&#39;</span><span class="p">,</span>
  <span class="n">dependencies</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">pants</span><span class="p">(</span><span class="s">&#39;3rdparty:guava&#39;</span><span class="p">),</span>
    <span class="n">pants</span><span class="p">(</span><span class="s">&#39;3rdparty:guice&#39;</span><span class="p">),</span>
    <span class="n">pants</span><span class="p">(</span><span class="s">&#39;3rdparty/jvm/com/sun/jersey:jersey-client&#39;</span><span class="p">),</span>
    <span class="n">pants</span><span class="p">(</span><span class="s">&#39;3rdparty/jvm/com/sun/jersey:jersey-core&#39;</span><span class="p">),</span>
    <span class="n">pants</span><span class="p">(</span><span class="s">&#39;3rdparty/jvm/com/sun/jersey:jersey-guice&#39;</span><span class="p">),</span>
    <span class="n">pants</span><span class="p">(</span><span class="s">&#39;3rdparty/jvm/com/sun/jersey:jersey-server&#39;</span><span class="p">),</span>
    <span class="n">pants</span><span class="p">(</span><span class="s">&#39;3rdparty/jvm/com/sun/jersey:jersey-servlet&#39;</span><span class="p">),</span>
    <span class="n">pants</span><span class="p">(</span><span class="s">&#39;src/java/com/twitter/common/application&#39;</span><span class="p">),</span>
    <span class="n">pants</span><span class="p">(</span><span class="s">&#39;src/java/com/twitter/common/application/http&#39;</span><span class="p">),</span>
    <span class="n">pants</span><span class="p">(</span><span class="s">&#39;src/java/com/twitter/common/application/modules:http&#39;</span><span class="p">),</span>
    <span class="n">pants</span><span class="p">(</span><span class="s">&#39;src/java/com/twitter/common/application/modules:lifecycle&#39;</span><span class="p">),</span>
    <span class="n">pants</span><span class="p">(</span><span class="s">&#39;src/java/com/twitter/common/application/modules:log&#39;</span><span class="p">),</span>
    <span class="n">pants</span><span class="p">(</span><span class="s">&#39;src/java/com/twitter/common/application/modules:stats&#39;</span><span class="p">),</span>
    <span class="n">pants</span><span class="p">(</span><span class="s">&#39;src/java/com/twitter/common/args&#39;</span><span class="p">),</span>
    <span class="n">pants</span><span class="p">(</span><span class="s">&#39;src/java/com/twitter/common/base&#39;</span><span class="p">),</span>
    <span class="n">pants</span><span class="p">(</span><span class="s">&#39;src/java/com/twitter/common/stats&#39;</span><span class="p">),</span>
  <span class="p">],</span>
  <span class="n">sources</span> <span class="o">=</span> <span class="n">globs</span><span class="p">(</span><span class="s">&#39;*.java&#39;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
<p>This library depends on other build targets and jars; if your code imports
something, that implies a <tt class="docutils literal"><span class="pre">BUILD</span></tt> dependency.
Some of the depended-upon targets come from the same repository; for example
<tt class="docutils literal"><span class="pre">.../common/application</span></tt>. If we peeked at that <tt class="docutils literal"><span class="pre">BUILD</span></tt> target, we&#8217;d see it
was another <tt class="docutils literal"><span class="pre">java_library</span></tt>.
Some of these dependencies are <tt class="docutils literal"><span class="pre">jar</span></tt>s built elsewhere.</p>
<div class="section" id="depending-on-a-jar">
<h3>Depending on a Jar<a class="headerlink" href="#depending-on-a-jar" title="Permalink to this headline">¶</a></h3>
<p>The <cite>pingpong-lib</cite> example depends on some jars. Instead of compiling
from source, Pants invokes <cite>ivy</cite> to fetch these jars. To reduce danger
of version conflicts, we use the <a class="reference internal" href="3rdparty.html"><em>Third-Party Dependencies</em></a> idiom: we keep references
to these &#8220;third-party&#8221; jars together in <tt class="docutils literal"><span class="pre">BUILD</span></tt> files under the
<tt class="docutils literal"><span class="pre">3rdparty/jvm/</span></tt> directory. Thus, <tt class="docutils literal"><span class="pre">pingpong-lib</span></tt> has some dependencies like:</p>
<div class="highlight-python"><pre>
java_library(name = 'handler',
  dependencies = [
    pants('3rdparty:guava'),
    pants('3rdparty:guice'),
    pants('3rdparty/jvm/com/sun/jersey:jersey-client'),
    pants('3rdparty/jvm/com/sun/jersey:jersey-core'),
    pants('3rdparty/jvm/com/sun/jersey:jersey-guice'),
    pants('3rdparty/jvm/com/sun/jersey:jersey-server'),
    pants('3rdparty/jvm/com/sun/jersey:jersey-servlet'),
</pre>
</div>
<p>The <tt class="docutils literal"><span class="pre">BUILD</span></tt> files in <tt class="docutils literal"><span class="pre">3rdparty/jvm/</span></tt>, e.g.,
<tt class="docutils literal"><span class="pre">3rdparty/jvm/com/sun/jersey/BUILD</span></tt>, have targets like:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">dependencies</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;jersey-client&#39;</span><span class="p">,</span>
  <span class="n">dependencies</span><span class="o">=</span><span class="p">[</span><span class="n">jar</span><span class="p">(</span><span class="n">org</span><span class="o">=</span><span class="s">&#39;com.sun.jersey&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">&#39;jersey-client&#39;</span><span class="p">,</span> <span class="n">rev</span><span class="o">=</span><span class="n">REV</span><span class="p">)</span><span class="o">.</span><span class="n">with_sources</span><span class="p">()])</span>
</pre></div>
</div>
<p>Those <a class="reference internal" href="build_dictionary.html#bdict-jar"><em>jar() things</em></a> are references to public jars.</p>
</div>
</div>
<div class="section" id="the-usual-commands-jvm">
<h2>The Usual Commands: JVM<a class="headerlink" href="#the-usual-commands-jvm" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt><strong>Make sure code compiles and tests pass:</strong></dt>
<dd><p class="first">Use the <tt class="docutils literal"><span class="pre">test</span></tt> goal with the targets you&#8217;re interested in. If they are
test targets, Pants runs the tests. If they aren&#8217;t test targets, Pants will
still compile them since it knows it must compile before it can test.</p>
<p><tt class="docutils literal"><span class="pre">pants</span> <span class="pre">goal</span> <span class="pre">test</span> <span class="pre">src/java/com/myorg/myproject</span> <span class="pre">tests/java/com/myorg/myproject</span></tt></p>
<p><strong>Run just those two troublesome tests:</strong> (assuming they&#8217;re JUnit tests; other
frameworks use other flags)</p>
<p class="last"><tt class="docutils literal"><span class="pre">pants</span> <span class="pre">goal</span> <span class="pre">test</span> <span class="pre">tests/java/com/myorg/myproject</span> <span class="pre">--test-junit-test=com.myorg.myproject.HarshTest</span> <span class="pre">--test-junit-test=com.myorg.myproject.HarsherTest</span></tt></p>
</dd>
<dt><strong>Packaging Binaries</strong></dt>
<dd><p class="first">To create a jar containing just the code built by a JVM target, use the
<cite>jar</cite> goal:</p>
<div class="highlight-python"><pre>pants goal jar src/java/com/myorg/myproject</pre>
</div>
<p>To create &#8220;bundle&#8221; (a runnable thing and its dependencies):</p>
<div class="highlight-python"><pre>./pants goal bundle src/main/java/yourproject --bundle-archive=zip -v</pre>
</div>
<p class="last">If your bundle is JVM, it&#8217;s a zipfile which can run by means of an
<tt class="docutils literal"><span class="pre">unzip</span></tt> and seting your <tt class="docutils literal"><span class="pre">CLASSPATH</span></tt> to <tt class="docutils literal"><span class="pre">$BASEDIR/my_service.jar</span></tt>
(where <tt class="docutils literal"><span class="pre">$BASEDIR</span> <span class="pre">is</span></tt> the directory you&#8217;ve just unzipped).</p>
</dd>
<dt><strong>Get Help</strong></dt>
<dd><p class="first">Get the list of goals:</p>
<div class="highlight-python"><pre>./pants goal goals</pre>
</div>
<p>Get help for one goal:</p>
<div class="last highlight-python"><pre>./pants goal help onegoal</pre>
</div>
</dd>
</dl>
</div>
<div class="section" id="toolchain">
<h2>Toolchain<a class="headerlink" href="#toolchain" title="Permalink to this headline">¶</a></h2>
<p>Pants uses <a class="reference external" href="http://ant.apache.org/ivy/">Ivy</a> to resolve <tt class="docutils literal"><span class="pre">jar</span></tt> dependencies.
To change how Pants resolves these, use <tt class="docutils literal"><span class="pre">--ivy-*</span></tt> command-line
parameters along with <tt class="docutils literal"><span class="pre">--resolve-*</span></tt> parameters.</p>
<p>Pants uses <a class="reference external" href="https://github.com/martylamb/nailgun">Nailgun</a> to speed up
compiles. It&#8217;s a JVM daemon that runs in the background; this saves time
for JVM startup and class loading.</p>
<p>Pants uses Jmake, a dependency tracking compiler facade.</p>
</div>
<div class="section" id="java7-vs-java6-which-java">
<h2>Java7 vs Java6, Which Java<a class="headerlink" href="#java7-vs-java6-which-java" title="Permalink to this headline">¶</a></h2>
<p>Pants uses the java on your <tt class="docutils literal"><span class="pre">PATH</span></tt> (not <tt class="docutils literal"><span class="pre">JAVA_HOME</span></tt>).
To specify a specific java version for just one pants invocation:</p>
<div class="highlight-python"><pre>PATH=/usr/lib/jvm/java-1.7.0-openjdk7/bin:${PATH} ./pants goal ...</pre>
</div>
<p>If you sometimes need to compile some code in Java 6 and sometimes Java 7,
you can use a command-line arg to specify Java version:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="o">--</span><span class="nb">compile</span><span class="o">-</span><span class="n">javac</span><span class="o">-</span><span class="n">args</span><span class="o">=</span><span class="s">&#39;-target 7 -source 7&#39;</span>
</pre></div>
</div>
<p><em>BUT</em> beware: if you switch between Java versions, Pants doesn&#8217;t realize when
it needs to rebuild. If you build with version 7, change some code, then build
with version 6, java 6 will try to understand java 7-generated classfiles
and fail. Thus, if you&#8217;ve been building with one Java version and are switching
to another, you probably need to:</p>
<div class="highlight-python"><pre>./pants goal clean-all</pre>
</div>
<p>so that the next build starts from scratch.</p>
</div>
<div class="section" id="bundles-deploy-able-runnable-file-trees">
<span id="jvm-bundles"></span><h2>Bundles: Deploy-able Runnable File Trees<a class="headerlink" href="#bundles-deploy-able-runnable-file-trees" title="Permalink to this headline">¶</a></h2>
<p>You can enjoy your web service on your development machine&#8217;s <tt class="docutils literal"><span class="pre">localhost</span></tt>,
but to let other people enjoy it, you probably want to copy it to a server
machine. With Pants, the easiest way to do this is to create a <em>bundle</em>: a
directory tree of <tt class="docutils literal"><span class="pre">.jar</span></tt> and helper files. If your <tt class="docutils literal"><span class="pre">jvm_app</span></tt> has
a <tt class="docutils literal"><span class="pre">bundles</span></tt> parameter, it can specify trees of files to include in the tree.</p>
<p>If you want to set up a tree of static files but don&#8217;t need it to be runnable,
you can define a <tt class="docutils literal"><span class="pre">jvm_app</span></tt> target with bundles (and/or resources) but whose
<tt class="docutils literal"><span class="pre">jvm_binary</span></tt> has no source or main; the resulting bundle will have
the files you want (along with a couple of not-so-useful stub <tt class="docutils literal"><span class="pre">.jar</span></tt> files).</p>
<p><strong>Generating a Bundle</strong></p>
<p>Invoke <tt class="docutils literal"><span class="pre">./pants</span> <span class="pre">goal</span> <span class="pre">bundle</span></tt> on a JVM app or JVM binary target.</p>
<p><strong>Contents of a Bundle</strong></p>
<p>A bundle is basically a directory tree containing <tt class="docutils literal"><span class="pre">.jar</span></tt>s. The
<tt class="docutils literal"><span class="pre">.jar</span></tt> in the top-level directory has a manifest so you can run
it with <tt class="docutils literal"><span class="pre">java</span> <span class="pre">-jar</span></tt>:</p>
<div class="highlight-python"><pre>$ find .
pingpong.jar
libs/
libs/org.scala-lang-scala-library-2.9.2.jar
libs/org.sonatype.sisu.inject-cglib-2.2.1-v20090111.jar
libs/pingpong.jar
libs/src.java.com.twitter.common.examples.pingpong.pingpong-lib.jar
libs/...</pre>
</div>
<p>If your <tt class="docutils literal"><span class="pre">jvm_app</span></tt> has a <tt class="docutils literal"><span class="pre">bundles</span></tt> parameter, this might specify
directories of files to copy into the generated bundle. E.g., your
<tt class="docutils literal"><span class="pre">jvm_app`</span></tt> might have a <tt class="docutils literal"><span class="pre">bundles</span></tt> like</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">bundles</span> <span class="o">=</span> <span class="p">[</span> <span class="n">bundle</span><span class="p">()</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">rglobs</span><span class="p">(</span><span class="s">&#39;tools/config/*&#39;</span><span class="p">)),</span> <span class="p">]</span>
</pre></div>
</div>
<p>In this case, you&#8217;d expect files from this directory to show up in
the bundle:</p>
<div class="highlight-python"><pre>tools/config/
tools/config/launcher.scala
tools/config/...</pre>
</div>
<p><strong>Deploying a Bundle</strong></p>
<p>Instead of just creating a directory tree, you can pass
<tt class="docutils literal"><span class="pre">--bundle-archive</span></tt> to <tt class="docutils literal"><span class="pre">.pants</span> <span class="pre">goal</span> <span class="pre">bundle</span></tt> to generate
an archive file (a zipped tarfile or some other format) instead.
You can copy the archive somewhere, then unpack it on
the destination machine. If there are some &#8220;standard jars&#8221; that are
already on the destination machine, you might want to exclude them
from the archive.</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="from_maven.html">Pants for Maven Experts</a></li>
</ul>
</div>
</div>
</div>


          <footer>
  
    <div class="rst-footer-buttons">
      
        <a href="from_maven.html" class="btn btn-neutral float-right" title="Pants for Maven Experts"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="target_addresses.html" class="btn btn-neutral" title="Target Addresses"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <p>
      &copy; Copyright 2013, Twitter.
  </p>

  <a href="https://www.github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="http://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  

</body>
</html>