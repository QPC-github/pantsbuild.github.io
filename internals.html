

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Pants Internals &mdash; pants 0.1 documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/pants-logo.ico"/>
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  

    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:'./',
        VERSION:'0.1',
        COLLAPSE_INDEX:false,
        FILE_SUFFIX:'.html',
        HAS_SOURCE:  true
      };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
    <link rel="top" title="pants 0.1 documentation" href="index.html"/>
        <link rel="up" title="Pants Developer Center" href="dev.html"/>
        <link rel="next" title="Targets Reference" href="targets.html"/>
        <link rel="prev" title="Pants Development with IntelliJ IDEA" href="intellij.html"/>
 
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-39101739-2']);
  _gaq.push(['_trackPageview']);
</script>
<script type="text/javascript">
  // In a plain template, we'd put this in the footer block.
  // In the read-the-docs template, there is no footer. So use jQuery ready:
  $(document).ready(function() {
    // Ping Google analytics
    var ga = document.createElement('script');
    ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ?
              'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    ga.setAttribute('async', 'true');
    $(document).append(ga);

    // Show the travis-ci status graphic
    $('.wy-breadcrumbs').append(
      '<div style="float: right;">' +
      '<a href="https://travis-ci.org/pantsbuild/pants">' +
      '<img src="https://travis-ci.org/pantsbuild/pants.png?branch=master">' +
      '</a></div>');
  });
</script>
<style type="text/css">
/* Shoehorn in pants logo */
body .icon-home:before {
   content: "";
}

body .icon-home{
  background: transparent url(./_static/pants-logo.ico) center left no-repeat;
  background-position-x: 5px;
  padding-left: 40px;
  padding-right: 35px;
  line-height: 40px;
}

body a.icon-home:hover{
  background: #3d8cbf url(./_static/pants-logo.ico) center left no-repeat;
  background-position-x: 5px;
}

</style>


  <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="index.html" class="icon icon-home"> pants</a>
        <form class="wy-form" action="search.html" method="get">
  <input type="text" name="q" placeholder="Search docs" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix">
        
        
            <ul>
<li class="toctree-l1"><a class="reference internal" href="first_concepts.html">Pants Conceptual Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="first_concepts.html#goals-and-targets">Goals and Targets</a></li>
<li class="toctree-l2"><a class="reference internal" href="first_concepts.html#target-types">Target Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="first_concepts.html#what-pants-does">What Pants Does</a></li>
<li class="toctree-l2"><a class="reference internal" href="first_concepts.html#next-step">Next Step</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="first_tutorial.html">First Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="first_tutorial.html#invoking-pants">Invoking Pants</a></li>
<li class="toctree-l2"><a class="reference internal" href="first_tutorial.html#build-files">BUILD Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="first_tutorial.html#the-usual-commands">The Usual Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="first_tutorial.html#next">Next</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="target_addresses.html">Target Addresses</a></li>
<li class="toctree-l1"><a class="reference internal" href="JVMProjects.html">JVM Projects with Pants</a><ul>
<li class="toctree-l2"><a class="reference internal" href="JVMProjects.html#relevant-goals-and-targets">Relevant Goals and Targets</a></li>
<li class="toctree-l2"><a class="reference internal" href="JVMProjects.html#build-for-a-simple-binary">BUILD for a Simple Binary</a></li>
<li class="toctree-l2"><a class="reference internal" href="JVMProjects.html#the-usual-commands-jvm">The Usual Commands: JVM</a></li>
<li class="toctree-l2"><a class="reference internal" href="JVMProjects.html#toolchain">Toolchain</a></li>
<li class="toctree-l2"><a class="reference internal" href="JVMProjects.html#java7-vs-java6-which-java">Java7 vs Java6, Which Java</a></li>
<li class="toctree-l2"><a class="reference internal" href="JVMProjects.html#bundles-deploy-able-runnable-file-trees">Bundles: Deploy-able Runnable File Trees</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="python-readme.html">Using Pants for Python development</a><ul>
<li class="toctree-l2"><a class="reference internal" href="python-readme.html#why-use-pants-for-python-development">Why use Pants for Python development?</a></li>
<li class="toctree-l2"><a class="reference internal" href="python-readme.html#getting-started">Getting started</a></li>
<li class="toctree-l2"><a class="reference internal" href="python-readme.html#tl-dr-hello-world-with-pants-python">TL;DR - &#8216;Hello world!&#8217; with Pants Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="python-readme.html#describing-python-environments-in-pants">Describing Python environments in Pants</a></li>
<li class="toctree-l2"><a class="reference internal" href="python-readme.html#building-your-first-pex">Building your first PEX</a></li>
<li class="toctree-l2"><a class="reference internal" href="python-readme.html#environment-manipulation-with-pants-py">Environment manipulation with <cite>pants py</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="python-readme.html#id1">Python Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="python-readme.html#manipulating-pex-behavior-with-environment-variables">Manipulating PEX behavior with environment variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="python-readme.html#how-pex-files-work">How PEX files work</a></li>
<li class="toctree-l2"><a class="reference internal" href="python-readme.html#advanced-pants-pex-features">Advanced Pants/PEX features</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="build_files.html">BUILD files</a><ul>
<li class="toctree-l2"><a class="reference internal" href="build_files.html#debugging-a-build-file">Debugging a BUILD File</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_files.html#default-target">Default Target</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_files.html#the-1-1-1-rule">The 1:1:1 Rule</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_files.html#avoid-rglobs">Avoid rglobs</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_files.html#define-separate-targets-for-interface-and-implementation">Define Separate Targets for Interface and Implementation</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_files.html#depend-on-api-in-library-targets-implementation-in-binary-targets">Depend on API in Library Targets, Implementation in Binary Targets</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_files.html#which-build-files-are-executed-and-how">Which <tt class="docutils literal"><span class="pre">BUILD</span></tt> Files are &#8220;Executed&#8221;? (and how?)</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_files.html#id1">BUILD.* files</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="invoking.html">Invoking Pants Build</a><ul>
<li class="toctree-l2"><a class="reference internal" href="invoking.html#rc-files">rc files</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tshoot.html">Troubleshooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tshoot.html#maximum-verbosity">Maximum Verbosity</a></li>
<li class="toctree-l2"><a class="reference internal" href="tshoot.html#scrub-the-environment">Scrub the Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="tshoot.html#nailgun-5-seconds">Nailgun 5 seconds</a></li>
<li class="toctree-l2"><a class="reference internal" href="tshoot.html#questions-issues-bug-reports">Questions, Issues, Bug Reports</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="3rdparty.html">Third-Party Dependencies</a><ul>
<li class="toctree-l2"><a class="reference internal" href="3rdparty_jvm.html">JVM 3rdparty Pattern</a></li>
<li class="toctree-l2"><a class="reference internal" href="3rdparty_py.html">Python 3rdparty Pattern</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ThriftDeps.html">Using Pants with Thrift Dependencies</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ThriftDeps.html#generating-code">Generating Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="ThriftDeps.html#thrift-example">Thrift Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="ThriftDeps.html#publishing">Publishing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="publish.html">Publishing Artifacts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="publish.html#life-of-a-publish">Life of a Publish</a></li>
<li class="toctree-l2"><a class="reference internal" href="publish.html#how-to">How To</a></li>
<li class="toctree-l2"><a class="reference internal" href="publish.html#restricting-to-release-branch">Restricting to &#8220;Release Branch&#8221;</a></li>
<li class="toctree-l2"><a class="reference internal" href="publish.html#authenticating-to-the-artifact-repository">Authenticating to the Artifact Repository</a></li>
<li class="toctree-l2"><a class="reference internal" href="publish.html#troubleshooting">Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="publish.html#want-to-publish-something-publish-many-things">Want to Publish Something? Publish Many Things</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="with_intellij.html">Using Pants with IntelliJ IDEA</a><ul>
<li class="toctree-l2"><a class="reference internal" href="with_intellij.html#generating-idea-project">Generating IDEA Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="with_intellij.html#editing-build-files">Editing BUILD Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="with_intellij.html#pants-build-plugin-for-intellij">Pants Build Plugin for IntelliJ</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="setup_repo.html">Set up Your Source Tree for Pants</a><ul>
<li class="toctree-l2"><a class="reference internal" href="setup_repo.html#configuring-with-pants-ini">Configuring with <tt class="docutils literal"><span class="pre">pants.ini</span></tt></a></li>
<li class="toctree-l2"><a class="reference internal" href="setup_repo.html#configure-code-layout-with-source-root">Configure Code Layout with <cite>source_root</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="setup_repo.html#top-level-build-for-tree-global-config">Top-level <cite>BUILD.*</cite> for tree-global config</a></li>
<li class="toctree-l2"><a class="reference internal" href="setup_repo.html#build-in-the-source-tree-for-special-targets">BUILD.* in the source tree for special targets</a></li>
<li class="toctree-l2"><a class="reference internal" href="setup_repo.html#restricting-publish-to-release-branch">Restricting Publish to &#8220;Release Branch&#8221;</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installing Pants</a><ul>
<li class="toctree-l2"><a class="reference internal" href="install.html#system-wide-installation">System-wide Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="install.html#virtualenv-based-installation">Virtualenv-based Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="install.html#pex-based-installation">PEX-based Installation</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="build_dictionary.html">BUILD Dictionary</a><ul>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#file">__file__</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#amount">Amount</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#annotation-processor">annotation_processor</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#artifact">artifact</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#benchmark">benchmark</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#bundle">bundle</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#credentials">credentials</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#dependencies">dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#egg">egg</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#exclude">exclude</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#globs">globs</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#goal">goal</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#jar">jar</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#jar-library">jar_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#java-agent">java_agent</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#java-antlr-library">java_antlr_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#java-library">java_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#java-protobuf-library">java_protobuf_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#java-tests">java_tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#java-thrift-library">java_thrift_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#junit-tests">junit_tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#jvm-app">jvm_app</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#jvm-binary">jvm_binary</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#maven-layout">maven_layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#page">page</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#pants">pants</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#phase">phase</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#python-antlr-library">python_antlr_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#python-binary">python_binary</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#python-library">python_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#python-requirement">python_requirement</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#python-test-suite">python_test_suite</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#python-tests">python_tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#python-thrift-library">python_thrift_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#repo">repo</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#resources">resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#rglobs">rglobs</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#root-dir">ROOT_DIR</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#scala-library">scala_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#scala-specs">scala_specs</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#scala-tests">scala_tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#scalac-plugin">scalac_plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#setup-py">setup_py</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#source-root">source_root</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#time">Time</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#wiki">wiki</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="goals_reference.html">Goals Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#bench">bench</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#binary">binary</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#bootstrap">bootstrap</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#builddict">builddict</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#buildlint">buildlint</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#bundle">bundle</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#check-exclusives">check-exclusives</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#check-published-deps">check_published_deps</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#checkstyle">checkstyle</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#clean-all">clean-all</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#clean-all-async">clean-all-async</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#compile">compile</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#dependees">dependees</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#dependencies">dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#depmap">depmap</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#detect-duplicates">detect-duplicates</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#doc">doc</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#eclipse">eclipse</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#filedeps">filedeps</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#filemap">filemap</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#filter">filter</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#gen">gen</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#goals">goals</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#gref-phase-idea">idea</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#invalidate">invalidate</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#jar">jar</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#killserver">killserver</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#list">list</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#markdown">markdown</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#minimize">minimize</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#ng-killall">ng-killall</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#path">path</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#pathdeps">pathdeps</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#paths">paths</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#provides">provides</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#publish">publish</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#repl">repl</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#repl-dirty">repl-dirty</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#resolve">resolve</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#resources">resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#roots">roots</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#run">run</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#run-dirty">run-dirty</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#server">server</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#setup">setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#sort">sort</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#targets">targets</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#test">test</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#common">Common</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pants_ini_reference.html">pants.ini Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="pants_ini_reference.html#default-section">DEFAULT section</a></li>
<li class="toctree-l2"><a class="reference internal" href="pants_ini_reference.html#configref-section-idea">idea section</a></li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="dev.html">Pants Developer Center</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="howto_contribute.html">Pants Contributors Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_ask.html">How To Ask</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_develop.html">Pants Developers Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="dev_tasks.html">Task Developer&#8217;s Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="intellij.html">Pants Development with IntelliJ IDEA</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Pants Internals</a></li>
<li class="toctree-l2"><a class="reference internal" href="targets.html">Targets Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="tasks.html">Tasks Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="base.html">Base Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="release.html">Release Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="docs.html">About the documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="credits.html">Credits</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top">
        <i data-toggle="wy-nav-top" class="icon icon-reorder"></i>
        <a href="/">pants</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <ul class="wy-breadcrumbs">
  <li><a href="index.html">Docs</a> &raquo;</li>
  <li><a href="">Pants Internals</a></li>
  
</ul>
<hr/>

          
  <div class="section" id="pants-internals">
<h1>Pants Internals<a class="headerlink" href="#pants-internals" title="Permalink to this headline">¶</a></h1>
<p>Pants is a build tool. This document describes some of its internals,
concentrating on how to tailor Pants to your needs, such as integrating it with
other tools.</p>
<p>If you want to run Pants or to write BUILD files, you probably want
the <a class="reference internal" href="first_concepts.html"><em>Pants Conceptual Overview</em></a> instead.  But if you want to support a new tool or a
new language, read on.</p>
<div class="section" id="how-some-base-classes-interrelate">
<h2>How Some Base Classes Interrelate<a class="headerlink" href="#how-some-base-classes-interrelate" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt><strong>Target</strong></dt>
<dd><p class="first">An addressable thing, such as a <a class="reference internal" href="build_dictionary.html#python_binary" title="python_binary"><tt class="xref py py-mod docutils literal"><span class="pre">python_binary</span></tt></a> or <tt class="xref py py-mod docutils literal"><span class="pre">scala_tests</span></tt>.
To add support for a new language, you probably want to add new target types
to represent things you can build with that language. Most Target instances can
depend on other Target instances. As a rule of thumb, if code in Target _A_
imports code in Target <em>B</em>, then <em>A</em> depends on <em>B</em>. If <em>A</em>
depends on <em>B</em>, then when carrying out some goal on <em>A</em>, you can be sure that
goal has been carried out on <em>B</em>.</p>
<p class="last">TODO: if there are one or more exemplary Target classes, link to them.</p>
</dd>
<dt><strong>goal</strong> a.k.a. <strong>Phase</strong></dt>
<dd>From the users&#8217; point of view, when they invoke
<cite>pants test binary src/python/mach_turtle</cite> the &#8220;goals&#8221; are <cite>test</cite> and <cite>binary</cite>,
the actions requested. Internally, these are implemented in terms of
Goals, Phases, and Tasks. Confusingly (and hopefully to be changed), the
things that the user calls &#8220;goals&#8221; are actually Phases. A Phase has one or
more Goals:</dd>
<dt><strong>Goal</strong></dt>
<dd>The glue that binds Phases and Tasks together. A Phase has one or
more Goals. A Goal has a Task, which does the actual work of invoking tools.
A <cite>compile</cite> Phase, for example, could contain a Goal for Python
compilation, a Goal for Java compilation, etc.; each of those Goals has
one Task. If you want an existing Phase to do something new, instead of
cramming your code into an existing Goal, you probably want to define a new
Goal and <cite>install</cite> it in the existing Phase. A Goal can depend on Phases,
expressing that Pants should carry out those Phases before carrying out the
Goal. For example, the java-test Goal depends on the <cite>compile</cite> Phase because
testing uncompiled code is hard.</dd>
<dt><strong>Task</strong></dt>
<dd>The thing that does the actual work for some Goal. It looks
at the environment and Targets, invokes some tool, generates things, and reports
success/failure. It can define command-line flags to check.
If you&#8217;re giving Pants the ability to do something new, you&#8217;re probably
adding a Task. See <a class="reference internal" href="dev_tasks.html"><em>Task Developer&#8217;s Guide</em></a>.</dd>
<dt><strong>Context</strong></dt>
<dd>An API to the state of the world. A Task uses this to find out
things like the flags the user set on the command line, <cite>pants.ini</cite> config,
and the state of the build cache. The task uses <cite>context.products</cite> to
communicate results and requests for build results.</dd>
</dl>
</div>
<div class="section" id="examining-a-phase-goal-task-chain">
<h2>Examining a Phase-Goal-Task Chain<a class="headerlink" href="#examining-a-phase-goal-task-chain" title="Permalink to this headline">¶</a></h2>
<p>It&#8217;s not so easy to figure out in your head which Goals+Tasks are
invoked for some command line command.  The dependency relationships
between Phases, Goals, and Tasks can get complex.  The <cite>&#8211;explain</cite>
flag helps here. Instead of building something, it echoes a summary of
the phases, goals, and tasks it would use to build something. For
example, you can find out what happens on a <cite>compile</cite>:</p>
<div class="highlight-python"><div class="highlight"><pre>$./pants goal compile --explain
Phase Execution Order:

resolve-idl -&gt; thriftstore-codegen -&gt; gen -&gt; resolve -&gt; compile

Phase [Goal-&gt;Task] Order:

resolve-idl [idl-&gt;IdlResolve, extract-&gt;Extract]
thriftstore-codegen [thriftstore-codegen-&gt;ThriftstoreCodeGen]
gen [thrift-&gt;ThriftGen, scrooge-&gt;ScroogeGen, protoc-&gt;ProtobufGen, antlr-&gt;AntlrGen
resolve [ivy-&gt;IvyResolve]
compile [checkstyle-&gt;Checkstyle]
$
</pre></div>
</div>
<p>This tells you that the <cite>resolve</cite> phase comes before the <cite>compile</cite> phase, the
<cite>gen</cite> phase comes before that, etc. There is more than one Goal registered for
the <cite>gen</cite> phase. In the <cite>gen [thrift-&gt;ThriftGen,...</cite> text, <cite>thrift</cite> is
the name of a Goal and <cite>ThriftGen</cite> is the name of its Task class.</p>
</div>
<div class="section" id="defining-a-goal-task">
<h2>Defining a Goal/Task<a class="headerlink" href="#defining-a-goal-task" title="Permalink to this headline">¶</a></h2>
<p>Defining a new Goal (meant here in the glue-that-binds-Phases-and-Tasks sense)
tells Pants of some new action it can take. This might
be a new phase or adding new meaning for an old phase (e.g., telling
the &#8220;gen&#8221; code-generation phase about some new way to generate code).</p>
<p>A task can mutate the target graph. If it, say, generates some Java code
from some other language, it can create a Java target and make things that
depended on an <tt class="docutils literal"><span class="pre">otherlang_gen</span></tt> target instead depend on the created
Java target.</p>
<div class="section" id="basic-task">
<h3>Basic Task<a class="headerlink" href="#basic-task" title="Permalink to this headline">¶</a></h3>
<p>A Goal&#8217;s <tt class="docutils literal"><span class="pre">Task</span></tt> is the class that does the &#8220;work&#8221;.
When you define a new <tt class="docutils literal"><span class="pre">Task</span></tt> class, you&#8217;ll want to have at least</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">setup_parser(cls,</span> <span class="pre">option_group,</span> <span class="pre">args,</span> <span class="pre">mkflag)</span></tt>
Defines command-line flags user can use.</li>
<li><tt class="docutils literal"><span class="pre">__init__(self,</span> <span class="pre">context)</span></tt>
The <tt class="docutils literal"><span class="pre">context</span></tt> encapsulates the outside world.
It has values of command-line flags for this invocation;
an API to see configuration from <a class="reference internal" href="setup_repo.html#setup-pants-ini"><em>pants.ini</em></a>;
a way to get files that are products of other build steps.</li>
<li><tt class="docutils literal"><span class="pre">execute(self,</span> <span class="pre">targets)</span></tt>
Actually do something; perhaps generate some products from some sources.</li>
</ul>
<p>There are some base <tt class="docutils literal"><span class="pre">Task</span></tt> classes to help you get started. E.g., if your
goal just outputs information to the console, subclass <tt class="docutils literal"><span class="pre">ConsoleTask</span></tt>.</p>
</div>
<div class="section" id="group">
<h3>Group<a class="headerlink" href="#group" title="Permalink to this headline">¶</a></h3>
<p>A few <tt class="docutils literal"><span class="pre">Goal</span></tt>s have group parameters. Specifically, the JVM compile goals:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">goal</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;scalac&#39;</span><span class="p">,</span>
     <span class="n">action</span><span class="o">=</span><span class="n">ScalaCompile</span><span class="p">,</span>
     <span class="n">group</span><span class="o">=</span><span class="n">group</span><span class="p">(</span><span class="s">&#39;jvm&#39;</span><span class="p">,</span> <span class="n">is_scala</span><span class="p">),</span>
     <span class="n">dependencies</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;gen&#39;</span><span class="p">,</span> <span class="s">&#39;resolve&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">install</span><span class="p">(</span><span class="s">&#39;compile&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">with_description</span><span class="p">(</span>
       <span class="s">&#39;Compile both generated and checked in code.&#39;</span>
     <span class="p">)</span>
<span class="n">goal</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;apt&#39;</span><span class="p">,</span>
     <span class="n">action</span><span class="o">=</span><span class="n">JavaCompile</span><span class="p">,</span>
     <span class="n">group</span><span class="o">=</span><span class="n">group</span><span class="p">(</span><span class="s">&#39;jvm&#39;</span><span class="p">,</span> <span class="n">is_apt</span><span class="p">),</span>
     <span class="n">dependencies</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;gen&#39;</span><span class="p">,</span> <span class="s">&#39;resolve&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">install</span><span class="p">(</span><span class="s">&#39;compile&#39;</span><span class="p">)</span>
<span class="n">goal</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;javac&#39;</span><span class="p">,</span>
     <span class="n">action</span><span class="o">=</span><span class="n">JavaCompile</span><span class="p">,</span>
     <span class="n">group</span><span class="o">=</span><span class="n">group</span><span class="p">(</span><span class="s">&#39;jvm&#39;</span><span class="p">,</span> <span class="n">is_java</span><span class="p">),</span>
     <span class="n">dependencies</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;gen&#39;</span><span class="p">,</span> <span class="s">&#39;resolve&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">install</span><span class="p">(</span><span class="s">&#39;compile&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>A goal normally operates on one target at a time.
But some tools, e.g., <tt class="docutils literal"><span class="pre">javac</span></tt> can operate on many many inputs with one
invocation. Such tools might be more efficient used that way.
Perhaps there&#8217;s a lot of overhead starting up the tool, but it takes
about as long to compile 10 source files as to compile one.
A <tt class="docutils literal"><span class="pre">goal</span></tt> with a <tt class="docutils literal"><span class="pre">group</span></tt> will try to operate on more than one target at
a time.</p>
</div>
</div>
<div class="section" id="code-layout">
<h2>Code Layout<a class="headerlink" href="#code-layout" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt><a class="reference external" href="https://github.com/pantsbuild/pants/tree/master/src/python/pants/base/">./</a></dt>
<dd>Top-level directory
<strong>`__init__.py`</strong> Among other things, defines the symbols
visible in <cite>BUILD</cite> files. If you add a
Target type, this file should import it.
<strong>`BUILD`</strong> Dogfood and/or recursion.
<strong>`*.md`</strong> Docs too important for <cite>docs/</cite>.</dd>
<dt><a class="reference external" href="https://github.com/pantsbuild/pants/tree/master/src/python/pants/base/">base</a></dt>
<dd>Defines <cite>Target</cite> and other fundamental pieces/base classes.
As a rule of thumb, code in <tt class="docutils literal"><span class="pre">base</span></tt> shouldn&#8217;t <tt class="docutils literal"><span class="pre">import</span></tt> anything in
non-base Pants; but many things in non-base Pants <tt class="docutils literal"><span class="pre">import</span></tt> from <tt class="docutils literal"><span class="pre">base</span></tt>.
If you&#8217;re editing code in <tt class="docutils literal"><span class="pre">base</span></tt> and find yourself referring to
the JVM (or other target-language-specific things), you&#8217;re probably editing
the wrong thing and want to look further up the inheritance tree.</dd>
<dt><a class="reference external" href="https://github.com/pantsbuild/pants/tree/master/src/python/pants/bin/">bin</a></dt>
<dd>The &#8220;main&#8221; of Pants itself lives here.</dd>
<dt><a class="reference external" href="https://github.com/pantsbuild/pants/tree/master/src/python/pants/commands/">commands</a></dt>
<dd>Before we had goals we had commands, and they lived here.
<strong>goal.py</strong> Many Goals and Phases are defined here.</dd>
<dt><a class="reference external" href="https://github.com/pantsbuild/pants/tree/master/src/python/pants/docs/">docs</a></dt>
<dd>Documentation. The source of this very document you&#8217;re reading now lives here.</dd>
<dt><a class="reference external" href="https://github.com/pantsbuild/pants/tree/master/src/python/pants/goal/">goal</a></dt>
<dd>The source of <cite>Context</cite>, <cite>Goal</cite>, and <cite>Phase</cite> (some
important classes) lives here. If you extend pants to work with other
tools/languages, hopefully you won&#8217;t need to edit these; but you&#8217;ll
probably look at them to see the flow of control.</dd>
<dt><a class="reference external" href="https://github.com/pantsbuild/pants/tree/master/src/python/pants/java/">java</a></dt>
<dd>(TODO OMG bluffing) Utility classes useful to many things that work
with Java code.</dd>
<dt><a class="reference external" href="https://github.com/pantsbuild/pants/tree/master/src/python/pants/python/">python</a></dt>
<dd>(TODO OMG bluffing) Utility classes useful to many things that work
with Python code.</dd>
<dt><a class="reference external" href="https://github.com/pantsbuild/pants/tree/master/src/python/pants/targets/">targets</a></dt>
<dd>Source of the Target classes; e.g., the code behind <cite>jvm_binary</cite>
lives here. If you define a new Target type, add its code here.</dd>
<dt><a class="reference external" href="https://github.com/pantsbuild/pants/tree/master/src/python/pants/tasks/">tasks</a></dt>
<dd>Source of the Task classes. E.g., <cite>junit_run</cite>, the code that
invokes JUnit if someone tests a <cite>java_tests</cite> target.</dd>
<dt><a class="reference external" href="https://github.com/pantsbuild/pants/tree/master/tests/python/pants_test/">tests/.../pants</a></dt>
<dd>Tests for Pants. These tend to be <tt class="docutils literal"><span class="pre">python_tests</span></tt> exercising Pants functions.
<tt class="docutils literal"><span class="pre">pants_test.base_build_root_test.BaseBuildRootTest</span></tt> is a very handy
class; it has methods to set up and tear down little source trees with
<tt class="docutils literal"><span class="pre">BUILD</span></tt> files.</dd>
</dl>
</div>
</div>


          <footer>
  
    <div class="rst-footer-buttons">
      
        <a href="targets.html" class="btn btn-neutral float-right" title="Targets Reference"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="intellij.html" class="btn btn-neutral" title="Pants Development with IntelliJ IDEA"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <p>
      &copy; Copyright 2014, Pants project contributors.
  </p>

  <a href="https://www.github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="http://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  

</body>
</html>