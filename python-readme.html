

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Python Projects with Pants &mdash; pants 0.1 documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/pants-logo.ico"/>
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  

    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:'./',
        VERSION:'0.1',
        COLLAPSE_INDEX:false,
        FILE_SUFFIX:'.html',
        HAS_SOURCE:  true
      };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
    <link rel="top" title="pants 0.1 documentation" href="index.html"/>
        <link rel="next" title="PEX Design" href="pex_design.html"/>
        <link rel="prev" title="Pants for Maven Experts" href="from_maven.html"/>
 
<script type="text/javascript">
  // In a plain template, we'd put this in the footer block.
  // In the read-the-docs template, there is no footer. So use jQuery ready:
  $(document).ready(function() {
    // Ping Google analytics
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-39101739-2', 'auto');
    ga('send', 'pageview');

    // Show the travis-ci status graphic
    $('.wy-breadcrumbs').append(
      '<div style="float: right;">' +
      '<a href="https://travis-ci.org/pantsbuild/pants">' +
      '<img src="https://travis-ci.org/pantsbuild/pants.png?branch=master">' +
      '</a></div>');
  });
</script>
<style type="text/css">
/* Shoehorn in pants logo */
body .icon-home:before {
   content: "";
}

body .icon-home{
  background: transparent url(./_static/pants-logo.ico) center left no-repeat;
  background-position-x: 5px;
  padding-left: 40px;
  padding-right: 35px;
  line-height: 40px;
}

body a.icon-home:hover{
  background: #3d8cbf url(./_static/pants-logo.ico) center left no-repeat;
  background-position-x: 5px;
}

</style>


  <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="index.html" class="icon icon-home"> pants</a>
        <form class="wy-form" action="search.html" method="get">
  <input type="text" name="q" placeholder="Search docs" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="first_concepts.html">Pants Conceptual Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="first_concepts.html#goals-and-targets">Goals and Targets</a></li>
<li class="toctree-l2"><a class="reference internal" href="first_concepts.html#target-types">Target Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="first_concepts.html#what-pants-does">What Pants Does</a></li>
<li class="toctree-l2"><a class="reference internal" href="first_concepts.html#next-step">Next Step</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="first_tutorial.html">First Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="first_tutorial.html#invoking-pants">Invoking Pants</a></li>
<li class="toctree-l2"><a class="reference internal" href="first_tutorial.html#build-files">BUILD Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="first_tutorial.html#the-usual-commands">The Usual Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="first_tutorial.html#next">Next</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="target_addresses.html">Target Addresses</a></li>
<li class="toctree-l1"><a class="reference internal" href="JVMProjects.html">JVM Projects with Pants</a><ul>
<li class="toctree-l2"><a class="reference internal" href="JVMProjects.html#relevant-goals-and-targets">Relevant Goals and Targets</a></li>
<li class="toctree-l2"><a class="reference internal" href="JVMProjects.html#build-for-a-simple-binary">BUILD for a Simple Binary</a></li>
<li class="toctree-l2"><a class="reference internal" href="JVMProjects.html#the-usual-commands-jvm">The Usual Commands: JVM</a></li>
<li class="toctree-l2"><a class="reference internal" href="JVMProjects.html#toolchain">Toolchain</a></li>
<li class="toctree-l2"><a class="reference internal" href="JVMProjects.html#java7-vs-java6-which-java">Java7 vs Java6, Which Java</a></li>
<li class="toctree-l2"><a class="reference internal" href="JVMProjects.html#bundles-deploy-able-runnable-file-trees">Bundles: Deploy-able Runnable File Trees</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Python Projects with Pants</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#relevant-goals-and-targets">Relevant Goals and Targets</a></li>
<li class="toctree-l2"><a class="reference internal" href="#build-for-a-simple-binary">BUILD for a Simple Binary</a></li>
<li class="toctree-l2"><a class="reference internal" href="#handling-python-requirement">Handling <tt class="docutils literal"><span class="pre">python_requirement</span></tt></a></li>
<li class="toctree-l2"><a class="reference internal" href="#pex-contents">PEX Contents</a></li>
<li class="toctree-l2"><a class="reference internal" href="#repl-and-environment-manipulation-with-pants-py">REPL and environment manipulation with <cite>pants py</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="#python-binary-entry-point">python_binary entry_point</a></li>
<li class="toctree-l2"><a class="reference internal" href="#more-about-python-tests">More About Python Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="#manipulating-pex-behavior-with-environment-variables">Manipulating PEX behavior with environment variables</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="page.html">README Files and Markdown</a><ul>
<li class="toctree-l2"><a class="reference internal" href="page.html#markdown-to-html">Markdown to HTML</a></li>
<li class="toctree-l2"><a class="reference internal" href="page.html#link-to-another-page">Link to Another <tt class="docutils literal"><span class="pre">page</span></tt></a></li>
<li class="toctree-l2"><a class="reference internal" href="page.html#publishing">Publishing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="build_files.html">BUILD files</a><ul>
<li class="toctree-l2"><a class="reference internal" href="build_files.html#debugging-a-build-file">Debugging a BUILD File</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_files.html#default-target">Default Target</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_files.html#the-1-1-1-rule">The 1:1:1 Rule</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_files.html#avoid-rglobs">Avoid rglobs</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_files.html#define-separate-targets-for-interface-and-implementation">Define Separate Targets for Interface and Implementation</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_files.html#depend-on-api-in-library-targets-implementation-in-binary-targets">Depend on API in Library Targets, Implementation in Binary Targets</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_files.html#which-build-files-are-executed-and-how">Which <tt class="docutils literal"><span class="pre">BUILD</span></tt> Files are &#8220;Executed&#8221;? (and how?)</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_files.html#id1">BUILD.* files</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="invoking.html">Invoking Pants Build</a><ul>
<li class="toctree-l2"><a class="reference internal" href="invoking.html#rc-files">rc files</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tshoot.html">Troubleshooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tshoot.html#maximum-verbosity">Maximum Verbosity</a></li>
<li class="toctree-l2"><a class="reference internal" href="tshoot.html#scrub-the-environment">Scrub the Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="tshoot.html#nailgun-5-seconds">Nailgun 5 seconds</a></li>
<li class="toctree-l2"><a class="reference internal" href="tshoot.html#questions-issues-bug-reports">Questions, Issues, Bug Reports</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="3rdparty.html">Third-Party Dependencies</a><ul>
<li class="toctree-l2"><a class="reference internal" href="3rdparty_jvm.html">JVM 3rdparty Pattern</a></li>
<li class="toctree-l2"><a class="reference internal" href="3rdparty_py.html">Python 3rdparty Pattern</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ThriftDeps.html">Using Pants with Thrift Dependencies</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ThriftDeps.html#generating-code">Generating Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="ThriftDeps.html#thrift-example">Thrift Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="ThriftDeps.html#publishing">Publishing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="publish.html">Publishing Artifacts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="publish.html#life-of-a-publish">Life of a Publish</a></li>
<li class="toctree-l2"><a class="reference internal" href="publish.html#how-to">How To</a></li>
<li class="toctree-l2"><a class="reference internal" href="publish.html#restricting-to-release-branch">Restricting to &#8220;Release Branch&#8221;</a></li>
<li class="toctree-l2"><a class="reference internal" href="publish.html#authenticating-to-the-artifact-repository">Authenticating to the Artifact Repository</a></li>
<li class="toctree-l2"><a class="reference internal" href="publish.html#troubleshooting">Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="publish.html#want-to-publish-something-publish-many-things">Want to Publish Something? Publish Many Things</a></li>
<li class="toctree-l2"><a class="reference internal" href="publish.html#test-with-a-fake-local-publish">Test with a Fake Local &#8220;Publish&#8221;</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="with_intellij.html">Using Pants with IntelliJ IDEA</a><ul>
<li class="toctree-l2"><a class="reference internal" href="with_intellij.html#pants-build-plugin-for-intellij">Pants Build Plugin for IntelliJ</a></li>
<li class="toctree-l2"><a class="reference internal" href="with_intellij.html#generating-idea-project">Generating IDEA Project</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="setup_repo.html">Set up Your Source Tree for Pants</a><ul>
<li class="toctree-l2"><a class="reference internal" href="setup_repo.html#configuring-with-pants-ini">Configuring with <tt class="docutils literal"><span class="pre">pants.ini</span></tt></a></li>
<li class="toctree-l2"><a class="reference internal" href="setup_repo.html#configure-code-layout-with-source-root">Configure Code Layout with <cite>source_root</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="setup_repo.html#top-level-build-for-tree-global-config">Top-level <cite>BUILD.*</cite> for tree-global config</a></li>
<li class="toctree-l2"><a class="reference internal" href="setup_repo.html#build-in-the-source-tree-for-special-targets">BUILD.* in the source tree for special targets</a></li>
<li class="toctree-l2"><a class="reference internal" href="setup_repo.html#restricting-publish-to-release-branch">Restricting Publish to &#8220;Release Branch&#8221;</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installing Pants</a><ul>
<li class="toctree-l2"><a class="reference internal" href="install.html#pex-based-installation">PEX-based Installation</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="build_dictionary.html">BUILD Dictionary</a><ul>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#file">__file__</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#amount">Amount</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#android-binary">android_binary</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#android-resources">android_resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#annotation-processor">annotation_processor</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#artifact">artifact</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#benchmark">benchmark</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#bundle">bundle</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#credentials">credentials</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#dependencies">dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#egg">egg</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#exclude">exclude</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#globs">globs</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#goal">goal</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#jar">jar</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#jar-library">jar_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#java-agent">java_agent</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#java-antlr-library">java_antlr_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#java-library">java_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#java-protobuf-library">java_protobuf_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#java-tests">java_tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#java-thrift-library">java_thrift_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#jaxb-library">jaxb_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#junit-tests">junit_tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#jvm-app">jvm_app</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#jvm-binary">jvm_binary</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#maven-layout">maven_layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#page">page</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#pants">pants</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#phase">phase</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#python-antlr-library">python_antlr_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#python-binary">python_binary</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#python-library">python_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#python-requirement">python_requirement</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#python-requirement-library">python_requirement_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#python-requirements">python_requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#python-test-suite">python_test_suite</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#python-tests">python_tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#python-thrift-library">python_thrift_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#repo">repo</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#resources">resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#rglobs">rglobs</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#root-dir">ROOT_DIR</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#scala-library">scala_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#scala-specs">scala_specs</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#scala-tests">scala_tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#scalac-plugin">scalac_plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#setup-py">setup_py</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#source-root">source_root</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#time">Time</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#wiki">wiki</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#wiki-artifact">wiki_artifact</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="goals_reference.html">Goals Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#bench">bench</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#binary">binary</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#bootstrap">bootstrap</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#builddict">builddict</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#buildlint">buildlint</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#bundle">bundle</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#check-exclusives">check-exclusives</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#check-published-deps">check_published_deps</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#clean-all">clean-all</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#clean-all-async">clean-all-async</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#compile">compile</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#dependees">dependees</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#dependencies">dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#depmap">depmap</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#detect-duplicates">detect-duplicates</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#doc">doc</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#eclipse">eclipse</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#filedeps">filedeps</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#filemap">filemap</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#filter">filter</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#gen">gen</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#goals">goals</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#gref-phase-idea">idea</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#imports">imports</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#invalidate">invalidate</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#jar">jar</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#killserver">killserver</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#list">list</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#markdown">markdown</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#minimize">minimize</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#ng-killall">ng-killall</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#path">path</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#pathdeps">pathdeps</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#paths">paths</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#provides">provides</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#publish">publish</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#repl">repl</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#repl-dirty">repl-dirty</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#resolve">resolve</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#resources">resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#roots">roots</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#run">run</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#run-dirty">run-dirty</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#server">server</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#sort">sort</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#targets">targets</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#test">test</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#common">Common</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pants_ini_reference.html">pants.ini Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="pants_ini_reference.html#default-section">DEFAULT section</a></li>
<li class="toctree-l2"><a class="reference internal" href="pants_ini_reference.html#configref-section-idea">idea section</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="dev.html">Pants Developer Center</a><ul>
<li class="toctree-l2"><a class="reference internal" href="howto_contribute.html">Pants Contributors Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_ask.html">How To Ask</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_develop.html">Pants Developers Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="dev_tasks.html">Task Developer&#8217;s Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="intellij.html">Pants Development with IntelliJ IDEA</a></li>
<li class="toctree-l2"><a class="reference internal" href="internals.html">Pants Internals</a></li>
<li class="toctree-l2"><a class="reference internal" href="targets.html">Targets Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="tasks.html">Tasks Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="base.html">Base Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="release.html">Release Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="docs.html">About the documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="credits.html">Credits</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top">
        <i data-toggle="wy-nav-top" class="icon icon-reorder"></i>
        <a href="/">pants</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <ul class="wy-breadcrumbs">
  <li><a href="index.html">Docs</a> &raquo;</li>
  <li><a href="">Python Projects with Pants</a></li>
  
</ul>
<hr/>

          
  <div class="section" id="python-projects-with-pants">
<h1>Python Projects with Pants<a class="headerlink" href="#python-projects-with-pants" title="Permalink to this headline">¶</a></h1>
<p>Pants makes the manipulation and distribution of hermetically sealed Python
environments painless.
You can organize your code in the <a class="reference internal" href="first_concepts.html"><em>Pants way</em></a>,
with targets for binaries, libraries, and tests.
Pants builds Python code into
<a class="reference external" href="https://github.com/twitter/commons/blob/master/src/python/twitter/common/python/README.md">PEXes</a>.
(A PEX is, roughly, an archive file containing a runnable Python environment.)
Pants isn&#8217;t the only PEX-generation tool out there; but if you have some
&#8220;common code&#8221; used by more than one PEX, Pants makes it easy to manage
the dependencies.</p>
<p>This page assumes that you&#8217;ve already read <a class="reference internal" href="first_tutorial.html"><em>First Tutorial</em></a>.</p>
<p>Pants&#8217; Python support changed in 2014. Depending on how old your Pants is,
Pants goals might not work with Python code. If you use older pants,
please see <a class="reference internal" href="python_old.html"><em>Using Pants for Python development, 2014 and Earlier</em></a>.</p>
<p>Pants&#8217; Python support is still changing. Depending on what you&#8217;re trying to
do, your Pants command might start with <tt class="docutils literal"><span class="pre">goal</span></tt> or might start with something
else.</p>
<div class="section" id="relevant-goals-and-targets">
<h2>Relevant Goals and Targets<a class="headerlink" href="#relevant-goals-and-targets" title="Permalink to this headline">¶</a></h2>
<p><strong>Runnable Binary</strong></p>
<blockquote>
<div>Pants can generate PEXes, executables built from Python.
Invoke the <a class="reference internal" href="goals_reference.html#gref-phase-binary"><em>binary goal</em></a>
on a <a class="reference internal" href="build_dictionary.html#bdict-python-binary"><em>python_binary</em></a>
target to generate a <tt class="docutils literal"><span class="pre">.pex</span></tt>. You can also invoke the
<a class="reference internal" href="goals_reference.html#gref-phase-run"><em>run goal</em></a>
on a <tt class="docutils literal"><span class="pre">python_binary</span></tt> to run its code &#8220;in place.&#8221;</div></blockquote>
<p><strong>Importable Code</strong></p>
<blockquote>
<div><p><a class="reference internal" href="build_dictionary.html#bdict-python-library"><em>python_library</em></a> BUILD targets make Python code
&#8220;import-able&#8221;.
The rule of thumb is that each directory of <tt class="docutils literal"><span class="pre">.py</span></tt> files has a
<tt class="docutils literal"><span class="pre">BUILD</span></tt> file with a <tt class="docutils literal"><span class="pre">python_library</span></tt> target. A Python target
that has a <tt class="docutils literal"><span class="pre">python_library</span></tt> in its <tt class="docutils literal"><span class="pre">dependencies</span></tt> can import
its code.</p>
<p>To use code that&#8217;s not in your workspace, use a
<a class="reference internal" href="build_dictionary.html#bdict-python-requirement-library"><em>python_requirement_library</em></a>
and a <a class="reference internal" href="build_dictionary.html#bdict-python-requirement"><em>python_requirement</em></a> to
refer to the code.
To use several several of these via a <tt class="docutils literal"><span class="pre">pip</span></tt>-style
<tt class="docutils literal"><span class="pre">requirements.txt</span></tt> file, use a
<em class="xref std std-ref">python_requirements_library</em>.</p>
</div></blockquote>
<p><strong>Tests</strong></p>
<blockquote>
<div>A <a class="reference internal" href="build_dictionary.html#bdict-python-tests"><em>python_tests</em></a> BUILD target has some
<tt class="docutils literal"><span class="pre">pytest</span></tt> tests. It normally
depends on a <tt class="docutils literal"><span class="pre">python_library</span></tt> target so it can import and test
the library&#8217;s code. Use the <a class="reference internal" href="goals_reference.html#gref-phase-test"><em>test goal</em></a>
to run these tests.</div></blockquote>
<p><strong>Generated Code</strong></p>
<blockquote>
<div>A <a class="reference internal" href="build_dictionary.html#bdict-python-thrift-library"><em>python_thrift_library</em></a>
generates Python code from <tt class="docutils literal"><span class="pre">.thrift</span></tt> source;
a Python target that has this target in its <tt class="docutils literal"><span class="pre">dependencies</span></tt> can <tt class="docutils literal"><span class="pre">import</span></tt>
the generated Python code.</div></blockquote>
</div>
<div class="section" id="build-for-a-simple-binary">
<h2>BUILD for a Simple Binary<a class="headerlink" href="#build-for-a-simple-binary" title="Permalink to this headline">¶</a></h2>
<p>The pantsbuild/pants repo has a simple &#8220;hello world&#8221; sample Python binary.
You can use <tt class="docutils literal"><span class="pre">goal</span> <span class="pre">binary</span></tt> to build a PEX from it.
You can then run the PEX:</p>
<div class="highlight-python"><div class="highlight"><pre>$ ./pants goal binary src/python/example/hello/main
     ...much output...
$ ./dist/main.pex # run the generated PEX
Hello, world!
$
</pre></div>
</div>
<p><tt class="docutils literal"><span class="pre">src/python/example/hello/main/BUILD</span></tt> defines a <tt class="docutils literal"><span class="pre">python_binary</span></tt> target,
a build-able thing that configures a runnable program made from Python code:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">python_binary</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;main&#39;</span><span class="p">,</span>
  <span class="n">dependencies</span><span class="o">=</span><span class="p">[</span>
    <span class="n">pants</span><span class="p">(</span><span class="s">&#39;src/python/example/hello/greet:greet&#39;</span><span class="p">),</span>
  <span class="p">],</span>
  <span class="n">source</span><span class="o">=</span><span class="s">&#39;main.py&#39;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>This binary has a source file with its &#8220;main&#8221;. A Python binary&#8217;s &#8220;main&#8221; can be
in a depended-upon <tt class="docutils literal"><span class="pre">python_library</span></tt> or in the <tt class="docutils literal"><span class="pre">python_binary</span></tt>&#8216;s
<tt class="docutils literal"><span class="pre">source</span></tt>.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="p">(</span><span class="n">nested_scopes</span><span class="p">,</span> <span class="n">generators</span><span class="p">,</span> <span class="n">division</span><span class="p">,</span> <span class="n">absolute_import</span><span class="p">,</span> <span class="n">with_statement</span><span class="p">,</span>
                        <span class="n">print_function</span><span class="p">,</span> <span class="n">unicode_literals</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">example.hello.greet.greet</span> <span class="kn">import</span> <span class="n">greet</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
  <span class="k">print</span><span class="p">(</span><span class="n">greet</span><span class="p">(</span><span class="s">&#39;world&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>This code imports code from another target.
To make this work, the binary target has a dependency
<tt class="docutils literal"><span class="pre">src/python/example/hello/greet</span></tt> and the Python
code imports <tt class="docutils literal"><span class="pre">example/hello/greet</span></tt>.</p>
<p>You remember that libraries configure &#8220;importable&#8221; code;
<tt class="docutils literal"><span class="pre">example/hello/greet/BUILD</span></tt> has a <tt class="docutils literal"><span class="pre">python_library</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">python_library</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;greet&#39;</span><span class="p">,</span>
  <span class="n">dependencies</span><span class="o">=</span><span class="p">[</span>
    <span class="n">pants</span><span class="p">(</span><span class="s">&#39;3rdparty/python:ansicolors&#39;</span><span class="p">),</span>
  <span class="p">],</span>
  <span class="n">sources</span><span class="o">=</span><span class="n">globs</span><span class="p">(</span><span class="s">&#39;*.py&#39;</span><span class="p">),</span>
<span class="p">)</span>
</pre></div>
</div>
<p>This <tt class="docutils literal"><span class="pre">python_library</span></tt> pulls in <tt class="docutils literal"><span class="pre">greet.py</span></tt>&#8216;s Python code:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="p">(</span><span class="n">nested_scopes</span><span class="p">,</span> <span class="n">generators</span><span class="p">,</span> <span class="n">division</span><span class="p">,</span> <span class="n">absolute_import</span><span class="p">,</span> <span class="n">with_statement</span><span class="p">,</span>
                        <span class="n">print_function</span><span class="p">,</span> <span class="n">unicode_literals</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">colors</span> <span class="kn">import</span> <span class="n">green</span>


<span class="k">def</span> <span class="nf">greet</span><span class="p">(</span><span class="n">greetee</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;Given the name, return a greeting for a person of that name.&quot;&quot;&quot;</span>
  <span class="k">return</span> <span class="n">green</span><span class="p">(</span><span class="s">&#39;Hello, </span><span class="si">%s</span><span class="s">!&#39;</span> <span class="o">%</span> <span class="n">greetee</span><span class="p">)</span>
</pre></div>
</div>
<p>To test the library&#8217;s code, we set up
<tt class="docutils literal"><span class="pre">tests/python/example_test/hello/greet/BUILD</span></tt> with a <tt class="docutils literal"><span class="pre">python_tests</span></tt>
target. It depends on the library:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="p">(</span><span class="n">nested_scopes</span><span class="p">,</span> <span class="n">generators</span><span class="p">,</span> <span class="n">division</span><span class="p">,</span> <span class="n">absolute_import</span><span class="p">,</span> <span class="n">with_statement</span><span class="p">,</span>
                        <span class="n">print_function</span><span class="p">,</span> <span class="n">unicode_literals</span><span class="p">)</span>

<span class="kn">import</span> <span class="nn">unittest</span>

<span class="kn">from</span> <span class="nn">example.hello.greet.greet</span> <span class="kn">import</span> <span class="n">greet</span>


<span class="k">class</span> <span class="nc">GreetTest</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
  <span class="k">def</span> <span class="nf">test_greeting_mentions_addressee</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Fancy formatting should not omit the person we&#39;re greeting&quot;&quot;&quot;</span>
    <span class="k">assert</span><span class="p">(</span><span class="s">&#39;foo&#39;</span> <span class="ow">in</span> <span class="n">greet</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>Use <tt class="docutils literal"><span class="pre">goal</span> <span class="pre">test</span></tt> to run the tests:</p>
<div class="highlight-python"><div class="highlight"><pre>$ ./pants goal test tests/python/example_test/hello/greet

13:29:28 00:00 [main]
               (To run a reporting server: ./pants goal server)
13:29:28 00:00   [bootstrap]
13:29:28 00:00   [setup]
13:29:28 00:00     [parse]
   ...
13:29:29 00:01   [test]
13:29:29 00:01     [pytest]
13:29:29 00:01       [run]
                     ============== test session starts ===============
                     platform darwin -- Python 2.6.8 -- py-1.4.20 -- pytest-2.5.2
                     plugins: cov, timeout
                     collected 1 items

                     tests/python/example_test/hello/greet/greet.py .

                     ============ 1 passed in 0.02 seconds ============

13:30:18 00:50     [junit]
13:30:18 00:50     [specs]
               SUCCESS
$
</pre></div>
</div>
</div>
<div class="section" id="handling-python-requirement">
<h2>Handling <tt class="docutils literal"><span class="pre">python_requirement</span></tt><a class="headerlink" href="#handling-python-requirement" title="Permalink to this headline">¶</a></h2>
<p><tt class="docutils literal"><span class="pre">BUILD</span></tt> files specify outside Python dependencies via
<a class="reference internal" href="build_dictionary.html#bdict-python-requirement-library"><em>python_requirement_library</em></a>
targets wrapping
<a class="reference internal" href="build_dictionary.html#bdict-python-requirement"><em>python_requirement</em></a>s.</p>
<p>Pants handles these dependencies for you.
It never installs anything globally.
Instead, it builds the dependencies, caches them in <cite>.pants.d</cite>,
and assembles them <em>a la carte</em> into an execution environment.</p>
</div>
<div class="section" id="pex-contents">
<h2>PEX Contents<a class="headerlink" href="#pex-contents" title="Permalink to this headline">¶</a></h2>
<p>To build a PEX, invoke <tt class="docutils literal"><span class="pre">./pants</span> <span class="pre">goal</span> <span class="pre">binary</span></tt> on a <tt class="docutils literal"><span class="pre">python_binary</span></tt> target:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>./pants goal binary src/python/example/hello/main
  ...
                 SUCCESS
<span class="nv">$ </span>./dist/main.pex
  Hello, world!
</pre></div>
</div>
<p>Though the binary itself specifies just one dependency, the transitive
closure of hello/main&#8217;s dependencies pulled in
hello/greet and, in turn, hello/greet&#8217;s dependencies.
Pants bundles up the closed set of all dependencies into
into the PEX.</p>
</div>
<div class="section" id="repl-and-environment-manipulation-with-pants-py">
<h2>REPL and environment manipulation with <cite>pants py</cite><a class="headerlink" href="#repl-and-environment-manipulation-with-pants-py" title="Permalink to this headline">¶</a></h2>
<p>Pants has a &#8220;py&#8221; command that lets you manipulate the environments
described by <cite>python_binary</cite> and <cite>python_library</cite> targets, such as drop into
an interpreter with the environment set up for you.
Note that&#8217;s &#8220;py&#8221;, <strong>not</strong> &#8220;goal py&#8221;.</p>
<p><tt class="docutils literal"><span class="pre">pants</span> <span class="pre">py</span> <span class="pre">&lt;target&gt;</span></tt>...</p>
<ol class="arabic simple">
<li>For a <tt class="docutils literal"><span class="pre">python_binary</span></tt> target, builds the environment and executes the
target.</li>
<li>For <cite>python_library</cite> targets, builds the environment that is the transitive
closure of all targets and drops into an interpreter.</li>
<li>For a combination of <cite>python_binary</cite> and <cite>python_library</cite> targets, builds
the transitive closure of all targets and executes the first binary target.</li>
</ol>
<p>Let&#8217;s drop into our library target <tt class="docutils literal"><span class="pre">src/python/example/hello/greet</span></tt>
with verbosity turn on to see what&#8217;s going on in the background:</p>
<div class="highlight-python"><div class="highlight"><pre>$ PANTS_VERBOSE=1 ./pants py src/python/example/hello/greet
/Users/lhosken/workspace/pants src/python/example/hello/greet
Building chroot for [PythonLibrary(BuildFileAddress(/Users/lhosken/workspace/pants/src/python/example/hello/greet/BUILD, greet))]:
  Dumping library: PythonLibrary(BuildFileAddress(/Users/lhosken/workspace/pants/src/python/example/hello/greet/BUILD, greet))
  Dumping requirement: ansicolors==1.0.2
  Dumping distribution: .../ansicolors-1.0.2-py2-none-any.whl
Python 2.6.8 (unknown, Mar  9 2014, 22:16:00)
[GCC 4.2.1 Compatible Apple LLVM 5.0 (clang-500.0.68)] on darwin
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
(InteractiveConsole)
&gt;&gt;&gt;
</pre></div>
</div>
<p>Pants loads <tt class="docutils literal"><span class="pre">ansicolors</span></tt> (greet&#8217;s 3rdparty dependency). It would have fetched
this dependency over the network if necessary. (It wasn&#8217;t necessary to download
<tt class="docutils literal"><span class="pre">ansicolors</span></tt>; Pants already fetched it while &#8220;bootstrapping&#8221; itself.)</p>
<p>You can convince yourself that the environment contains all the dependencies
by inspecting <cite>sys.path</cite> and importing libraries as you desire:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">example.hello.greet.greet</span> <span class="kn">import</span> <span class="n">greet</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">greet</span><span class="p">(</span><span class="s">&quot;escape codes&quot;</span><span class="p">)</span>
<span class="go">u&#39;\x1b[32mHello, escape codes!\x1b[0m&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">colors</span> <span class="kn">import</span> <span class="n">red</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">red</span><span class="p">(</span><span class="s">&quot;other escape codes&quot;</span><span class="p">)</span>
<span class="go">&#39;\x1b[31mother escape codes\x1b[0m&#39;</span>
</pre></div>
</div>
<p><strong>Dependencies built by Pants are never installed globally</strong>.
These dependencies only exist for the duration of the Python
interpreter forked by Pants.</p>
<div class="section" id="pants-py-pex">
<h3><tt class="docutils literal"><span class="pre">pants</span> <span class="pre">py</span> <span class="pre">--pex</span></tt><a class="headerlink" href="#pants-py-pex" title="Permalink to this headline">¶</a></h3>
<p>You can use <tt class="docutils literal"><span class="pre">./pants</span> <span class="pre">py</span> <span class="pre">--pex</span></tt> to build a PEX
file from <tt class="docutils literal"><span class="pre">python_library</span></tt> targets with no
<cite>python_binary</cite> target.  Since there is no entry point
specified, the resulting <tt class="docutils literal"><span class="pre">.pex</span></tt> file just behaves like a Python interpreter,
but with the sys.path bootstrapped for you:</p>
<div class="highlight-python"><div class="highlight"><pre>$ ./pants py --pex src/python/example/hello/greet
/Users/lhosken/workspace/pants src/python/example/hello/greet
Wrote /Users/lhosken/workspace/pants/dist/src.python.example.hello.greet.greet.pex
$
</pre></div>
</div>
<p>If you run <tt class="docutils literal"><span class="pre">dist/src.python.example.hello.greet.greet.pex</span></tt>, since it has
no entry point, it drops you into an interpreter:</p>
<div class="highlight-python"><div class="highlight"><pre>$ ./dist/src.python.example.hello.greet.greet.pex
Python 2.6.8 (unknown, Mar  9 2014, 22:16:00)
[GCC 4.2.1 Compatible Apple LLVM 5.0 (clang-500.0.68)] on darwin
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
(InteractiveConsole)
&gt;&gt;&gt; from example.hello.greet.greet import greet
&gt;&gt;&gt; greet(&quot;pex&quot;)
u&#39;\x1b[32mHello, pex!\x1b[0m&#39;
&gt;&gt;&gt;
</pre></div>
</div>
<p>It&#8217;s like a single-file lightweight alternative to a virtualenv.
We can even use it to run our <cite>main.py</cite> application:</p>
<div class="highlight-python"><div class="highlight"><pre>$ dist/src.python.example.hello.greet.greet.pex src/python/example/hello/main/main.py
Hello, world!
$
</pre></div>
</div>
<p>This can be an incredibly powerful and lightweight way to manage and deploy
virtual environments without using <cite>virtualenv</cite>.</p>
</div>
</div>
<div class="section" id="python-binary-entry-point">
<h2>python_binary entry_point<a class="headerlink" href="#python-binary-entry-point" title="Permalink to this headline">¶</a></h2>
<p>An advanced feature of <cite>python_binary</cite> targets, you may in addition specify
direct entry points into PEX files rather than a source file.  For example,
if we wanted to build an a la carte <cite>fab</cite> wrapper for fabric:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">python_binary</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;fab&quot;</span><span class="p">,</span>
  <span class="n">entry_point</span> <span class="o">=</span> <span class="s">&quot;fabric.main:main&quot;</span><span class="p">,</span>
  <span class="n">dependencies</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">pants</span><span class="p">(</span><span class="s">&quot;3rdparty/python:fabric&quot;</span><span class="p">),</span>
  <span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
<p>We build:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>./pants src/python/fabwrap:fab
Build operating on targets: OrderedSet<span class="o">([</span>PythonBinary<span class="o">(</span>src/python/fabwrap/BUILD:fab<span class="o">)])</span>
Building PythonBinary PythonBinary<span class="o">(</span>src/python/fabwrap/BUILD:fab<span class="o">)</span>:
Wrote /private/tmp/wickman-pants/dist/fab.pex
</pre></div>
</div>
<p>And now <cite>dist/fab.pex</cite> behaves like a standalone <cite>fab</cite> binary:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>dist/fab.pex -h
Usage: fab <span class="o">[</span>options<span class="o">]</span> &lt;<span class="nb">command</span>&gt;<span class="o">[</span>:arg1,arg2<span class="o">=</span>val2,host<span class="o">=</span>foo,hosts<span class="o">=</span><span class="s1">&#39;h1;h2&#39;</span>,...<span class="o">]</span> ...

Options:
  -h, --help            show this <span class="nb">help </span>message and <span class="nb">exit</span>
  -d NAME, --display<span class="o">=</span>NAME
                        print detailed info about <span class="nb">command </span>NAME
  -F FORMAT, --list-format<span class="o">=</span>FORMAT
                        formats --list, choices: short, normal, nested
  -l, --list            print list of possible commands and <span class="nb">exit</span>
  --set<span class="o">=</span><span class="nv">KEY</span><span class="o">=</span>VALUE,...   comma separated <span class="nv">KEY</span><span class="o">=</span>VALUE pairs to <span class="nb">set </span>Fab env vars
  --shortlist           <span class="nb">alias </span><span class="k">for</span> -F short --list
  -V, --version         show program<span class="s1">&#39;s version number and exit</span>
<span class="s1">  -a, --no_agent        don&#39;</span>t use the running SSH agent
  -A, --forward-agent   forward <span class="nb">local </span>agent to remote end
  --abort-on-prompts    abort instead of prompting <span class="o">(</span><span class="k">for </span>password, host, etc<span class="o">)</span>
  ...
</pre></div>
</div>
</div>
<div class="section" id="more-about-python-tests">
<h2>More About Python Tests<a class="headerlink" href="#more-about-python-tests" title="Permalink to this headline">¶</a></h2>
<p>Pants runs Python tests with <tt class="docutils literal"><span class="pre">pytest</span></tt>. You can pass CLI options to <tt class="docutils literal"><span class="pre">pytest</span></tt>
with <tt class="docutils literal"><span class="pre">--test-pytest-options</span></tt>. For example, to only run tests whose names
match the pattern *foo*, you could run</p>
<div class="highlight-python"><div class="highlight"><pre>$ ./pants goal test tests/python/example_test/hello/greet --test-pytest-options=&#39;-k foo&#39;
...
                 ============== test session starts ===============
                 platform darwin -- Python 2.6.8 -- py-1.4.20 -- pytest-2.5.2
                 plugins: cov, timeout
                 collected 1 items

                 ========= 1 tests deselected by &#39;-kfoo&#39; ==========
                 ========== 1 deselected in 0.01 seconds ==========

13:34:28 00:02     [junit]
13:34:28 00:02     [specs]
           SUCCESS
</pre></div>
</div>
<div class="section" id="code-coverage">
<h3>Code Coverage<a class="headerlink" href="#code-coverage" title="Permalink to this headline">¶</a></h3>
<p>To get code coverage data, set the <cite>PANTS_PY_COVERAGE</cite> environment variable:</p>
<div class="highlight-python"><div class="highlight"><pre>$ PANTS_PY_COVERAGE=1  ./pants tests/python/example_test/hello/greet:greet
</pre></div>
</div>
</div>
<div class="section" id="interactive-debugging-on-test-failure">
<h3>Interactive Debugging on Test Failure<a class="headerlink" href="#interactive-debugging-on-test-failure" title="Permalink to this headline">¶</a></h3>
<p>You can invoke the Python debugger on a test failure by
leaving out the <tt class="docutils literal"><span class="pre">goal</span> <span class="pre">test</span></tt> and passing <tt class="docutils literal"><span class="pre">--pdb</span></tt>.
This can be useful for
inspecting the state of objects especially if you are mocking interfaces.</p>
</div>
<div class="section" id="other-testing-frameworks">
<h3>Other Testing Frameworks<a class="headerlink" href="#other-testing-frameworks" title="Permalink to this headline">¶</a></h3>
<p>Although most tests can run under <cite>pytest</cite>, if you need to use a different testing framework, you
can. Set the <cite>entry_point</cite> keyword argument when calling python_tests:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">python_tests</span><span class="p">(</span>
  <span class="n">name</span> <span class="o">=</span> <span class="s">&#39;tests&#39;</span><span class="p">,</span>
  <span class="n">sources</span> <span class="o">=</span> <span class="p">[],</span>
  <span class="n">dependencies</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">pants</span><span class="p">(</span><span class="s">&#39;src/python/twitter/infraops/supplybird:supplybird-lib&#39;</span><span class="p">),</span>
    <span class="n">pants</span><span class="p">(</span><span class="s">&#39;3rdparty/python:mock&#39;</span><span class="p">)</span>
  <span class="p">],</span>
  <span class="n">entry_point</span><span class="o">=</span><span class="s">&quot;twitter.infraops.supplybird.core.run_tests&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The <cite>entry_point</cite> exits with a non-zero status if there are test failures.</p>
<p>Keep in mind, however, that much of the above documentation assumes you are using <cite>pytest</cite>.</p>
</div>
</div>
<div class="section" id="manipulating-pex-behavior-with-environment-variables">
<h2>Manipulating PEX behavior with environment variables<a class="headerlink" href="#manipulating-pex-behavior-with-environment-variables" title="Permalink to this headline">¶</a></h2>
<p>You can alter a PEX file&#8217;s behavior during invocation
by setting some environment variables.</p>
<div class="section" id="pex-interpreter-1">
<h3>PEX_INTERPRETER=1<a class="headerlink" href="#pex-interpreter-1" title="Permalink to this headline">¶</a></h3>
<p>If you have a PEX file with a prescribed executable source or <tt class="docutils literal"><span class="pre">entry_point</span></tt>,
you can still drop into an interpreter with the environment bootstrapped.
Set <cite>PEX_INTERPRETER=1</cite> in your environment, and the PEX bootstrapper
skips any execution and instead launches an interactive interpreter session.</p>
</div>
<div class="section" id="pex-verbose-1">
<h3>PEX_VERBOSE=1<a class="headerlink" href="#pex-verbose-1" title="Permalink to this headline">¶</a></h3>
<p>If your environment is failing to bootstrap or simply bootstrapping very slowly, it can be useful to
set <cite>PEX_VERBOSE=1</cite> in your environment to get debugging output printed to the console.  Debugging output
includes:</p>
<ol class="arabic simple">
<li>Fetched dependencies</li>
<li>Built dependencies</li>
<li>Activated dependencies</li>
<li>Packages scrubbed out of <cite>sys.path</cite></li>
<li>The <cite>sys.path</cite> used to launch the interpreter</li>
</ol>
</div>
<div class="section" id="pex-module-entry-point">
<h3>PEX_MODULE=entry_point<a class="headerlink" href="#pex-module-entry-point" title="Permalink to this headline">¶</a></h3>
<p>If you have a PEX file without a prescribed entry point, or want to change
the <tt class="docutils literal"><span class="pre">entry_point</span></tt> for a single invocation, you can set
<tt class="docutils literal"><span class="pre">PEX_MODULE=entry_point</span></tt> using the same format as described in the
<a class="reference internal" href="build_dictionary.html#bdict-python-binary"><em>python_binary</em></a> Pants target.</p>
<p>This can be useful for bundling up some packages together and
using that single file to execute scripts from each of them.</p>
<p>Another common pattern is to link <cite>pytest</cite> into your PEX file, and run
<tt class="docutils literal"><span class="pre">PEX_MODULE=pytest</span> <span class="pre">my_pex.pex</span> <span class="pre">tests/*.py</span></tt> to run your test suite in its
isolated environment.</p>
</div>
<div class="section" id="pex-coverage">
<h3>PEX_COVERAGE<a class="headerlink" href="#pex-coverage" title="Permalink to this headline">¶</a></h3>
<p>There is nascent support for performing code coverage within PEX files by
setting <cite>PEX_COVERAGE=&lt;suffix&gt;</cite>.  By default the coverage files will be written
into the current working directory with the file pattern <cite>.coverage.&lt;suffix&gt;</cite>.  This
requires that the <cite>coverage</cite> Python module has been linked into your PEX.</p>
<p>You can then combine the coverage files by running <cite>PEX_MODULE=coverage
my_pex.pex .coverage.suffix*</cite> and run a report using <cite>PEX_MODULE=coverage
my_pex.pex report</cite>.  Since PEX files are just zip files, <cite>coverage</cite> is able
to understand and extract source and line numbers from them in order to
produce coverage reports.</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="pex_design.html">PEX Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_old.html">Using Pants for Python development, 2014 and Earlier</a></li>
</ul>
</div>
</div>
</div>
</div>


          <footer>
  
    <div class="rst-footer-buttons">
      
        <a href="pex_design.html" class="btn btn-neutral float-right" title="PEX Design"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="from_maven.html" class="btn btn-neutral" title="Pants for Maven Experts"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <p>
      &copy; Copyright 2014, Pants project contributors.
  </p>

  <a href="https://www.github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="http://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  

</body>
</html>