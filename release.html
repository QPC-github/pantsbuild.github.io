<!DOCTYPE html>
<html lang="en">

<!--
  Copyright 2014 Pants project contributors (see CONTRIBUTORS.md).
  Licensed under the Apache License, Version 2.0 (see LICENSE).
-->

<head>
  <meta charset="utf-8" />
  <title>Release Process</title>
  <link rel="stylesheet" href="s.css">
  <script src="s.js"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="shortcut icon" href="logo.ico">
  <!-- In case this is a "test publish", tell search engines where real version lives: -->
  <link rel="canonical" href="https://pantsbuild.github.io/release.html">
</head>

<body>

<div id="navtoggler">
&#x25c4; <!-- triangle -->
</div>
<div class="mainflow">
<nav class="breadcrumbs">
<ul>
<li><a href="index.html">Pants Build</a>
<li><a href="dev.html">Pants Developer Center</a>
<li><a href="release.html">Release Process</a>
</ul>
</nav>

<nav class="pagetoc">
<ul>
<li class="toc-h1"><a href="#prerequisites">Prerequisites</a></li>
<li class="toc-h1"><a href="#prepare-release">Prepare Release</a></li>
<li class="toc-h1"><a href="#dry-run-optional">Dry Run (Optional)</a></li>
<li class="toc-h1"><a href="#publish-to-pypi">Publish to PyPi</a></li>
<li class="toc-h1"><a href="#announce">Announce</a></li>
<li class="toc-h1"><a href="#owners">Owners</a></li>
</ul>
</nav>

<!-- main content start -->
<!-- generated by pants! -->
<style>
.codehilite .hll { background-color: #ffffcc }
.codehilite  { background: #f0f0f0; }
.codehilite .c { color: #60a0b0; font-style: italic } /* Comment */
.codehilite .err { border: 1px solid #FF0000 } /* Error */
.codehilite .k { color: #007020; font-weight: bold } /* Keyword */
.codehilite .o { color: #666666 } /* Operator */
.codehilite .cm { color: #60a0b0; font-style: italic } /* Comment.Multiline */
.codehilite .cp { color: #007020 } /* Comment.Preproc */
.codehilite .c1 { color: #60a0b0; font-style: italic } /* Comment.Single */
.codehilite .cs { color: #60a0b0; background-color: #fff0f0 } /* Comment.Special */
.codehilite .gd { color: #A00000 } /* Generic.Deleted */
.codehilite .ge { font-style: italic } /* Generic.Emph */
.codehilite .gr { color: #FF0000 } /* Generic.Error */
.codehilite .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.codehilite .gi { color: #00A000 } /* Generic.Inserted */
.codehilite .go { color: #808080 } /* Generic.Output */
.codehilite .gp { color: #c65d09; font-weight: bold } /* Generic.Prompt */
.codehilite .gs { font-weight: bold } /* Generic.Strong */
.codehilite .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.codehilite .gt { color: #0040D0 } /* Generic.Traceback */
.codehilite .kc { color: #007020; font-weight: bold } /* Keyword.Constant */
.codehilite .kd { color: #007020; font-weight: bold } /* Keyword.Declaration */
.codehilite .kn { color: #007020; font-weight: bold } /* Keyword.Namespace */
.codehilite .kp { color: #007020 } /* Keyword.Pseudo */
.codehilite .kr { color: #007020; font-weight: bold } /* Keyword.Reserved */
.codehilite .kt { color: #902000 } /* Keyword.Type */
.codehilite .m { color: #40a070 } /* Literal.Number */
.codehilite .s { color: #4070a0 } /* Literal.String */
.codehilite .na { color: #4070a0 } /* Name.Attribute */
.codehilite .nb { color: #007020 } /* Name.Builtin */
.codehilite .nc { color: #0e84b5; font-weight: bold } /* Name.Class */
.codehilite .no { color: #60add5 } /* Name.Constant */
.codehilite .nd { color: #555555; font-weight: bold } /* Name.Decorator */
.codehilite .ni { color: #d55537; font-weight: bold } /* Name.Entity */
.codehilite .ne { color: #007020 } /* Name.Exception */
.codehilite .nf { color: #06287e } /* Name.Function */
.codehilite .nl { color: #002070; font-weight: bold } /* Name.Label */
.codehilite .nn { color: #0e84b5; font-weight: bold } /* Name.Namespace */
.codehilite .nt { color: #062873; font-weight: bold } /* Name.Tag */
.codehilite .nv { color: #bb60d5 } /* Name.Variable */
.codehilite .ow { color: #007020; font-weight: bold } /* Operator.Word */
.codehilite .w { color: #bbbbbb } /* Text.Whitespace */
.codehilite .mf { color: #40a070 } /* Literal.Number.Float */
.codehilite .mh { color: #40a070 } /* Literal.Number.Hex */
.codehilite .mi { color: #40a070 } /* Literal.Number.Integer */
.codehilite .mo { color: #40a070 } /* Literal.Number.Oct */
.codehilite .sb { color: #4070a0 } /* Literal.String.Backtick */
.codehilite .sc { color: #4070a0 } /* Literal.String.Char */
.codehilite .sd { color: #4070a0; font-style: italic } /* Literal.String.Doc */
.codehilite .s2 { color: #4070a0 } /* Literal.String.Double */
.codehilite .se { color: #4070a0; font-weight: bold } /* Literal.String.Escape */
.codehilite .sh { color: #4070a0 } /* Literal.String.Heredoc */
.codehilite .si { color: #70a0d0; font-style: italic } /* Literal.String.Interpol */
.codehilite .sx { color: #c65d09 } /* Literal.String.Other */
.codehilite .sr { color: #235388 } /* Literal.String.Regex */
.codehilite .s1 { color: #4070a0 } /* Literal.String.Single */
.codehilite .ss { color: #517918 } /* Literal.String.Symbol */
.codehilite .bp { color: #007020 } /* Name.Builtin.Pseudo */
.codehilite .vc { color: #bb60d5 } /* Name.Variable.Class */
.codehilite .vg { color: #bb60d5 } /* Name.Variable.Global */
.codehilite .vi { color: #bb60d5 } /* Name.Variable.Instance */
.codehilite .il { color: #40a070 } /* Literal.Number.Integer.Long */
</style>

<table class="h-plus-pilcrow">
<tbody>
<tr>
<td class="h-plus-pilcrow-holder"><h1 id="release-process">Release Process</h1></td>
<td><div class="pilcrow-div">
<a class="pilcrow-link" href="#release-process">¶</a>
</div></td>
</tr>
</tbody>
</table>

<p>This page describes how to make a versioned release of Pants and and
other related packages to PyPi.  If you need to release pants jvm tools
(jars), see the
<a href="release_jvm.html">JVM Artifact Release Process</a>
page.</p>
<p>At a high level, releasing pants involves:</p>
<ul>
<li>Deciding what/when to release. At present this is ad-hoc, typically
    when a change has been made and the author wants to use a version
    incorporating that change. Things are likely to remain this way pre
    1.0.0.</li>
<li>Preparing the release.</li>
<li>(optional) Perform a release dry run.</li>
<li>Publishing the release to PyPi.</li>
<li>Announce the release on pants-devel.</li>
</ul>

<table class="h-plus-pilcrow">
<tbody>
<tr>
<td class="h-plus-pilcrow-holder"><h2 id="prerequisites">Prerequisites</h2></td>
<td><div class="pilcrow-div">
<a class="pilcrow-link" href="#prerequisites">¶</a>
</div></td>
</tr>
</tbody>
</table>

<p>There are several things that require one-time setup in order to be
able to perform pants releases.  The release script checks that all
these steps have been performed in one way or another, but you might
like to go through this list ahead of time rather than have the release
script fail:</p>
<ul>
<li>
<p>Create a pgp signing key if you don't already have one.</p>
<p>You might use the gpg implemntation of pgp and start here:
https://www.gnupg.org/gph/en/manual/c14.html</p>
</li>
<li>
<p>Configure git to use your pgp key for signing release tags.</p>
<p>A description of the configuration can be found here:
https://git-scm.com/book/tr/v2/Git-Tools-Signing-Your-Work#GPG-Introduction</p>
</li>
<li>
<p>Create a pypi account if you don't already have one.</p>
<p>You can register here: https://pypi.python.org/pypi?%3Aaction=register_form
Don't forget to include your pgp key id even though pypi considers
this step optional.</p>
</li>
<li>
<p>Get your pypi account added as an <code>owner</code> for all pantsbuild.pants packages.</p>
<p>You can ask any one of the <a href="#owners">Owners</a> listed below to do this.
Once this is done and you've performed your 1st release, add yourself to
the <a href="#owners">Owners</a> section below.</p>
</li>
<li>
<p>Configure your pypi credentials locally in <code>~/.pypirc</code></p>
<p>For some versions of python it's necessary to use both a <code>server-login</code> and
<code>pypi</code> section containing the same info. This will do it:</p>
<div class="codehilite"><pre>cat <span class="s">&lt;&lt; EOF &gt; ~/.pypirc &amp;&amp; chmod 600 ~/.pypirc</span>
<span class="s">[pypi]</span>
<span class="s">username: &lt;fill me in&gt;</span>
<span class="s">password: &lt;fill me in&gt;</span>

<span class="s">[server-login]</span>
<span class="s">username: &lt;fill me in&gt;</span>
<span class="s">password: &lt;fill me in&gt;</span>
<span class="s">EOF</span>
</pre></div>
</li>
</ul>

<table class="h-plus-pilcrow">
<tbody>
<tr>
<td class="h-plus-pilcrow-holder"><h2 id="prepare-release">Prepare Release</h2></td>
<td><div class="pilcrow-div">
<a class="pilcrow-link" href="#prepare-release">¶</a>
</div></td>
</tr>
</tbody>
</table>

<p>Pants and the common libraries are published to the <a href="https://pypi.python.org/pypi">Python Package
Index</a> per the Python community
convention.</p>
<p>Although the build and publish are automated, the version bumping and
CHANGELOG and CONTRIBUTORS management are not.</p>
<p>You'll need to edit the version number in
<a href="https://github.com/pantsbuild/pants/tree/master/src/python/pants/version.py">src/python/pants/version.py</a>
and add an entry in the CHANGELOG at
<a href="https://github.com/pantsbuild/pants/tree/master/src/python/pants/CHANGELOG.rst">src/python/pants/CHANGELOG.rst</a>.
You can run <code>./build-support/bin/release-changelog-helper.sh</code> to get a
head-start on the CHANGELOG entry.</p>
<p>To bring the CONTRIBUTORS roster in
<a href="https://github.com/pantsbuild/pants/tree/master/CONTRIBUTORS.md">CONTRIBUTORS.md</a>
up to date you just run <code>build-support/bin/contributors.sh</code>.</p>
<p>Finally, send these three changes out for review.</p>

<table class="h-plus-pilcrow">
<tbody>
<tr>
<td class="h-plus-pilcrow-holder"><h2 id="dry-run-optional">Dry Run (Optional)</h2></td>
<td><div class="pilcrow-div">
<a class="pilcrow-link" href="#dry-run-optional">¶</a>
</div></td>
</tr>
</tbody>
</table>

<p>A dry run is not strictly required since CI includes one, but you might
like to try one anyway; if so, releases should only be published from
master, so get on master and ensure your version number commit is present.
After confirming this, run.</p>
<div class="codehilite"><pre><span class="nv">$ </span>./build-support/bin/release.sh -n
</pre></div>
<p>This will perform a dry run local build of the pantsbuild.pants sdist
and other related package sdists, install them in a virtualenv and then
smoke test basic operations.</p>
<p>Note that in addition to CI checking dry runs work, the release publish
flow also performs a mandatory dry run so executing a dry run separately
is not required.</p>

<table class="h-plus-pilcrow">
<tbody>
<tr>
<td class="h-plus-pilcrow-holder"><h2 id="publish-to-pypi">Publish to PyPi</h2></td>
<td><div class="pilcrow-div">
<a class="pilcrow-link" href="#publish-to-pypi">¶</a>
</div></td>
</tr>
</tbody>
</table>

<p>Now that we've smoke-tested this release, we can publish to PyPi:</p>
<div class="codehilite"><pre><span class="nv">$ </span>./build-support/bin/release.sh
</pre></div>
<p>This also performs a dry run and then proceeds to upload the smoke
tested sdists to PyPi.</p>

<table class="h-plus-pilcrow">
<tbody>
<tr>
<td class="h-plus-pilcrow-holder"><h2 id="announce">Announce</h2></td>
<td><div class="pilcrow-div">
<a class="pilcrow-link" href="#announce">¶</a>
</div></td>
</tr>
</tbody>
</table>

<p>Check PyPi to ensure everything looks good. The <a href="https://pypi.python.org/pypi/pantsbuild.pants">pantsbuild.pants
package index page</a>
should display the package version you just uploaded. The same check
applies to other related package PyPi pages.</p>
<p>To test the packages are installable:</p>
<div class="codehilite"><pre><span class="nv">$ </span>./build-support/bin/release.sh -t
</pre></div>
<p>This will attempt to install the just-published packages from pypi and
then smoke test them.</p>
<p>Finally, announce the release to pants-devel.  You can get a
contributor list for the email by running the following where <code>&lt;tag&gt;</code>
if the tag for the prior release (eg: release_0.0.33)</p>
<div class="codehilite"><pre><span class="nv">$ </span>./build-support/bin/contributors.sh -s &lt;tag&gt;
</pre></div>

<table class="h-plus-pilcrow">
<tbody>
<tr>
<td class="h-plus-pilcrow-holder"><h2 id="owners">Owners</h2></td>
<td><div class="pilcrow-div">
<a class="pilcrow-link" href="#owners">¶</a>
</div></td>
</tr>
</tbody>
</table>

<p>The following folks are set up to publish to pypi for
pantsbuild.pants sdists:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Email</th>
<th>PYPI Usename</th>
</tr>
</thead>
<tbody>
<tr>
<td>John Sirois</td>
<td>john.sirois@gmail.com</td>
<td>john.sirois</td>
</tr>
<tr>
<td>Benjy Weinberger</td>
<td>benjyw@gmail.com</td>
<td>benjyw</td>
</tr>
<tr>
<td>Eric Ayers</td>
<td>zundel@squareup.com</td>
<td>ericzundel</td>
</tr>
<tr>
<td>Ity Kaul</td>
<td>itykaul@gmail.com</td>
<td>ity</td>
</tr>
<tr>
<td>Stu Hood</td>
<td>stuhood@gmail.com</td>
<td>stuhood</td>
</tr>
<tr>
<td>Patrick Lawson</td>
<td>patrick.a.lawson@gmail.com</td>
<td>Patrick.Lawson</td>
</tr>
</tbody>
</table>
<p>And the current list of packages that these folks can release can
be obtained via:</p>
<div class="codehilite"><pre><span class="nv">$ </span>./build-support/bin/release.sh -l
</pre></div>
<p>Right now that's:</p>
<ul>
<li>pantsbuild.pants</li>
<li>pantsbuild.pants.backend.android</li>
<li>pantsbuild.pants.contrib.buildgen</li>
<li>pantsbuild.pants.contrib.scrooge</li>
<li>pantsbuild.pants.contrib.spindle</li>
<li>pantsbuild.pants.testinfra</li>
</ul>
<p>You can run the following to get a full ownership roster for each
package :</p>
<div class="codehilite"><pre><span class="nv">$ </span>./build-support/bin/release.sh -o
</pre></div>

<!-- main content end -->

<div class="generated">
Generated by <a href="http://pantsbuild.github.io/docs.html">publish_docs</a>
from dist/markdown/html/src/python/pants/docs/release.html 2015-08-26T14:06:30.905161
</div>

</div> <!-- end of mainflow -->

<nav class="bignav">
  <div class="bignav-logo">
    <a href="index.html">
      <img src="logo.ico" alt="[pantsbuild logo]">
    </a>
  </div>
  <form class="search" action="https://www.google.com/search">
  <input name="as_q" class="query" placeholder="Search">
  <input name="as_sitesearch" value="pantsbuild.github.io" type="hidden">
  </form>

<div class="site-toc">
<ul>
<li class="toc-h1 ">
<a href="first_concepts.html">Pants Conceptual Overview</a>
</li>
<li class="toc-h1 ">
<a href="first_tutorial.html">First Tutorial</a>
</li>
<li class="toc-h1 ">
<a href="target_addresses.html">Target Addresses</a>
</li>
<li class="toc-h1 ">
<a href="JVMProjects.html">JVM Projects with Pants</a>
</li>
<li class="toc-h2 ">
<a href="3rdparty_jvm.html">JVM 3rdparty Pattern</a>
</li>
<li class="toc-h2 ">
<a href="scala.html">Scala Projects with Pants</a>
</li>
<li class="toc-h2 ">
<a href="from_maven.html">Pants for Maven Experts</a>
</li>
<li class="toc-h1 ">
<a href="python-readme.html">Python Projects with Pants</a>
</li>
<li class="toc-h2 ">
<a href="3rdparty_py.html">Python 3rdparty Pattern</a>
</li>
<li class="toc-h2 ">
<a href="pex_design.html">PEX Design</a>
</li>
<li class="toc-h1 ">
<a href="page.html">README Files and Markdown</a>
</li>
<li class="toc-h1 ">
<a href="build_files.html">BUILD files</a>
</li>
<li class="toc-h1 ">
<a href="invoking.html">Invoking Pants Build</a>
</li>
<li class="toc-h1 ">
<a href="tshoot.html">Troubleshooting</a>
</li>
<li class="toc-h1 ">
<a href="3rdparty.html">Third-Party Dependencies</a>
</li>
<li class="toc-h2 ">
<a href="3rdparty_jvm.html">JVM 3rdparty Pattern</a>
</li>
<li class="toc-h2 ">
<a href="3rdparty_py.html">Python 3rdparty Pattern</a>
</li>
<li class="toc-h1 ">
<a href="ThriftDeps.html">Using Pants with Thrift Dependencies</a>
</li>
<li class="toc-h1 ">
<a href="publish.html">Publishing Artifacts</a>
</li>
<li class="toc-h1 ">
<a href="with_emacs.html">Emacs With Pants</a>
</li>
<li class="toc-h1 ">
<a href="with_intellij.html">Using Pants with IntelliJ IDEA</a>
</li>
<li class="toc-h1 ">
<a href="install.html">Installing Pants</a>
</li>
<li class="toc-h1 ">
<a href="setup_repo.html">Set up Your Source Tree for Pants</a>
</li>
<li class="toc-h1 ">
<a href="build_dictionary.html">Pants BUILD Dictionary</a>
</li>
<li class="toc-h1 ">
<a href="options_reference.html">Pants Options Reference</a>
</li>
<li class="toc-h1 ">
<a href="changelog.html">RELEASE HISTORY</a>
</li>
<li class="toc-h1 ">
<a href="export.html">Export Format</a>
</li>
<li class="toc-h1 ">
<a href="dev.html">Pants Developer Center</a>
</li>
<li class="toc-h2 ">
<a href="howto_contribute.html">Pants Contributors Guide</a>
</li>
<li class="toc-h2 ">
<a href="howto_ask.html">How To Ask</a>
</li>
<li class="toc-h2 ">
<a href="howto_develop.html">Pants Developers Guide</a>
</li>
<li class="toc-h2 ">
<a href="dev_tasks.html">Task Developer's Guide</a>
</li>
<li class="toc-h3 ">
<a href="dev_tasks_publish_extras.html">Develop a Task to Publish &quot;Extra&quot; Artifacts</a>
</li>
<li class="toc-h2 ">
<a href="howto_plugin.html">Developing a Pants Plugin</a>
</li>
<li class="toc-h2 ">
<a href="intellij.html">Pants Development with IntelliJ IDEA</a>
</li>
<li class="toc-h2 ">
<a href="internals.html">Pants Internals</a>
</li>
<li class="toc-h2 toc-here">
Release Process
</li>
<li class="toc-h3 ">
<a href="release_jvm.html">JVM Artifact Release Process</a>
</li>
<li class="toc-h2 ">
<a href="docs.html">About the documentation</a>
</li>
<li class="toc-h2 ">
<a href="credits.html">Credits</a>
</li>
</ul>
</div>
</nav>

<div class="ci-status">
<a href="https://travis-ci.org/pantsbuild/pants">
<img src="https://travis-ci.org/pantsbuild/pants.png?branch=master"
     alt="Are the tests passing?" title="Are the tests passing?"></a><br>
<a href="https://coveralls.io/r/pantsbuild/pants?branch=master">
<img src="https://coveralls.io/repos/pantsbuild/pants/badge.png?branch=master"
     alt="Test Coverage Status" title="Test Coverage Status"></a>
</div>

</body>
</html>
