<!DOCTYPE html>
<html lang="en">

<!--
  Copyright 2014 Pants project contributors (see CONTRIBUTORS.md).
  Licensed under the Apache License, Version 2.0 (see LICENSE).
-->

<head>
  <meta charset="utf-8" />
  <title>Set up Your Source Tree for Pants</title>
  <link rel="stylesheet" href="s.css">
  <script src="s.js"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="shortcut icon" href="logo.ico">
  <!-- In case this is a "test publish", tell search engines where real version lives: -->
  <link rel="canonical" href="https://pantsbuild.github.io/setup_repo.html">
</head>

<body>

<div id="navtoggler">
&#x25c4; <!-- triangle -->
</div>
<div class="mainflow">
<nav class="breadcrumbs">
<ul>
<li><a href="index.html">Pants Build</a>
<li><a href="setup_repo.html">Set up Your Source Tree for Pants</a>
</ul>
</nav>

<nav class="pagetoc">
<ul>
<li class="toc-h1"><a href="#configuring-with-pantsini">Configuring with pants.ini</a></li>
<li class="toc-h1"><a href="#configure-pants-own-runtime-dependencies">Configure Pants' own Runtime Dependencies</a></li>
<li class="toc-h1"><a href="#set-up-source-roots">Set up source roots</a></li>
<li class="toc-h1"><a href="#setting-up-build-files">Setting up BUILD files</a></li>
<li class="toc-h1"><a href="#build-and-environment-specific-config">BUILD.* and environment-specific config</a></li>
<li class="toc-h1"><a href="#configure-jvm-artifact-downloads">Configure JVM Artifact Downloads</a></li>
<li class="toc-h1"><a href="#integrate-new-tools-via-a-pants-plugin">Integrate New Tools via a Pants Plugin</a></li>
<li class="toc-h1"><a href="#build-in-the-source-tree-for-special-targets">BUILD.* in the source tree for special targets</a></li>
<li class="toc-h1"><a href="#enabling-pants-publish">Enabling Pants Publish</a></li>
<li class="toc-h2"><a href="#tell-pants-about-your-artifact-repository">Tell Pants about your Artifact Repository</a></li>
<li class="toc-h2"><a href="#restricting-publish-to-release-branch">Restricting Publish to &quot;Release Branch&quot;</a></li>
<li class="toc-h2"><a href="#task-to-publish-extra-artifacts">Task to Publish &quot;Extra&quot; Artifacts</a></li>
<li class="toc-h1"><a href="#outside-caches">Outside Caches</a></li>
<li class="toc-h1"><a href="#uploading-timing-stats">Uploading Timing Stats</a></li>
<li class="toc-h1"><a href="#using-pants-behind-a-firewall">Using Pants behind a firewall</a></li>
<li class="toc-h2"><a href="#configuring-the-python-requests-library">Configuring the Python requests library</a></li>
<li class="toc-h2"><a href="#ivy-bootstrapper-and-tool-bootstrapping">Ivy bootstrapper and tool bootstrapping</a></li>
<li class="toc-h2"><a href="#using-ivy-with-a-proxy">Using Ivy with a proxy</a></li>
<li class="toc-h1"><a href="#nexus-as-proxy">Nexus as proxy</a></li>
<li class="toc-h2"><a href="#redirecting-tool-downloads-to-other-servers">Redirecting tool downloads to other servers</a></li>
<li class="toc-h2"><a href="#redirecting-python-requirements-to-other-servers">Redirecting python requirements to other servers</a></li>
</ul>
</nav>

<!-- main content start -->
<!-- generated by pants! -->
<style>
.codehilite .hll { background-color: #ffffcc }
.codehilite  { background: #f0f0f0; }
.codehilite .c { color: #60a0b0; font-style: italic } /* Comment */
.codehilite .err { border: 1px solid #FF0000 } /* Error */
.codehilite .k { color: #007020; font-weight: bold } /* Keyword */
.codehilite .o { color: #666666 } /* Operator */
.codehilite .cm { color: #60a0b0; font-style: italic } /* Comment.Multiline */
.codehilite .cp { color: #007020 } /* Comment.Preproc */
.codehilite .c1 { color: #60a0b0; font-style: italic } /* Comment.Single */
.codehilite .cs { color: #60a0b0; background-color: #fff0f0 } /* Comment.Special */
.codehilite .gd { color: #A00000 } /* Generic.Deleted */
.codehilite .ge { font-style: italic } /* Generic.Emph */
.codehilite .gr { color: #FF0000 } /* Generic.Error */
.codehilite .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.codehilite .gi { color: #00A000 } /* Generic.Inserted */
.codehilite .go { color: #808080 } /* Generic.Output */
.codehilite .gp { color: #c65d09; font-weight: bold } /* Generic.Prompt */
.codehilite .gs { font-weight: bold } /* Generic.Strong */
.codehilite .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.codehilite .gt { color: #0040D0 } /* Generic.Traceback */
.codehilite .kc { color: #007020; font-weight: bold } /* Keyword.Constant */
.codehilite .kd { color: #007020; font-weight: bold } /* Keyword.Declaration */
.codehilite .kn { color: #007020; font-weight: bold } /* Keyword.Namespace */
.codehilite .kp { color: #007020 } /* Keyword.Pseudo */
.codehilite .kr { color: #007020; font-weight: bold } /* Keyword.Reserved */
.codehilite .kt { color: #902000 } /* Keyword.Type */
.codehilite .m { color: #40a070 } /* Literal.Number */
.codehilite .s { color: #4070a0 } /* Literal.String */
.codehilite .na { color: #4070a0 } /* Name.Attribute */
.codehilite .nb { color: #007020 } /* Name.Builtin */
.codehilite .nc { color: #0e84b5; font-weight: bold } /* Name.Class */
.codehilite .no { color: #60add5 } /* Name.Constant */
.codehilite .nd { color: #555555; font-weight: bold } /* Name.Decorator */
.codehilite .ni { color: #d55537; font-weight: bold } /* Name.Entity */
.codehilite .ne { color: #007020 } /* Name.Exception */
.codehilite .nf { color: #06287e } /* Name.Function */
.codehilite .nl { color: #002070; font-weight: bold } /* Name.Label */
.codehilite .nn { color: #0e84b5; font-weight: bold } /* Name.Namespace */
.codehilite .nt { color: #062873; font-weight: bold } /* Name.Tag */
.codehilite .nv { color: #bb60d5 } /* Name.Variable */
.codehilite .ow { color: #007020; font-weight: bold } /* Operator.Word */
.codehilite .w { color: #bbbbbb } /* Text.Whitespace */
.codehilite .mf { color: #40a070 } /* Literal.Number.Float */
.codehilite .mh { color: #40a070 } /* Literal.Number.Hex */
.codehilite .mi { color: #40a070 } /* Literal.Number.Integer */
.codehilite .mo { color: #40a070 } /* Literal.Number.Oct */
.codehilite .sb { color: #4070a0 } /* Literal.String.Backtick */
.codehilite .sc { color: #4070a0 } /* Literal.String.Char */
.codehilite .sd { color: #4070a0; font-style: italic } /* Literal.String.Doc */
.codehilite .s2 { color: #4070a0 } /* Literal.String.Double */
.codehilite .se { color: #4070a0; font-weight: bold } /* Literal.String.Escape */
.codehilite .sh { color: #4070a0 } /* Literal.String.Heredoc */
.codehilite .si { color: #70a0d0; font-style: italic } /* Literal.String.Interpol */
.codehilite .sx { color: #c65d09 } /* Literal.String.Other */
.codehilite .sr { color: #235388 } /* Literal.String.Regex */
.codehilite .s1 { color: #4070a0 } /* Literal.String.Single */
.codehilite .ss { color: #517918 } /* Literal.String.Symbol */
.codehilite .bp { color: #007020 } /* Name.Builtin.Pseudo */
.codehilite .vc { color: #bb60d5 } /* Name.Variable.Class */
.codehilite .vg { color: #bb60d5 } /* Name.Variable.Global */
.codehilite .vi { color: #bb60d5 } /* Name.Variable.Instance */
.codehilite .il { color: #40a070 } /* Literal.Number.Integer.Long */
</style>

<table class="h-plus-pilcrow">
<tbody>
<tr>
<td class="h-plus-pilcrow-holder"><h1 id="set-up-your-source-tree-for-pants">Set up Your Source Tree for Pants</h1></td>
<td><div class="pilcrow-div">
<a class="pilcrow-link" href="#set-up-your-source-tree-for-pants">¶</a>
</div></td>
</tr>
</tbody>
</table>

<p><strong>As of November 2015, this more complex than it should be.</strong>
<strong>The Pants community is actively working to simplify it.</strong>
If you're setting up the Pants build tool to work in your source tree, you need to
configure Pants' behavior. (Once it's set up, most folks should be able
<a href="first_concepts.html">to use Pants as normal</a>
and not worry about these things.)</p>

<table class="h-plus-pilcrow">
<tbody>
<tr>
<td class="h-plus-pilcrow-holder"><h2 id="configuring-with-pantsini">Configuring with <code>pants.ini</code></h2></td>
<td><div class="pilcrow-div">
<a class="pilcrow-link" href="#configuring-with-pantsini">¶</a>
</div></td>
</tr>
</tbody>
</table>

<p>Pants is very configurable and has literally hundreds of options.  Most of these are 
automatically set to useful defaults. However it is inevitable that sooner or later you'll 
need to tweak some of them.  For example, you may want to use <code>pants.ini</code>
<a href="install.html">to pin your Pants version</a></p>
<p>To do so, create a <code>pants.ini</code> file in your source tree's top-level directory.  If you installed
pants <a href="install.html">as recommended</a> this file should already exist.</p>
<p>The <code>pants.ini</code> file is a <a href="http://docs.python.org/install/index.html#inst-config-syntax">Python config files</a>,
parsed by <a href="http://docs.python.org/library/configparser.html">ConfigParser</a>. Thus,
it looks something like:</p>
<div class="codehilite"><pre><span class="k">[section]</span>
<span class="err">setting1:</span> <span class="err">value1</span>
<span class="err">setting2:</span> <span class="err">value2</span>
</pre></div>
<p>The <code>[DEFAULT]</code> section is special: its values are available in other
sections. It's thus handy for defining values that will be used in
several contexts, as in these excerpts that define/use <code>thrift_workdir</code>:</p>
<div class="codehilite"><pre><span class="k">[DEFAULT]</span>
<span class="err">thrift_workdir:</span> <span class="err">%(pants_workdir)s/thrift</span>

<span class="k">[GLOBAL]</span>
<span class="err">print_exception_stacktrace:</span> <span class="err">True</span>

<span class="k">[gen.thrift]</span>
<span class="err">workdir:</span> <span class="err">%(thrift_workdir)s</span>

<span class="k">[compile.java]</span>
<span class="err">args:</span> <span class="err">[</span>
  <span class="err">'-C-Tnowarnprefixes',</span> <span class="err">'-C%(thrift_workdir)s',</span>
<span class="err">]</span>
</pre></div>
<p>It's also handy for defining values that are used in several contexts,
since these values will be available in all those contexts. </p>

<table class="h-plus-pilcrow">
<tbody>
<tr>
<td class="h-plus-pilcrow-holder"><h2 id="configure-pants-own-runtime-dependencies">Configure Pants' own Runtime Dependencies</h2></td>
<td><div class="pilcrow-div">
<a class="pilcrow-link" href="#configure-pants-own-runtime-dependencies">¶</a>
</div></td>
</tr>
</tbody>
</table>

<p>Pants calls out to other tools. E.g., it optionally uses <code>scalastyle</code> to check scala source code.
Most tools come pre-configured by Pants. If you use scala a few tools are configured based on the
major scala version provided with the --version flag.  You can specify custom tool versions by
passing "custom" to --scala-platform-version. If a custom version of scala is desired some of these
tools require more setup though and these rely on special targets in your workspace to specify
versions of the tools to fetch .These targets all live in the <code>BUILD.tools</code> file by convention.</p>
<p>For example, the following targets are used to provide custom scala tools:</p>
<p><code>//:scalastyle</code>: Scala style checking.
<code>//:scalac</code>: Scala compiler.
<code>//:scala-repl</code>: Scala REPL environment.
<code>//:scala-library</code>: Scala runtime environment.</p>
<p>Pants looks in <code>BUILD.tools</code> for that target.  Below is an example of BUILD.tools that overrides
the default minor version for 2.10.  For these changes to take effect you would need to set
--scala-platform-version to 'custom'.</p>
<p>
<div class="md-included-snippet"><div class="codehilite"><pre># BUILD file used for integ tests to verify custom scala 2.11 setup works.

jar_library(name = 'scalac',
            jars = [
              jar(org = 'org.scala-lang', name = 'scala-compiler', rev = '2.11.7'),
            ])

jar_library(name = 'scala-library',
            jars = [
              jar(org = 'org.scala-lang', name = 'scala-library', rev = '2.11.7'),
            ])

jar_library(name = 'scala-repl',
            jars = [
              jar(org = 'org.scala-lang', name = 'scala-compiler', rev = '2.11.7'),
              jar(org = 'org.scala-lang', name = 'scala-library', rev = '2.11.7'),
            ])

jar_library(name = 'scalastyle',
            jars = [
              scala_jar(org='org.scalastyle', name='scalastyle', rev='0.8.0')
            ])
</pre></div></div>
</p>
<p>Additional tools can be defined as follows in BUILD.tools:</p>
<p>
<div class="md-included-snippet"><div class="codehilite"><pre><span class="n">target</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">'scala-js-library'</span><span class="p">,</span> <span class="n">dependencies</span><span class="o">=</span><span class="p">[</span><span class="s">'contrib/scalajs/3rdparty/jvm/org/scala-js:library'</span><span class="p">])</span>
</pre></div></div>
</p>
<p>When setting up your Pants repo, you may want to copy this file over from a working Pants repo and
perhaps change some version numbers to fit your situation.</p>
<p><strong>Note</strong>: pants ships expecting a specific main class and command line interface for all jvm tools
it uses; so, if the version you specify does not match either of those expectations, pants will
fail when it tries to call the tool.</p>

<table class="h-plus-pilcrow">
<tbody>
<tr>
<td class="h-plus-pilcrow-holder"><h2 id="set-up-source-roots">Set up source roots</h2></td>
<td><div class="pilcrow-div">
<a class="pilcrow-link" href="#set-up-source-roots">¶</a>
</div></td>
</tr>
</tbody>
</table>

<p>Maybe some day all the world's programmers will agree on the one true directory structure for
source code. Until then, Pants must deduce where the 'root' of a source tree is, so it can
correctly set up import paths, correctly bundle code etc.</p>
<p>In all typical cases, Pants can deduce the source roots automatically based on naming conventions.
E.g., <code>src/&lt;lang&gt;</code>, <code>src/main/&lt;lang&gt;</code>, <code>test/&lt;lang&gt;</code>, <code>src/test/&lt;lang&gt;</code>, <code>3rdparty/lang</code> and so on.
However if your source roots don't conform to any of the default patterns, you can add your own
patterns.  See <code>./pants help-advanced source</code> for details.</p>

<table class="h-plus-pilcrow">
<tbody>
<tr>
<td class="h-plus-pilcrow-holder"><h2 id="setting-up-build-files">Setting up <code>BUILD</code> files</h2></td>
<td><div class="pilcrow-div">
<a class="pilcrow-link" href="#setting-up-build-files">¶</a>
</div></td>
</tr>
</tbody>
</table>

<p>Pants is well-suited to large multi-project workspaces. You probably have a lot of code
organized in a big directory tree. <a href="build_files.html">The usual BUILD file advice</a>
applies here.</p>
<p><a id="setup_mvn2pants" pantsmark="setup_mvn2pants"> </a></p>
<p><strong>If you're converting a <code>mvn</code>-built workspace to use Pants</strong>, you can get a head start by using
information from your <code>pom.xml</code> files. The <a href="https://github.com/ericzundel/mvn2pants"><code>mvn2pants</code></a>
shows some scripts that convert <code>pom.xml</code> files into <code>BUILD</code> files; Square wrote and used these
to convert some projects. This can get you up and running with Pants faster. Careful, though:
Maven projects tend to be "coarser-grained" than Pants projects. Once you have things working,
you'll probably want to replace the big automatically-generated targets with things that follow
the 1:1:1 rule.</p>

<table class="h-plus-pilcrow">
<tbody>
<tr>
<td class="h-plus-pilcrow-holder"><h2 id="build-and-environment-specific-config"><code>BUILD.*</code> and environment-specific config</h2></td>
<td><div class="pilcrow-div">
<a class="pilcrow-link" href="#build-and-environment-specific-config">¶</a>
</div></td>
</tr>
</tbody>
</table>

<p>When we say <code>BUILD</code> files are named <code>BUILD</code>, we really mean <code>BUILD</code> or <tt>BUILD.<em>something</em></tt>.
If you have some rules that make sense for folks in one environment but not others, you might put
them into a separate BUILD file named <tt>BUILD.<em>something</em></tt>. For example, you might have
some <code>BUILD</code> config that you'd like to ship with your open-source code but some other parts to
keep internal. You can put open-source things in <code>BUILD.oss</code> and internal things in
<code>BUILD.internal</code>. Pants "sees" both of these. When shipping open-source code, you can hold back
the <code>BUILD.internal</code> file.</p>

<table class="h-plus-pilcrow">
<tbody>
<tr>
<td class="h-plus-pilcrow-holder"><h2 id="configure-jvm-artifact-downloads">Configure JVM Artifact Downloads</h2></td>
<td><div class="pilcrow-div">
<a class="pilcrow-link" href="#configure-jvm-artifact-downloads">¶</a>
</div></td>
</tr>
</tbody>
</table>

<p>Pants uses <code>Ivy</code> to fetch libraries external to the repo (also called 3rdparty libraries).
Ivy uses an XML configuration file.  By default, pants uses the configuration that ships with Ivy,
but if you need to change ivy settings you can specify your own in <code>pants.ini</code>:</p>
<div class="codehilite"><pre>[ivy]
ivy_settings: %(pants_supportdir)s/ivy/ivysettings.xml
cache_dir: ~/.ivy2/pants
</pre></div>
<p>Note that pants overrides Ivy's <code>ivy.cache.dir</code> property with the value of the --ivy-cache-dir
pants option.</p>
<p>For more information on Ivy settings, see the <a href="http://ant.apache.org/ivy/">Ivy documentation</a></p>

<table class="h-plus-pilcrow">
<tbody>
<tr>
<td class="h-plus-pilcrow-holder"><h2 id="integrate-new-tools-via-a-pants-plugin">Integrate New Tools via a Pants Plugin</h2></td>
<td><div class="pilcrow-div">
<a class="pilcrow-link" href="#integrate-new-tools-via-a-pants-plugin">¶</a>
</div></td>
</tr>
</tbody>
</table>

<p>Pants knows how to build many things, but maybe you need it to learn a new tool.
Maybe your organization has a custom linter, a custom code generator, or some other custom tool.
Maybe your organization uses a tool that, while not custom, has not yet been integrated with Pants.</p>
<ul>
<li>If your organization has some custom tools to integrate, set up a
    <a href="howto_plugin.html">Pants plugin</a>.</li>
<li>If you want to integrate with a not-custom tool, you still want to
    set up a Pants plugin (or perhaps add abilities to an existing
    plugin), but it might make sense to
    <a href="howto_contribute.html">get your changes in upstream</a>.</li>
</ul>

<table class="h-plus-pilcrow">
<tbody>
<tr>
<td class="h-plus-pilcrow-holder"><h2 id="build-in-the-source-tree-for-special-targets"><code>BUILD.*</code> in the source tree for special targets</h2></td>
<td><div class="pilcrow-div">
<a class="pilcrow-link" href="#build-in-the-source-tree-for-special-targets">¶</a>
</div></td>
</tr>
</tbody>
</table>

<p>If you distribute code to different organizations, you might want to
expose some targets to one organization but not to another. You can do
this by defining those targets in a <code>BUILD.*</code> file. You can give that
file to some people and not give it to others. This code will be
processed by people invoking pants on this directory only if they have
the file.</p>
<p>For example, you might work at the Foo Corporation, which maintains a
fleet of machines to run big test jobs. You might define a humungous
test job as a convenient way to send many many tests to the fleet:</p>
<div class="codehilite"><pre><span class="c"># src/javatest/com/foo/BUILD.foo</span>

<span class="c"># many-many test: Run this on the fleet, not your workstation</span>
<span class="c"># (unless you want to wait a few hours for results)</span>
<span class="n">junit_tests</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">'many-many'</span><span class="p">,</span>
<span class="n">dependencies</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s">'bar:all'</span><span class="p">,</span>
  <span class="s">'baz:all'</span><span class="p">,</span>
  <span class="s">'garply:all'</span><span class="p">,</span>
<span class="p">])</span>
</pre></div>
<p>If you don't want to make this test definition available to the public
(lest they complain about how long it takes), you might put this in a
BUILD.foo file and hold back this file when mirroring for the public
repository.</p>
<p><a id="setup_publish" pantsmark="setup_publish"></a></p>

<table class="h-plus-pilcrow">
<tbody>
<tr>
<td class="h-plus-pilcrow-holder"><h2 id="enabling-pants-publish">Enabling Pants Publish</h2></td>
<td><div class="pilcrow-div">
<a class="pilcrow-link" href="#enabling-pants-publish">¶</a>
</div></td>
</tr>
</tbody>
</table>

<p>Pants can ease <a href="publish.html">"publishing"</a>: uploading versioned compiled artifacts.
There are some special things to set up to enable and customize publishing.</p>

<table class="h-plus-pilcrow">
<tbody>
<tr>
<td class="h-plus-pilcrow-holder"><h3 id="tell-pants-about-your-artifact-repository">Tell Pants about your Artifact Repository</h3></td>
<td><div class="pilcrow-div">
<a class="pilcrow-link" href="#tell-pants-about-your-artifact-repository">¶</a>
</div></td>
</tr>
</tbody>
</table>

<p>To tell Pants which artifact repository to publish to, <a href="howto_plugin.html">Create a
plugin</a> if you haven't already. Register it with Pants.</p>
<p>In the plugin, define and register at least one <code>Repository</code> object in a <code>BUILD</code> file alias as
shown in
<a href="https://github.com/pantsbuild/pants/blob/master/src/python/internal_backend/repositories/register.py"><code>src/python/internal_backend/repositories/register.py</code></a>.</p>
<p><code>BUILD</code> targets can use this Repository's alias as the <code>repo</code> parameter to an <a href="build_dictionary.html#bdict_artifact" pantsref="bdict_artifact"><code>artifact</code></a>. For example,
<a href="https://github.com/pantsbuild/pants/blob/master/examples/src/java/org/pantsbuild/example/hello/greet/BUILD">examples/src/java/org/pantsbuild/example/hello/greet/BUILD</a>
refers to the <code>public</code> repository defined above. (Notice it's a Python object, not a string.)</p>
<p>
<div class="md-included-snippet"><div class="codehilite"><pre><span class="n">java_library</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">'greet'</span><span class="p">,</span>
  <span class="n">dependencies</span> <span class="o">=</span> <span class="p">[],</span> <span class="c"># A more realistic example would depend on other libs,</span>
                     <span class="c"># but this "hello world" is pretty simple.</span>
  <span class="n">sources</span> <span class="o">=</span> <span class="n">globs</span><span class="p">(</span><span class="s">'*.java'</span><span class="p">),</span>
  <span class="n">provides</span> <span class="o">=</span> <span class="n">artifact</span><span class="p">(</span><span class="n">org</span><span class="o">=</span><span class="s">'org.pantsbuild.example'</span><span class="p">,</span>
                      <span class="n">name</span><span class="o">=</span><span class="s">'hello-greet'</span><span class="p">,</span>
                      <span class="n">repo</span><span class="o">=</span><span class="n">public</span><span class="p">,),</span>
<span class="p">)</span>
</pre></div></div>
</p>
<p>If you get an error that the repo name (here, <code>public</code>) isn't defined, your plugin didn't register
with Pants successfully. Make sure you bootstrap Pants in a way that loads your <code>register.py</code>.</p>
<p>In your <code>pants.ini</code> file, set up a <code>[publish.jar]</code> section. In that section,
create a <code>dict</code> called <code>repos</code>. It should contain a section for each <code>Repository</code> object that you
defined in your plugin:</p>
<div class="codehilite"><pre><span class="k">[publish.jar]</span>
<span class="err">repos:</span> <span class="err">{</span>
  <span class="err">'public':</span> <span class="err">{</span>  <span class="c"># must match the name of the `Repository` object that you defined in your plugin.</span>
    <span class="err">'resolver':</span> <span class="err">'maven.example.com',</span> <span class="c"># must match hostname in ~/.netrc and the &lt;url&gt; parameter</span>
                                     <span class="c"># in your custom ivysettings.xml.</span>
    <span class="err">'auth':</span> <span class="err">'build-support:netrc',</span>   <span class="c"># Pants spec to a 'credentials()' or</span>
                                     <span class="c"># 'netrc_credentials()' object.</span>
    <span class="err">'help':</span> <span class="err">'Configure</span> <span class="err">your</span> <span class="err">~/.netrc</span> <span class="err">for</span> <span class="err">maven.example.com</span> <span class="err">access.'</span>
  <span class="err">},</span>
  <span class="err">'testing':</span> <span class="err">{</span>
    <span class="err">'resolver':</span> <span class="err">'artifactory.example.com',</span>
    <span class="err">'auth':</span> <span class="err">'build-support:netrc',</span>
    <span class="err">'help':</span> <span class="err">'Configure</span> <span class="err">your</span> <span class="err">~/.netrc</span> <span class="err">for</span> <span class="err">artifactory.example.com</span> <span class="err">access.'</span>
  <span class="err">},</span>
<span class="err">}</span>
</pre></div>
<p>If your repository requires authentication, add a <code>~/.netrc</code> file. Here is a sample file, that
matches the <code>repos</code> specified above:</p>
<div class="codehilite"><pre>machine maven.example.com
  login someuser
  password password123

machine artifactory.example.com
  login someuser
  password someotherpassword123
</pre></div>
<p>And place the following in a <code>BUILD</code> file somewhere in your repository (<code>build-support/BUILD</code> is a
good place, and is used in the example above):</p>
<div class="codehilite"><pre>netrc_credentials(name = 'netrc')
</pre></div>
<p>Next, tell Ivy how to publish to your repository. Add a new <code>ivysettings.xml</code> file to your repo
with the additional information needed to publish artifacts. Here is an example to get you started:</p>
<div class="codehilite"><pre><span class="cp">&lt;?xml version="1.0"?&gt;</span>

<span class="nt">&lt;ivysettings&gt;</span>
  <span class="nt">&lt;settings</span> <span class="na">defaultResolver=</span><span class="s">"chain-repos"</span><span class="nt">/&gt;</span>
  <span class="c">&lt;!-- The ${login} and ${password} values come from a netrc_credentials() object in a BUILD</span>
<span class="c">       file, which is fed by '~/.netrc'.  There must be a '~/.netrc' machine entry which</span>
<span class="c">       matches a resolver in the "repos" object in 'pants.ini', which also matches the 'host' in</span>
<span class="c">       this XML block.</span>

<span class="c">       machine &lt;hostname&gt;</span>
<span class="c">         login &lt;login&gt;</span>
<span class="c">         password &lt;password&gt;</span>

<span class="c">       The realm must match the kind of repository you are publishing to. For Sonotype Nexus, use:</span>

<span class="c">       realm="Sonatype Nexus Repository Manager"</span>

<span class="c">    --&gt;</span>
  <span class="nt">&lt;credentials</span> <span class="na">host=</span><span class="s">"artifactory.example.com"</span>
               <span class="na">realm=</span><span class="s">"Artifactory Realm"</span>
               <span class="na">username=</span><span class="s">"${login}"</span>
               <span class="na">passwd=</span><span class="s">"${password}"</span><span class="nt">/&gt;</span>

  <span class="nt">&lt;resolvers&gt;</span>
    <span class="nt">&lt;chain</span> <span class="na">name=</span><span class="s">"chain-repos"</span> <span class="na">returnFirst=</span><span class="s">"true"</span><span class="nt">&gt;</span>
       <span class="nt">&lt;ibiblio</span> <span class="na">name=</span><span class="s">"artifactory.example.com"</span>
                     <span class="na">m2compatible=</span><span class="s">"true"</span>
                     <span class="na">usepoms=</span><span class="s">"true"</span>
                     <span class="na">root=</span><span class="s">"https://artifactory.example.com/content/groups/public/"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/chain&gt;</span>

    <span class="nt">&lt;url</span> <span class="na">name=</span><span class="s">"artifactory.example.com"</span> <span class="na">m2compatible=</span><span class="s">"true"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;artifact</span> <span class="na">pattern=</span><span class="s">"https://artifactory.example.com/libs-releases-local/[organization]/[module]/[revision]/[module]-[revision](-[classifier]).[ext]"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/url&gt;</span>
  <span class="nt">&lt;/resolvers&gt;</span>
<span class="nt">&lt;/ivysettings&gt;</span>
</pre></div>
<p>With this file in place, add a <code>[publish.jar]</code> section to <code>pants.ini</code>, and tell pants to use
the custom Ivy settings when publishing:</p>
<div class="codehilite"><pre><span class="k">[publish.jar]</span>
<span class="err">ivy_settings:</span> <span class="err">%(pants_supportdir)s/ivy/ivysettings_for_publishing.xml</span>
</pre></div>
<p><a id="setup_publish_restrict_branch" pantsmark="setup_publish_restrict_branch"> </a></p>

<table class="h-plus-pilcrow">
<tbody>
<tr>
<td class="h-plus-pilcrow-holder"><h3 id="restricting-publish-to-release-branch">Restricting Publish to "Release Branch"</h3></td>
<td><div class="pilcrow-div">
<a class="pilcrow-link" href="#restricting-publish-to-release-branch">¶</a>
</div></td>
</tr>
</tbody>
</table>

<p>Your organization might have a notion of a special "release branch": you want <a href="publish.html">artifact
publishing</a> to happen on this source control branch, which you maintain
extra-carefully. You can set this branch using the <code>restrict_push_branches</code> option of the
<code>[publish.jar]</code> section of your <code>pants.ini</code> file.</p>

<table class="h-plus-pilcrow">
<tbody>
<tr>
<td class="h-plus-pilcrow-holder"><h3 id="task-to-publish-extra-artifacts">Task to Publish "Extra" Artifacts</h3></td>
<td><div class="pilcrow-div">
<a class="pilcrow-link" href="#task-to-publish-extra-artifacts">¶</a>
</div></td>
</tr>
</tbody>
</table>

<p>Pants supports "publish plugins", which allow end-users to add additional, arbitrary files to be
published along with the primary artifact. For example, let's say that along with publishing your
jar full of class files, you would also like to publish a companion file that contains some
metadata -- code coverage info, source git repository, java version that created the jar, etc. By
<a href="dev_tasks.html">developing a task</a> in a
<a href="howto_plugin.html">plugin</a>, you give Pants a new ability. <a href="dev_tasks_publish_extras.html">Develop a
Task to Publish "Extra" Artifacts</a> to find
out how to develop a special Task to include "extra" data with published artifacts.</p>
<p><a id="setup_cache"></a></p>

<table class="h-plus-pilcrow">
<tbody>
<tr>
<td class="h-plus-pilcrow-holder"><h2 id="outside-caches">Outside Caches</h2></td>
<td><div class="pilcrow-div">
<a class="pilcrow-link" href="#outside-caches">¶</a>
</div></td>
</tr>
</tbody>
</table>

<p>You can tell Pants to use outside caches when building. Pants automatically caches much of its
work in its working directory. But you can tell it to use (and generate) pre-built things in
another directory or a remote RESTful server. E.g, to use a shared server for cached builds,
and having set up such a server, set <code>cache</code> options in <code>pants.ini</code>:</p>
<div class="codehilite"><pre>[cache]
read_from: ['https://myserver.co/pantscache']
write_to: ['https://myserver.co/pantscache']
</pre></div>
<p>When building, Pants first tries to read built things from places in <code>read_from</code>.
If it builds something, it caches those built things in places in  <code>write_to</code>.
(It's handy that these are separate settings; if members of your organization can install wacky
tools on their laptops, you might not want their builds to write to a particular cache, but would
want them to be able to read from it.)</p>
<p>Valid option values include</p>
<ul>
<li><code>[ 'https://myserver.co/pcache' ]</code> RESTful server URL</li>
<li><code>[ '/tmp/pantscache' ]</code> local machine file location</li>
<li><code>[ 'https://myserver.us/pcache|https://myserver.bf/pcache' ]</code> pipe-separated list of URLs--Pants pings each and uses fastest</li>
<li><code>[ '/tmp/pantscache', 'https://myserver.co/pcache' ]</code> try local fs first, then remote server</li>
</ul>
<p>For a list of allowed values see the <code>_do_create_artifact_cache</code> docstring in
<a href="https://github.com/pantsbuild/pants/blob/master/src/python/pants/cache/cache_setup.py"><code>cache_setup.py</code></a></p>
<p>To make a cache server, you need to write it. It's basically a RESTful server that can handle
<code>GET</code>, <code>HEAD</code>, <code>PUT</code>, and <code>DELETE</code> requests on big binary blobs. If you implement this via <code>nginx</code>,
then the <code>dav_methods PUT DELETE;</code> directive is good. (You might want to add some
organization-specific business logic on top of that. E.g., if you're worried about the
"wacky laptop tools" case, your server should only accept artifacts from known-legitimate
machines.)
When <em>reading</em> from a cache server, Pants tries to <code>GET</code> an URL at some path under the server URL;
respond with 404 if there's nothing there, 200 if there is.
When <em>writing</em> to a cache server, Pants first tries a <code>HEAD</code> request to see if the file's already
there; respond with 404 if there's nothing there, 200 if there is. If Pants gets a 404, it will
then try a <code>PUT</code> request; store the file it sends.
If the user's <code>.netrc</code> has authentication information for the cache server[s], Pants will use it.
(Thus, if only some users with known-good setups should be able to write to the cache, you might
find it handy to use <code>.netrc</code> to authenticate those users.)</p>

<table class="h-plus-pilcrow">
<tbody>
<tr>
<td class="h-plus-pilcrow-holder"><h2 id="uploading-timing-stats">Uploading Timing Stats</h2></td>
<td><div class="pilcrow-div">
<a class="pilcrow-link" href="#uploading-timing-stats">¶</a>
</div></td>
</tr>
</tbody>
</table>

<p>Pants tracks information about its performance: what it builds, how much
time various build operations take, cache hits, and more.
If you you work with a large engineering organization, you might want to
gather this information in one place, so it can inform decisions about how
to improve everybody's build times.</p>
<p>In everyone's <code>pants.ini</code> files, in the <code>[run-tracker]</code> section, add a
<code>stats_upload_url</code> line:</p>
<div class="codehilite"><pre>stats_upload_url: "http://myorg.org/pantsstats"
</pre></div>
<p>Pants <code>POST</code>s reports to that URL. It's up to you to write a server to "listen"
at that URL. A <code>POST</code> can have the following fields:</p>
<p><code>artifact_cache_stats</code>: Information about Pants' caching.
<a href="#setup_cache">This "cache" refers to the place where Pants can store and fetch things it
builds</a> (not to be confused with the information it keeps in its working
directory or the pre-built artifacts it fetches from PyPI or maven).
This field is JSON. If Pants did <em>not</em> exercise its cache in a run, this might
be an empty list "<code>[]</code>". If Pants <em>did</em> exercise its cache, this JSON might
look like:</p>
<div class="codehilite"><pre><span class="p">[{</span><span class="s2">"num_hits"</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span>
  <span class="s2">"hits"</span><span class="o">:</span> <span class="p">[</span><span class="s2">"3rdparty:hamcrest-core"</span><span class="p">,</span> <span class="s2">"3rdparty:junit"</span><span class="p">],</span>
  <span class="s2">"num_misses"</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="s2">"cache_name"</span><span class="o">:</span> <span class="s2">"default"</span><span class="p">,</span>
  <span class="s2">"misses"</span><span class="o">:</span> <span class="p">[</span><span class="s2">"examples/tests/java/com/pants/examples/hello/greet"</span><span class="p">]}]</span>
</pre></div>
<p><code>run_info</code>: Miscellaneous info about the Pants run: SCM status, build
failure/success, etc. This is formatted as a JSON dictionary. It might look
like:</p>
<div class="codehilite"><pre><span class="p">{</span><span class="s2">"timestamp"</span><span class="o">:</span> <span class="s2">"1422901742.05"</span><span class="p">,</span>
 <span class="s2">"datetime"</span><span class="o">:</span> <span class="s2">"Monday Feb 02, 2015 10:29:02"</span><span class="p">,</span>
 <span class="s2">"machine"</span><span class="o">:</span> <span class="s2">"pogo-desktop"</span><span class="p">,</span>
 <span class="s2">"default_report"</span><span class="o">:</span> <span class="s2">"/home/lahosken/src/lpants/.pants.d/reports/pants_run_2015_02_02_10_29_02_54/html/build.html"</span><span class="p">,</span>
 <span class="s2">"tag"</span><span class="o">:</span> <span class="s2">"release_0.0.27-153-g7daeafc"</span><span class="p">,</span>
 <span class="s2">"user"</span><span class="o">:</span> <span class="s2">"lahosken"</span><span class="p">,</span>
 <span class="s2">"branch"</span><span class="o">:</span> <span class="s2">"cache_printf"</span><span class="p">,</span>
 <span class="s2">"path"</span><span class="o">:</span> <span class="s2">"/home/lahosken/src/lpants"</span><span class="p">,</span>
 <span class="s2">"outcome"</span><span class="o">:</span> <span class="s2">"SUCCESS"</span><span class="p">,</span>
 <span class="s2">"cmd_line"</span><span class="o">:</span> <span class="s2">"./pants test examples/tests/java/com/pants/examples/hello::"</span><span class="p">,</span>
 <span class="s2">"id"</span><span class="o">:</span> <span class="s2">"pants_run_2015_02_02_10_29_02_54"</span><span class="p">,</span>
 <span class="s2">"revision"</span><span class="o">:</span> <span class="s2">"7daeafc8b40dc9bdad532195d510b8ed520aaa7c"</span><span class="p">}</span>
</pre></div>
<p><code>self_timings</code>, <code>cumulative_timings</code>: Timing information about the stages of
the build. These stages "nest". If stage1 invokes stage2, then the
<code>cumulative_timings</code> for <code>stage1</code> include the <code>stage2</code> time, but the
<code>self_timings</code> for <code>stage1</code> will not. Each of these fields is a JSON-encoded
list of structures. The start of <code>cumulative_timings</code> might look like</p>
<div class="codehilite"><pre><span class="p">[{</span><span class="s2">"timing"</span><span class="o">:</span> <span class="mf">3.3389577865600586</span><span class="p">,</span> <span class="s2">"is_tool"</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span> <span class="s2">"label"</span><span class="o">:</span> <span class="s2">"main"</span><span class="p">},</span>
 <span class="p">{</span><span class="s2">"timing"</span><span class="o">:</span> <span class="mf">2.929041862487793</span><span class="p">,</span> <span class="s2">"is_tool"</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span> <span class="s2">"label"</span><span class="o">:</span> <span class="s2">"background"</span><span class="p">},</span>
 <span class="p">{</span><span class="s2">"timing"</span><span class="o">:</span> <span class="mf">1.560438871383667</span><span class="p">,</span> <span class="s2">"is_tool"</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span> <span class="s2">"label"</span><span class="o">:</span> <span class="s2">"main:test"</span><span class="p">},</span>
 <span class="p">{</span><span class="s2">"timing"</span><span class="o">:</span> <span class="mf">1.479201078414917</span><span class="p">,</span> <span class="s2">"is_tool"</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span> <span class="s2">"label"</span><span class="o">:</span> <span class="s2">"main:test:junit"</span><span class="p">},</span>
 <span class="p">{</span><span class="s2">"timing"</span><span class="o">:</span> <span class="mf">1.262120008468628</span><span class="p">,</span> <span class="s2">"is_tool"</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span> <span class="s2">"label"</span><span class="o">:</span> <span class="s2">"main:compile"</span><span class="p">},</span>
 <span class="p">{</span><span class="s2">"timing"</span><span class="o">:</span> <span class="mf">1.118539810180664</span><span class="p">,</span> <span class="s2">"is_tool"</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="s2">"label"</span><span class="o">:</span> <span class="s2">"main:test:junit:bootstrap-junit"</span><span class="p">},</span>
 <span class="p">{</span><span class="s2">"timing"</span><span class="o">:</span> <span class="mf">0.7393410205841064</span><span class="p">,</span> <span class="s2">"is_tool"</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span> <span class="s2">"label"</span><span class="o">:</span> <span class="s2">"main:compile:checkstyle"</span><span class="p">},</span>
 <span class="p">{</span><span class="s2">"timing"</span><span class="o">:</span> <span class="mf">0.7151470184326172</span><span class="p">,</span> <span class="s2">"is_tool"</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="s2">"label"</span><span class="o">:</span> <span class="s2">"main:compile:checkstyle:checkstyle"</span><span class="p">},</span>
 <span class="p">...</span>
</pre></div>

<table class="h-plus-pilcrow">
<tbody>
<tr>
<td class="h-plus-pilcrow-holder"><h2 id="using-pants-behind-a-firewall">Using Pants behind a firewall</h2></td>
<td><div class="pilcrow-div">
<a class="pilcrow-link" href="#using-pants-behind-a-firewall">¶</a>
</div></td>
</tr>
</tbody>
</table>

<p>Pants may encounter issues running behind a firewall. Several components expect to be able to reach the Internet:</p>
<ul>
<li>Ivy bootstrapper</li>
<li>Binary tool bootstrapping</li>
<li>Ivy itself (used for tool bootstrapping and downloading external .jar files)</li>
<li>Python requirements</li>
</ul>

<table class="h-plus-pilcrow">
<tbody>
<tr>
<td class="h-plus-pilcrow-holder"><h3 id="configuring-the-python-requests-library">Configuring the Python requests library</h3></td>
<td><div class="pilcrow-div">
<a class="pilcrow-link" href="#configuring-the-python-requests-library">¶</a>
</div></td>
</tr>
</tbody>
</table>

<p>Code in bootstrapper.py and other parts of Pants use the Python
<a href="http://docs.python-requests.org/en/latest/">requests</a> library to
download resources using http or https.  The first time you may
encounter this is when Pants attempts to download an initial version
of ivy.  If this initial download is through a proxy, the requests
library uses the <code>HTTP_PROXY</code> or <code>HTTPS_PROXY</code> environment variable to
find the proxy server.</p>
<div class="codehilite"><pre>export HTTP_PROXY=http://proxy.corp.example.com:123
export HTTPS_PROXY=https://proxy.corp.example.com:456
</pre></div>
<p>If you are using Pants configured to find resources with HTTPS urls, you may see an error like:</p>
<div class="codehilite"><pre>Exception message: Problem fetching the ivy bootstrap jar! Problem GETing data from https://artifactserver.example.com/content/groups/public/org/apache/ivy/ivy/2.3.0/ivy-2.3.0.jar: [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:581)
</pre></div>
<p>The requests library attempts to verify SSL certificates by default.
The reason it is denying the request is that it cannot find a trusted
public key for the root certificate authority presented by the server.
The requests library uses the 'certifi' library of well known
certificate authorities, if that library is installed.  If you are
using a virtualenv installation of pants, using <code>pip
install certifi</code> to add the certify package to your pants environment
might help.  You can also download a .pem bundle from the
<a href="http://certifi.io/en/latest/">certifi project page</a> and set
<code>REQUESTS_CA_BUNDLE</code> as mentioned below.</p>
<p>If you are using hosts with a self-signed certificate, your
certificate authority will not be available in the certifi library.
You will need a <code>.pem</code> file for the local certificate authority.</p>
<p>You can tell the requests library about your trusted certificate
authority certificates by setting the environment variable <code>REQUESTS_CA_BUNDLE</code>.
This variable should point to a file containing trusted certificates:</p>
<div class="codehilite"><pre>export REQUESTS_CA_BUNDLE=/etc/certs/latest.pem
</pre></div>

<table class="h-plus-pilcrow">
<tbody>
<tr>
<td class="h-plus-pilcrow-holder"><h3 id="ivy-bootstrapper-and-tool-bootstrapping">Ivy bootstrapper and tool bootstrapping</h3></td>
<td><div class="pilcrow-div">
<a class="pilcrow-link" href="#ivy-bootstrapper-and-tool-bootstrapping">¶</a>
</div></td>
</tr>
</tbody>
</table>

<p><a href="http://ant.apache.org/ivy/">Apache Ivy</a> is used as a way to download
the tools that Pants uses and for tool bootstrapper and external
artifacts.</p>
<p>Pants fetches the Ivy tool with an initial manual bootstrapping
step using the Python requests library.  If you do not want to use <code>HTTP_PROXY</code> or
<code>HTTPS_PROXY</code> as described above, you can re-redirect this initial download to another
URL with a setting in pants.ini:</p>
<div class="codehilite"><pre>[ivy]
bootstrap_jar_url: https://proxy.corp.example.com/content/groups/public/org/apache/ivy/ivy/2.3.0/ivy-2.3.0.jar
</pre></div>
<p>You may also encounter issues downloading this .jar file if you are
using self-signed SSL certificates. See the section on Configuring the Python requests library
above.</p>

<table class="h-plus-pilcrow">
<tbody>
<tr>
<td class="h-plus-pilcrow-holder"><h3 id="using-ivy-with-a-proxy">Using Ivy with a proxy</h3></td>
<td><div class="pilcrow-div">
<a class="pilcrow-link" href="#using-ivy-with-a-proxy">¶</a>
</div></td>
</tr>
</tbody>
</table>

<p>If you are using a version of pants 0.0.30 or greater, you can just set the <code>HTTP_PROXY</code> and
<code>HTTPS_PROXY</code> environment variables and Pants will automatically configure the proxies for Ivy.
If you are using an earlier version of pants, you must setup the system properties to
Ivy.  One way to do this is in pants.ini:</p>
<div class="codehilite"><pre>[bootstrap.bootstrap_jvm_tools]
jvm_options: [
    "-Dhttp.proxyHost=proxy.example.com",
    "-Dhttp.proxyPort=123",
    "-Dhttps.proxyHost=proxy.example.com",
    "-Dhttps.proxyPort=456",
  ]
</pre></div>
<p>Alternatively, if you have a custom <code>ivysettings.xml</code> file, you can set these values through
the <code>&lt;properties&gt;</code> configuration item.</p>

<table class="h-plus-pilcrow">
<tbody>
<tr>
<td class="h-plus-pilcrow-holder"><h2 id="nexus-as-proxy">Nexus as proxy</h2></td>
<td><div class="pilcrow-div">
<a class="pilcrow-link" href="#nexus-as-proxy">¶</a>
</div></td>
</tr>
</tbody>
</table>

<p>If your site uses Sonotype Nexus or another reverse proxy for
artifacts, you do not need to use a separate HTTP proxy.  Contact the
reverse proxy administrator to setup a proxy for the sites listed in
<code>build-support/ivy/settings.xml</code> and <code>pants.ini</code>.  Currently, these
sites are <code>https://repo1.maven.org/maven2/</code> and <code>https://dl.bintray.com/pantsbuild/maven/</code>:</p>
<p>Here is an excerpt of a modified ivysettings.xml with some possible configurations:</p>
<div class="codehilite"><pre>&lt;macrodef name="_remote_resolvers"&gt;
    &lt;chain returnFirst="true"&gt;
      &lt;ibiblio name="example-corp-maven"
               m2compatible="true"
               usepoms="true"
               root="https://nexus.example.com/content/groups/public/"/&gt;
      &lt;ibiblio name="maven.twttr.com-maven"
               m2compatible="true"
               usepoms="true"
               root="https://nexus.example.com/content/repositories/maven.twttr.com/"/&gt;
  &lt;/chain&gt;
&lt;/macrodef&gt;
</pre></div>

<table class="h-plus-pilcrow">
<tbody>
<tr>
<td class="h-plus-pilcrow-holder"><h3 id="redirecting-tool-downloads-to-other-servers">Redirecting tool downloads to other servers</h3></td>
<td><div class="pilcrow-div">
<a class="pilcrow-link" href="#redirecting-tool-downloads-to-other-servers">¶</a>
</div></td>
</tr>
</tbody>
</table>

<p>For the binary support tools like protoc, you will need to setup a
proxy for the <code>dl.bintray.com</code> repo, or create your own repo of build
tools:</p>
<div class="codehilite"><pre>pants_support_baseurls = [
    "https://nexus.example.com/content/repositories/dl.bintray.com/pantsbuild/bin/build-support"
    ]
</pre></div>

<table class="h-plus-pilcrow">
<tbody>
<tr>
<td class="h-plus-pilcrow-holder"><h3 id="redirecting-python-requirements-to-other-servers">Redirecting python requirements to other servers</h3></td>
<td><div class="pilcrow-div">
<a class="pilcrow-link" href="#redirecting-python-requirements-to-other-servers">¶</a>
</div></td>
</tr>
</tbody>
</table>

<p>For python repos, you need to override the following settings in pants.ini:</p>
<div class="codehilite"><pre>[python-repos]
repos: [
    "https://pantsbuild.github.io/cheeseshop/third_party/python/dist/index.html",
    "https://pantsbuild.github.io/cheeseshop/third_party/python/index.html"
  ]

indices: [
    "https://pypi.python.org/simple/"
  ]
</pre></div>

<!-- main content end -->

<div class="generated">
Generated by <a href="http://pantsbuild.github.io/docs.html">publish_docs</a>
from dist/markdown/html/src/docs/setup_repo.html 2016-04-18T13:47:20.338024
</div>

</div> <!-- end of mainflow -->

<nav class="bignav">
  <div class="bignav-logo">
    <a href="index.html">
      <img src="logo.ico" alt="[pantsbuild logo]">
    </a>
  </div>
  <form class="search" action="https://www.google.com/search">
  <input name="as_q" class="query" placeholder="Search">
  <input name="as_sitesearch" value="pantsbuild.github.io" type="hidden">
  </form>

<div class="site-toc">
<ul>
<li class="toc-h1 ">
<a href="first_concepts.html">Pants Conceptual Overview</a>
</li>
<li class="toc-h1 ">
<a href="install.html">Installing Pants</a>
</li>
<li class="toc-h1 ">
<a href="first_tutorial.html">First Tutorial</a>
</li>
<li class="toc-h1 ">
<a href="target_addresses.html">Target Addresses</a>
</li>
<li class="toc-h1 ">
<a href="JVMProjects.html">JVM Projects with Pants</a>
</li>
<li class="toc-h2 ">
<a href="3rdparty_jvm.html">JVM 3rdparty Pattern</a>
</li>
<li class="toc-h2 ">
<a href="scala.html">Scala Projects with Pants</a>
</li>
<li class="toc-h2 ">
<a href="from_maven.html">Pants for Maven Experts</a>
</li>
<li class="toc-h1 ">
<a href="python-readme.html">Python Projects with Pants</a>
</li>
<li class="toc-h2 ">
<a href="3rdparty_py.html">Python 3rdparty Pattern</a>
</li>
<li class="toc-h2 ">
<a href="pex_design.html">PEX Design</a>
</li>
<li class="toc-h1 ">
<a href="page.html">README Files and Markdown</a>
</li>
<li class="toc-h1 ">
<a href="build_files.html">BUILD files</a>
</li>
<li class="toc-h1 ">
<a href="invoking.html">Invoking Pants Build</a>
</li>
<li class="toc-h1 ">
<a href="tshoot.html">Troubleshooting</a>
</li>
<li class="toc-h1 ">
<a href="3rdparty.html">Third-Party Dependencies</a>
</li>
<li class="toc-h2 ">
<a href="3rdparty_jvm.html">JVM 3rdparty Pattern</a>
</li>
<li class="toc-h2 ">
<a href="3rdparty_py.html">Python 3rdparty Pattern</a>
</li>
<li class="toc-h1 ">
<a href="ThriftDeps.html">Using Pants with Thrift Dependencies</a>
</li>
<li class="toc-h1 ">
<a href="publish.html">Publishing Artifacts</a>
</li>
<li class="toc-h1 ">
<a href="with_emacs.html">Emacs With Pants</a>
</li>
<li class="toc-h1 ">
<a href="with_intellij.html">Using Pants with IntelliJ IDEA</a>
</li>
<li class="toc-h1 toc-here">
Set up Your Source Tree for Pants
</li>
<li class="toc-h1 ">
<a href="build_dictionary.html">Pants BUILD Dictionary</a>
</li>
<li class="toc-h1 ">
<a href="options_reference.html">Pants Reference</a>
</li>
<li class="toc-h1 ">
<a href="changelog.html">RELEASE HISTORY</a>
</li>
<li class="toc-h1 ">
<a href="export.html">Export Format</a>
</li>
<li class="toc-h1 ">
<a href="dev.html">Pants Developer Center</a>
</li>
<li class="toc-h2 ">
<a href="howto_contribute.html">Pants Contributors Guide</a>
</li>
<li class="toc-h2 ">
<a href="howto_ask.html">How To Ask</a>
</li>
<li class="toc-h2 ">
<a href="howto_develop.html">Pants Developers Guide</a>
</li>
<li class="toc-h2 ">
<a href="dev_tasks.html">Task Developer's Guide</a>
</li>
<li class="toc-h3 ">
<a href="dev_tasks_publish_extras.html">Develop a Task to Publish &quot;Extra&quot; Artifacts</a>
</li>
<li class="toc-h2 ">
<a href="styleguide.html">Pants Style Guide</a>
</li>
<li class="toc-h2 ">
<a href="howto_plugin.html">Developing a Pants Plugin</a>
</li>
<li class="toc-h2 ">
<a href="intellij.html">Pants Development with IntelliJ IDEA</a>
</li>
<li class="toc-h2 ">
<a href="internals.html">Pants Internals</a>
</li>
<li class="toc-h2 ">
<a href="deprecation_policy.html">Pants Deprecation Policy</a>
</li>
<li class="toc-h2 ">
<a href="release.html">Release Process</a>
</li>
<li class="toc-h3 ">
<a href="release_jvm.html">JVM Artifact Release Process</a>
</li>
<li class="toc-h3 ">
<a href="branching_strategy.html">Branching Strategy</a>
</li>
<li class="toc-h3 ">
<a href="deprecation_policy.html">Pants Deprecation Policy</a>
</li>
<li class="toc-h2 ">
<a href="docs.html">About the documentation</a>
</li>
<li class="toc-h2 ">
<a href="credits.html">Credits</a>
</li>
</ul>
</div>
</nav>

<div class="ci-status">
<a href="https://travis-ci.org/pantsbuild/pants">
<img src="https://travis-ci.org/pantsbuild/pants.png?branch=master"
     alt="Are the tests passing?" title="Are the tests passing?"></a><br>
<a href="https://coveralls.io/r/pantsbuild/pants?branch=master">
<img src="https://coveralls.io/repos/pantsbuild/pants/badge.png?branch=master"
     alt="Test Coverage Status" title="Test Coverage Status"></a>
</div>

</body>
</html>
