

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Set up Your Source Tree for Pants &mdash; pants 0.1 documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/pants-logo.ico"/>
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  

    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:'./',
        VERSION:'0.1',
        COLLAPSE_INDEX:false,
        FILE_SUFFIX:'.html',
        HAS_SOURCE:  true
      };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
    <link rel="top" title="pants 0.1 documentation" href="index.html"/>
        <link rel="next" title="Installing Pants" href="install.html"/>
        <link rel="prev" title="Using Pants with IntelliJ IDEA" href="with_intellij.html"/>
 
<script type="text/javascript">
  // In a plain template, we'd put this in the footer block.
  // In the read-the-docs template, there is no footer. So use jQuery ready:
  $(document).ready(function() {
    // Ping Google analytics
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-39101739-2', 'auto');
    ga('send', 'pageview');

    // Show the travis-ci status graphic
    $('.wy-breadcrumbs').append(
      '<div style="float: right;">' +
      '<a href="https://travis-ci.org/pantsbuild/pants">' +
      '<img src="https://travis-ci.org/pantsbuild/pants.png?branch=master">' +
      '</a></div>');
  });
</script>
<style type="text/css">
/* Shoehorn in pants logo */
body .icon-home:before {
   content: "";
}

body .icon-home{
  background: transparent url(./_static/pants-logo.ico) center left no-repeat;
  background-position-x: 5px;
  padding-left: 40px;
  padding-right: 35px;
  line-height: 40px;
}

body a.icon-home:hover{
  background: #3d8cbf url(./_static/pants-logo.ico) center left no-repeat;
  background-position-x: 5px;
}

</style>


  <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="index.html" class="icon icon-home"> pants</a>
        <form class="wy-form" action="search.html" method="get">
  <input type="text" name="q" placeholder="Search docs" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix">
        
        
            <ul>
<li class="toctree-l1"><a class="reference internal" href="first_concepts.html">Pants Conceptual Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="first_concepts.html#goals-and-targets">Goals and Targets</a></li>
<li class="toctree-l2"><a class="reference internal" href="first_concepts.html#target-types">Target Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="first_concepts.html#what-pants-does">What Pants Does</a></li>
<li class="toctree-l2"><a class="reference internal" href="first_concepts.html#next-step">Next Step</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="first_tutorial.html">First Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="first_tutorial.html#invoking-pants">Invoking Pants</a></li>
<li class="toctree-l2"><a class="reference internal" href="first_tutorial.html#build-files">BUILD Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="first_tutorial.html#the-usual-commands">The Usual Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="first_tutorial.html#next">Next</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="target_addresses.html">Target Addresses</a></li>
<li class="toctree-l1"><a class="reference internal" href="JVMProjects.html">JVM Projects with Pants</a><ul>
<li class="toctree-l2"><a class="reference internal" href="JVMProjects.html#relevant-goals-and-targets">Relevant Goals and Targets</a></li>
<li class="toctree-l2"><a class="reference internal" href="JVMProjects.html#build-for-a-simple-binary">BUILD for a Simple Binary</a></li>
<li class="toctree-l2"><a class="reference internal" href="JVMProjects.html#the-usual-commands-jvm">The Usual Commands: JVM</a></li>
<li class="toctree-l2"><a class="reference internal" href="JVMProjects.html#toolchain">Toolchain</a></li>
<li class="toctree-l2"><a class="reference internal" href="JVMProjects.html#java7-vs-java6-which-java">Java7 vs Java6, Which Java</a></li>
<li class="toctree-l2"><a class="reference internal" href="JVMProjects.html#bundles-deploy-able-runnable-file-trees">Bundles: Deploy-able Runnable File Trees</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="python-readme.html">Python Projects with Pants</a><ul>
<li class="toctree-l2"><a class="reference internal" href="python-readme.html#tl-dr-hello-world-with-pants-python">TL;DR - &#8216;Hello world!&#8217; with Pants Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="python-readme.html#describing-python-environments-in-pants">Describing Python environments in Pants</a></li>
<li class="toctree-l2"><a class="reference internal" href="python-readme.html#handling-python-requirement">Handling <tt class="docutils literal"><span class="pre">python_requirement</span></tt></a></li>
<li class="toctree-l2"><a class="reference internal" href="python-readme.html#python-thrift-library"><tt class="docutils literal"><span class="pre">python_thrift_library</span></tt></a></li>
<li class="toctree-l2"><a class="reference internal" href="python-readme.html#building-a-pex">Building a PEX</a></li>
<li class="toctree-l2"><a class="reference internal" href="python-readme.html#environment-manipulation-with-pants-py">Environment manipulation with <cite>pants py</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="python-readme.html#python-binary-entry-point">python_binary entry_point</a></li>
<li class="toctree-l2"><a class="reference internal" href="python-readme.html#python-tests">Python Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="python-readme.html#manipulating-pex-behavior-with-environment-variables">Manipulating PEX behavior with environment variables</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="page.html">README Files and Markdown</a><ul>
<li class="toctree-l2"><a class="reference internal" href="page.html#markdown-to-html">Markdown to HTML</a></li>
<li class="toctree-l2"><a class="reference internal" href="page.html#link-to-another-page">Link to Another <tt class="docutils literal"><span class="pre">page</span></tt></a></li>
<li class="toctree-l2"><a class="reference internal" href="page.html#publishing">Publishing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="build_files.html">BUILD files</a><ul>
<li class="toctree-l2"><a class="reference internal" href="build_files.html#debugging-a-build-file">Debugging a BUILD File</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_files.html#default-target">Default Target</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_files.html#the-1-1-1-rule">The 1:1:1 Rule</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_files.html#avoid-rglobs">Avoid rglobs</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_files.html#define-separate-targets-for-interface-and-implementation">Define Separate Targets for Interface and Implementation</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_files.html#depend-on-api-in-library-targets-implementation-in-binary-targets">Depend on API in Library Targets, Implementation in Binary Targets</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_files.html#which-build-files-are-executed-and-how">Which <tt class="docutils literal"><span class="pre">BUILD</span></tt> Files are &#8220;Executed&#8221;? (and how?)</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_files.html#id1">BUILD.* files</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="invoking.html">Invoking Pants Build</a><ul>
<li class="toctree-l2"><a class="reference internal" href="invoking.html#rc-files">rc files</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tshoot.html">Troubleshooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tshoot.html#maximum-verbosity">Maximum Verbosity</a></li>
<li class="toctree-l2"><a class="reference internal" href="tshoot.html#scrub-the-environment">Scrub the Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="tshoot.html#nailgun-5-seconds">Nailgun 5 seconds</a></li>
<li class="toctree-l2"><a class="reference internal" href="tshoot.html#questions-issues-bug-reports">Questions, Issues, Bug Reports</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="3rdparty.html">Third-Party Dependencies</a><ul>
<li class="toctree-l2"><a class="reference internal" href="3rdparty_jvm.html">JVM 3rdparty Pattern</a></li>
<li class="toctree-l2"><a class="reference internal" href="3rdparty_py.html">Python 3rdparty Pattern</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ThriftDeps.html">Using Pants with Thrift Dependencies</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ThriftDeps.html#generating-code">Generating Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="ThriftDeps.html#thrift-example">Thrift Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="ThriftDeps.html#publishing">Publishing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="publish.html">Publishing Artifacts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="publish.html#life-of-a-publish">Life of a Publish</a></li>
<li class="toctree-l2"><a class="reference internal" href="publish.html#how-to">How To</a></li>
<li class="toctree-l2"><a class="reference internal" href="publish.html#restricting-to-release-branch">Restricting to &#8220;Release Branch&#8221;</a></li>
<li class="toctree-l2"><a class="reference internal" href="publish.html#authenticating-to-the-artifact-repository">Authenticating to the Artifact Repository</a></li>
<li class="toctree-l2"><a class="reference internal" href="publish.html#troubleshooting">Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="publish.html#want-to-publish-something-publish-many-things">Want to Publish Something? Publish Many Things</a></li>
<li class="toctree-l2"><a class="reference internal" href="publish.html#test-with-a-fake-local-publish">Test with a Fake Local &#8220;Publish&#8221;</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="with_intellij.html">Using Pants with IntelliJ IDEA</a><ul>
<li class="toctree-l2"><a class="reference internal" href="with_intellij.html#pants-build-plugin-for-intellij">Pants Build Plugin for IntelliJ</a></li>
<li class="toctree-l2"><a class="reference internal" href="with_intellij.html#generating-idea-project">Generating IDEA Project</a></li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="">Set up Your Source Tree for Pants</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#configuring-with-pants-ini">Configuring with <tt class="docutils literal"><span class="pre">pants.ini</span></tt></a></li>
<li class="toctree-l2"><a class="reference internal" href="#configure-code-layout-with-source-root">Configure Code Layout with <cite>source_root</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="#top-level-build-for-tree-global-config">Top-level <cite>BUILD.*</cite> for tree-global config</a></li>
<li class="toctree-l2"><a class="reference internal" href="#build-in-the-source-tree-for-special-targets">BUILD.* in the source tree for special targets</a></li>
<li class="toctree-l2"><a class="reference internal" href="#restricting-publish-to-release-branch">Restricting Publish to &#8220;Release Branch&#8221;</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installing Pants</a><ul>
<li class="toctree-l2"><a class="reference internal" href="install.html#pex-based-installation">PEX-based Installation</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="build_dictionary.html">BUILD Dictionary</a><ul>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#file">__file__</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#amount">Amount</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#android-binary">android_binary</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#android-resources">android_resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#annotation-processor">annotation_processor</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#artifact">artifact</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#benchmark">benchmark</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#bundle">bundle</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#credentials">credentials</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#dependencies">dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#egg">egg</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#exclude">exclude</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#globs">globs</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#goal">goal</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#jar">jar</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#jar-library">jar_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#java-agent">java_agent</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#java-antlr-library">java_antlr_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#java-library">java_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#java-protobuf-library">java_protobuf_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#java-tests">java_tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#java-thrift-library">java_thrift_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#jaxb-library">jaxb_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#junit-tests">junit_tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#jvm-app">jvm_app</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#jvm-binary">jvm_binary</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#maven-layout">maven_layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#page">page</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#pants">pants</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#phase">phase</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#python-antlr-library">python_antlr_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#python-binary">python_binary</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#python-library">python_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#python-requirement">python_requirement</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#python-requirement-library">python_requirement_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#python-test-suite">python_test_suite</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#python-tests">python_tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#python-thrift-library">python_thrift_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#repo">repo</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#resources">resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#rglobs">rglobs</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#root-dir">ROOT_DIR</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#scala-library">scala_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#scala-specs">scala_specs</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#scala-tests">scala_tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#scalac-plugin">scalac_plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#setup-py">setup_py</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#source-root">source_root</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#time">Time</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#wiki">wiki</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#wiki-artifact">wiki_artifact</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="goals_reference.html">Goals Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#bench">bench</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#binary">binary</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#bootstrap">bootstrap</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#builddict">builddict</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#buildlint">buildlint</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#bundle">bundle</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#check-exclusives">check-exclusives</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#check-published-deps">check_published_deps</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#clean-all">clean-all</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#clean-all-async">clean-all-async</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#compile">compile</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#dependees">dependees</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#dependencies">dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#depmap">depmap</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#detect-duplicates">detect-duplicates</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#doc">doc</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#eclipse">eclipse</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#filedeps">filedeps</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#filemap">filemap</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#filter">filter</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#gen">gen</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#goals">goals</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#gref-phase-idea">idea</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#invalidate">invalidate</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#jar">jar</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#killserver">killserver</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#list">list</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#markdown">markdown</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#minimize">minimize</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#ng-killall">ng-killall</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#path">path</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#pathdeps">pathdeps</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#paths">paths</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#provides">provides</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#publish">publish</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#repl">repl</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#repl-dirty">repl-dirty</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#resolve">resolve</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#resources">resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#roots">roots</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#run">run</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#run-dirty">run-dirty</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#server">server</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#sort">sort</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#targets">targets</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#test">test</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#common">Common</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pants_ini_reference.html">pants.ini Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="pants_ini_reference.html#default-section">DEFAULT section</a></li>
<li class="toctree-l2"><a class="reference internal" href="pants_ini_reference.html#configref-section-idea">idea section</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="dev.html">Pants Developer Center</a><ul>
<li class="toctree-l2"><a class="reference internal" href="howto_contribute.html">Pants Contributors Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_ask.html">How To Ask</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_develop.html">Pants Developers Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="dev_tasks.html">Task Developer&#8217;s Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="intellij.html">Pants Development with IntelliJ IDEA</a></li>
<li class="toctree-l2"><a class="reference internal" href="internals.html">Pants Internals</a></li>
<li class="toctree-l2"><a class="reference internal" href="targets.html">Targets Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="tasks.html">Tasks Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="base.html">Base Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="release.html">Release Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="docs.html">About the documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="credits.html">Credits</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top">
        <i data-toggle="wy-nav-top" class="icon icon-reorder"></i>
        <a href="/">pants</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <ul class="wy-breadcrumbs">
  <li><a href="index.html">Docs</a> &raquo;</li>
  <li><a href="">Set up Your Source Tree for Pants</a></li>
  
</ul>
<hr/>

          
  <div class="section" id="set-up-your-source-tree-for-pants">
<h1>Set up Your Source Tree for Pants<a class="headerlink" href="#set-up-your-source-tree-for-pants" title="Permalink to this headline">¶</a></h1>
<p>If you&#8217;re setting up the Pants build tool to work in your source tree, you
probably want to configure Pants&#8217; behavior.  (Once it&#8217;s set up, most
folks should be able to use the <a class="reference internal" href="first_concepts.html"><em>Pants Conceptual Overview</em></a>
and not worry about these things.)</p>
<div class="section" id="configuring-with-pants-ini">
<span id="setup-pants-ini"></span><h2>Configuring with <tt class="docutils literal"><span class="pre">pants.ini</span></tt><a class="headerlink" href="#configuring-with-pants-ini" title="Permalink to this headline">¶</a></h2>
<p>Pants Build is very configurable. Your source tree&#8217;s top-level directory should
contain a <tt class="docutils literal"><span class="pre">pants.ini</span></tt> file that sets many, many options. You can modify a broad range of
settings here, including specific binaries to use in your toolchain,
arguments to pass to tools, etc.</p>
<p>These files are formatted as
<a class="reference external" href="http://docs.python.org/install/index.html#inst-config-syntax">Python config files</a>,
parsed by <a class="reference external" href="http://docs.python.org/library/configparser.html">ConfigParser</a>.
Thus, they look something like:</p>
<div class="highlight-python"><div class="highlight"><pre>[section]
setting1: value1
setting2: value2
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">[DEFAULT]</span></tt> section is special: its values are available in other sections.
It&#8217;s thus handy for defining values that will be used in several contexts, as in these
excerpts that define/use <tt class="docutils literal"><span class="pre">thrift_workdir</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre>[DEFAULT]
thrift_workdir: %(pants_workdir)s/thrift

[thrift-gen]
workdir: %(thrift_workdir)s

[java-compile]
args: [
  &#39;-C-Tnowarnprefixes&#39;, &#39;-C%(thrift_workdir)s&#39;,
]
</pre></div>
</div>
<p>It&#8217;s also handy for defining values that are used in several contexts, since these values
will be available in all those contexts. The code that combines DEFAULT values with
others is in Pants&#8217;
<a class="reference external" href="https://github.com/pantsbuild/pants/blob/master/src/python/pants/base/config.py">base/config.py</a>.</p>
</div>
<div class="section" id="configure-code-layout-with-source-root">
<span id="setup-source-root"></span><h2>Configure Code Layout with <cite>source_root</cite><a class="headerlink" href="#configure-code-layout-with-source-root" title="Permalink to this headline">¶</a></h2>
<p>Maybe someday all the world&#8217;s programmers will agree on the one true directory
structure for source code. Until then, you&#8217;ll want some
<a class="reference internal" href="build_dictionary.html#bdict-source-root"><em>source_root</em></a> rules to specify which directories hold
your code. A typical programming language has a notion of <em>base paths</em>
for imports; you configure pants to tell it those base paths.</p>
<p>If your project&#8217;s source tree is laid out for Maven, there&#8217;s a shortcut function
<cite>maven_layout</cite> that configures source roots for Maven&#8217;s expected
source code tree structure.</p>
<div class="section" id="organized-by-language">
<h3>Organized by Language<a class="headerlink" href="#organized-by-language" title="Permalink to this headline">¶</a></h3>
<p>If your top-level <tt class="docutils literal"><span class="pre">BUILD</span></tt> file is <tt class="docutils literal"><span class="pre">top/BUILD</span></tt> and your main Java code is in
<tt class="docutils literal"><span class="pre">top/src/java/com/foo/</span></tt> and your Java tests are in <tt class="docutils literal"><span class="pre">top/src/javatest/com/foo/</span></tt>,
then your top-level <cite>BUILD</cite> file might look like:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># top/BUILD</span>
<span class="n">source_root</span><span class="p">(</span><span class="s">&#39;src/java&#39;</span><span class="p">)</span>
<span class="n">source_root</span><span class="p">(</span><span class="s">&#39;src/javatest&#39;</span><span class="p">)</span>
<span class="o">...</span>
</pre></div>
</div>
<p>Pants can optionally enforce that only certain target types are allowed under each source root:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># top/BUILD</span>
<span class="n">source_root</span><span class="p">(</span><span class="s">&#39;src/java&#39;</span><span class="p">,</span> <span class="n">annotation_processor</span><span class="p">,</span> <span class="n">doc</span><span class="p">,</span> <span class="n">jvm_binary</span><span class="p">,</span> <span class="n">java_library</span><span class="p">,</span> <span class="n">page</span><span class="p">)</span>
<span class="n">source_root</span><span class="p">(</span><span class="s">&#39;src/javatest&#39;</span><span class="p">,</span> <span class="n">doc</span><span class="p">,</span> <span class="n">java_library</span><span class="p">,</span> <span class="n">java_tests</span><span class="p">,</span> <span class="n">page</span><span class="p">)</span>
<span class="o">...</span>
</pre></div>
</div>
</div>
<div class="section" id="organized-by-project">
<h3>Organized by Project<a class="headerlink" href="#organized-by-project" title="Permalink to this headline">¶</a></h3>
<p>If your top-level <tt class="docutils literal"><span class="pre">BUILD</span></tt> file is <tt class="docutils literal"><span class="pre">top/BUILD</span></tt> and the Java code for your
Theodore and Hank projects live in <tt class="docutils literal"><span class="pre">top/theodore/src/java/com/foo/</span></tt>,
then your top-level <cite>BUILD</cite> file might not contain any <tt class="docutils literal"><span class="pre">source_root</span></tt> statements.
Instead, <tt class="docutils literal"><span class="pre">theodore/BUILD</span></tt> and <tt class="docutils literal"><span class="pre">hank/BUILD</span></tt> might look like:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># top/(project)/BUILD</span>
<span class="n">source_root</span><span class="p">(</span><span class="s">&#39;src/java&#39;</span><span class="p">)</span>
<span class="n">source_root</span><span class="p">(</span><span class="s">&#39;src/javatest&#39;</span><span class="p">)</span>
<span class="o">...</span>
</pre></div>
</div>
<p>Or:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># top/(project)/BUILD</span>
<span class="n">source_root</span><span class="p">(</span><span class="s">&#39;src/java&#39;</span><span class="p">,</span> <span class="n">annotation_processor</span><span class="p">,</span> <span class="n">doc</span><span class="p">,</span> <span class="n">jvm_binary</span><span class="p">,</span> <span class="n">java_library</span><span class="p">,</span> <span class="n">page</span><span class="p">)</span>
<span class="n">source_root</span><span class="p">(</span><span class="s">&#39;src/javatest&#39;</span><span class="p">,</span> <span class="n">doc</span><span class="p">,</span> <span class="n">java_library</span><span class="p">,</span> <span class="n">java_tests</span><span class="p">,</span> <span class="n">page</span><span class="p">)</span>
<span class="o">...</span>
</pre></div>
</div>
<div class="section" id="build-and-environment-specific-config">
<h4><cite>BUILD.*</cite> and environment-specific config<a class="headerlink" href="#build-and-environment-specific-config" title="Permalink to this headline">¶</a></h4>
<p>When we said <cite>BUILD</cite> files were named <cite>BUILD</cite>, we really meant <cite>BUILD</cite>
or <em>BUILD</em>.<cite>something</cite>. If you have some rules that make sense for folks
in one environment but not others, you might put them into a separate
BUILD file named <em>BUILD</em>.<cite>something</cite>.</p>
</div>
</div>
</div>
<div class="section" id="top-level-build-for-tree-global-config">
<h2>Top-level <cite>BUILD.*</cite> for tree-global config<a class="headerlink" href="#top-level-build-for-tree-global-config" title="Permalink to this headline">¶</a></h2>
<p>When you invoke <tt class="docutils literal"><span class="pre">./pants</span> <span class="pre">goal</span> <span class="pre">something</span> <span class="pre">src/foo:foo</span></tt> it processes
the code in <cite>src/foo/BUILD</cite> and the code in <cite>./BUILD</cite> <em>and</em> <cite>./BUILD.*</cite>. If you
distribute code to different organizations, and want different configuration
for them, you might put the relevant config code in <cite>./BUILD.something</cite>.
You can give that file to some people and not-give it to others.</p>
<p>For example, you might work at the Foo Corporation, which maintains a fleet
of machines to run big test jobs. You might define a new <cite>goal</cite> type to
express sending a test job to the fleet:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">goal</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;test_on_fleet&#39;</span><span class="p">,</span>
     <span class="n">action</span><span class="o">=</span><span class="n">SendTestToFleet</span><span class="p">,</span>
     <span class="n">dependencies</span><span class="o">=</span><span class="p">[])</span><span class="o">.</span><span class="n">install</span><span class="p">()</span><span class="o">.</span><span class="n">with_description</span><span class="p">(</span><span class="s">&#39;Send test to Foo fleet&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>If the testing fleet is only available on Foo&#8217;s internal network and you
open-source this code, you don&#8217;t want to expose <cite>test_on_fleet</cite> to the world.
You&#8217;d just get complaints about <cite>Host testfleet.intranet.foo.com not found</cite>
errors.</p>
<p>You might put this code in a <cite>./BUILD.foo</cite> in the top-level directory of the
internal version of the source tree; then hold back this file when mirroring for
the public version. Thus, the foo-internal-only rules will be available
inside Foo, but not to the world.</p>
</div>
<div class="section" id="build-in-the-source-tree-for-special-targets">
<h2>BUILD.* in the source tree for special targets<a class="headerlink" href="#build-in-the-source-tree-for-special-targets" title="Permalink to this headline">¶</a></h2>
<p>If you distribute code to different organizations, you might want to expose some
targets to one organization but not to another. You can do this by defining
those targets in a <cite>BUILD.*</cite> file. You can give that file to some people and
not-give it to others. This code will be processed by people invoking pants
on this directory only if they have the file.</p>
<p>For example, you might work at the Foo Corporation, which maintains a fleet
of machines to run big test jobs. You might define a humungous test job
as a convenient way to send many many tests to the fleet</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># src/javatest/com/foo/BUILD.foo</span>

<span class="c"># many-many test: Run this on the fleet, not your workstation</span>
<span class="c"># (unless you want to wait a few hours for results)</span>
<span class="n">junit_tests</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;many-many&#39;</span><span class="p">,</span>
<span class="n">dependencies</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s">&#39;bar/BUILD:all&#39;</span><span class="p">,</span>
  <span class="s">&#39;baz/BUILD:all&#39;</span><span class="p">,</span>
  <span class="s">&#39;garply/BUILD:all&#39;</span><span class="p">,</span>
<span class="p">],)</span>
</pre></div>
</div>
<p>If you don&#8217;t want to make this test definition available to the public (lest
they complain about how long it takes), you might put this in a <cite>BUILD.foo</cite>
file and hold back this file when mirroring for the public repository.</p>
</div>
<div class="section" id="restricting-publish-to-release-branch">
<span id="setup-publish-restrict-branch"></span><h2>Restricting Publish to &#8220;Release Branch&#8221;<a class="headerlink" href="#restricting-publish-to-release-branch" title="Permalink to this headline">¶</a></h2>
<p>Your organization might have a notion of a special &#8220;release branch&#8221;: you want
<a class="reference internal" href="publish.html"><em>artifact publishing</em></a>
to happen on this source control branch, which you maintain
extra-carefully. To configure this, set up a <tt class="docutils literal"><span class="pre">JarPublish</span></tt>
subclass in an always-used <tt class="docutils literal"><span class="pre">BUILD</span></tt> file (in most repos, this
means a <tt class="docutils literal"><span class="pre">BUILD</span></tt> file in the top directory). This <tt class="docutils literal"><span class="pre">JarPublish</span></tt>
subclass should use <tt class="docutils literal"><span class="pre">restrict_push_branches</span></tt>. Set up your repo&#8217;s
<tt class="docutils literal"><span class="pre">publish</span></tt> goal to use this class:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># ./BUILD.myorg</span>
<span class="k">class</span> <span class="nc">MyorgJarPublish</span><span class="p">(</span><span class="n">JarPublish</span><span class="p">):</span>
  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">workdir</span><span class="p">):</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">MyorgJarPublish</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">workdir</span><span class="p">,</span> <span class="n">restrict_push_branches</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;master&#39;</span><span class="p">])</span>

<span class="n">goal</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;publish&#39;</span><span class="p">,</span>
     <span class="n">action</span><span class="o">=</span><span class="n">MyorgJarPublish</span><span class="p">)</span><span class="o">.</span><span class="n">install</span><span class="p">(</span><span class="s">&#39;publish&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">with_description</span><span class="p">(</span><span class="s">&#39;Publish one or more artifacts.&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>If a user invokes <tt class="docutils literal"><span class="pre">goal</span> <span class="pre">publish</span></tt> from some other branch, Pants balks.</p>
</div>
</div>


          <footer>
  
    <div class="rst-footer-buttons">
      
        <a href="install.html" class="btn btn-neutral float-right" title="Installing Pants"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="with_intellij.html" class="btn btn-neutral" title="Using Pants with IntelliJ IDEA"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <p>
      &copy; Copyright 2014, Pants project contributors.
  </p>

  <a href="https://www.github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="http://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  

</body>
</html>