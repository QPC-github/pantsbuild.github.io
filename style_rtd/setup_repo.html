
<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Set up Your Source Tree for Pants</title>

  <link rel="shortcut icon" href="../_static/pants-logo.ico"/>

  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:'./',
        VERSION:'0.1',
        COLLAPSE_INDEX:false,
        FILE_SUFFIX:'.html',
        HAS_SOURCE:  true
      };
  </script>

  <script type="text/javascript" src="../_static/jquery.js"></script>
  <script type="text/javascript" src="../_static/underscore.js"></script>
  <script type="text/javascript" src="../_static/doctools.js"></script>

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <script type="text/javascript" src="../_static/js/theme.js"></script>


<script type="text/javascript">
  // In a plain template, we'd put this in the footer block.
  // In the read-the-docs template, there is no footer. So use jQuery ready:
  $(document).ready(function() {
    // Ping Google analytics
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-39101739-2', 'auto');
    ga('send', 'pageview');

    // Show the travis-ci status graphic
    $('.wy-breadcrumbs').append(
      '<div style="float: right;">' +
      '<a href="https://travis-ci.org/pantsbuild/pants">' +
      '<img src="https://travis-ci.org/pantsbuild/pants.png?branch=master">' +
      '</a></div>');
  });
</script>
<style type="text/css">
/* Shoehorn in pants logo */
body .icon-home:before {
   content: "";
}

body .icon-home{
  background: transparent url(../_static/pants-logo.ico) center left no-repeat;
  background-position-x: 5px;
  padding-left: 40px;
  padding-right: 35px;
  line-height: 40px;
}

body a.icon-home:hover{
  background: #3d8cbf url(../_static/pants-logo.ico) center left no-repeat;
  background-position-x: 5px;
}

</style>

<script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="index.html" class="icon icon-home"> pants</a>

  <form class="wy-form" action="https://www.google.com/search">
  <input name="as_q" class="query" placeholder="Search">
  <input name="as_sitesearch" value="pantsbuild.github.io" type="hidden">
<!--  <input value="Search" type=submit class="button"> -->
  </form>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix">


<ul>
<li class="toctree-l1 ">
<a href="first_concepts.html">Pants Conceptual Overview</a>
</li>
<li class="toctree-l1 ">
<a href="first_tutorial.html">First Tutorial</a>
</li>
<li class="toctree-l1 ">
<a href="target_addresses.html">Target Addresses</a>
</li>
<li class="toctree-l1 ">
<a href="JVMProjects.html">JVM Projects with Pants</a>
</li>
<li class="toctree-l2 ">
<a href="3rdparty_jvm.html">JVM 3rdparty Pattern</a>
</li>
<li class="toctree-l2 ">
<a href="from_maven.html">Pants for Maven Experts</a>
</li>
<li class="toctree-l1 ">
<a href="python-readme.html">Python Projects with Pants</a>
</li>
<li class="toctree-l2 ">
<a href="3rdparty_py.html">Python 3rdparty Pattern</a>
</li>
<li class="toctree-l2 ">
<a href="pex_design.html">PEX Design</a>
</li>
<li class="toctree-l2 ">
<a href="python_old.html">Using Pants for Python development, 2014 and Earlier</a>
</li>
<li class="toctree-l1 ">
<a href="page.html">README Files and Markdown</a>
</li>
<li class="toctree-l1 ">
<a href="build_files.html">BUILD files</a>
</li>
<li class="toctree-l1 ">
<a href="invoking.html">Invoking Pants Build</a>
</li>
<li class="toctree-l1 ">
<a href="tshoot.html">Troubleshooting</a>
</li>
<li class="toctree-l1 ">
<a href="3rdparty.html">Third-Party Dependencies</a>
</li>
<li class="toctree-l2 ">
<a href="3rdparty_jvm.html">JVM 3rdparty Pattern</a>
</li>
<li class="toctree-l2 ">
<a href="3rdparty_py.html">Python 3rdparty Pattern</a>
</li>
<li class="toctree-l1 ">
<a href="ThriftDeps.html">Using Pants with Thrift Dependencies</a>
</li>
<li class="toctree-l1 ">
<a href="publish.html">Publishing Artifacts</a>
</li>
<li class="toctree-l1 ">
<a href="with_emacs.html">Emacs With Pants</a>
</li>
<li class="toctree-l1 ">
<a href="with_intellij.html">Using Pants with IntelliJ IDEA</a>
</li>
<li class="toctree-l1 ">
<a href="install.html">Installing Pants</a>
</li>
<li class="toctree-l1 current">
Set up Your Source Tree for Pants
</li>
<li class="toctree-l1 ">
<a href="build_dictionary.html">Pants BUILD Dictionary</a>
</li>
<li class="toctree-l1 ">
<a href="goals_reference.html">Pants Goals Reference</a>
</li>
<li class="toctree-l1 ">
<a href="dev.html">Pants Developer Center</a>
</li>
<li class="toctree-l2 ">
<a href="howto_contribute.html">Pants Contributors Guide</a>
</li>
<li class="toctree-l2 ">
<a href="howto_ask.html">How To Ask</a>
</li>
<li class="toctree-l2 ">
<a href="howto_develop.html">Pants Developers Guide</a>
</li>
<li class="toctree-l2 ">
<a href="dev_tasks.html">Task Developer's Guide</a>
</li>
<li class="toctree-l3 ">
<a href="dev_tasks_publish_extras.html">Develop a Task to Publish &quot;Extra&quot; Artifacts</a>
</li>
<li class="toctree-l2 ">
<a href="howto_plugin.html">Developing a Pants Plugin</a>
</li>
<li class="toctree-l2 ">
<a href="intellij.html">Pants Development with IntelliJ IDEA</a>
</li>
<li class="toctree-l2 ">
<a href="internals.html">Pants Internals</a>
</li>
<li class="toctree-l2 ">
<a href="release.html">Release Process</a>
</li>
<li class="toctree-l2 ">
<a href="docs.html">About the documentation</a>
</li>
<li class="toctree-l2 ">
<a href="credits.html">Credits</a>
</li>
</ul>

      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      <nav class="wy-nav-top">
        <i data-toggle="wy-nav-top" class="icon icon-reorder"></i>
        <a href="/">pants</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <ul class="wy-breadcrumbs">
<li><a href="index.html">Welcome to the Pants build system.</a>
<li><a href="setup_repo.html">Set up Your Source Tree for Pants</a>
</ul>


<div style="float: right; max-width: 30%;">
<nav class="pagetoc">
<ul>
<li class="toctree-l1"><a href="#configuring-with-pantsini">Configuring with pants.ini</a></li>
<li class="toctree-l1"><a href="#configure-pants-own-runtime-dependencies">Configure Pants' own Runtime Dependencies</a></li>
<li class="toctree-l1"><a href="#configure-code-layout-with-source_root-maven_layout">Configure Code Layout with source_root, maven_layout</a></li>
<li class="toctree-l2"><a href="#organized-by-language">Organized by Language</a></li>
<li class="toctree-l2"><a href="#organized-by-project">Organized by Project</a></li>
<li class="toctree-l1"><a href="#setting-up-build-files">Setting up BUILD files</a></li>
<li class="toctree-l1"><a href="#build-and-environment-specific-config">BUILD.* and environment-specific config</a></li>
<li class="toctree-l1"><a href="#configure-jvm-artifact-publishing">Configure JVM Artifact Publishing</a></li>
<li class="toctree-l1"><a href="#integrate-new-tools-via-a-pants-plugin">Integrate New Tools via a Pants Plugin</a></li>
<li class="toctree-l1"><a href="#build-in-the-source-tree-for-special-targets">BUILD.* in the source tree for special targets</a></li>
<li class="toctree-l1"><a href="#enabling-pants-publish">Enabling Pants Publish</a></li>
<li class="toctree-l2"><a href="#tell-pants-about-your-artifact-repository">Tell Pants about your Artifact Repository</a></li>
<li class="toctree-l2"><a href="#restricting-publish-to-release-branch">Restricting Publish to &quot;Release Branch&quot;</a></li>
<li class="toctree-l2"><a href="#task-to-publish-extra-artifacts">Task to Publish &quot;Extra&quot; Artifacts</a></li>
</ul>
</nav>
</div>

<div class="section">
<!-- main content start -->
<!-- generated by pants! -->
<style>
.codehilite .hll { background-color: #ffffcc }
.codehilite  { background: #f0f0f0; }
.codehilite .c { color: #60a0b0; font-style: italic } /* Comment */
.codehilite .err { border: 1px solid #FF0000 } /* Error */
.codehilite .k { color: #007020; font-weight: bold } /* Keyword */
.codehilite .o { color: #666666 } /* Operator */
.codehilite .cm { color: #60a0b0; font-style: italic } /* Comment.Multiline */
.codehilite .cp { color: #007020 } /* Comment.Preproc */
.codehilite .c1 { color: #60a0b0; font-style: italic } /* Comment.Single */
.codehilite .cs { color: #60a0b0; background-color: #fff0f0 } /* Comment.Special */
.codehilite .gd { color: #A00000 } /* Generic.Deleted */
.codehilite .ge { font-style: italic } /* Generic.Emph */
.codehilite .gr { color: #FF0000 } /* Generic.Error */
.codehilite .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.codehilite .gi { color: #00A000 } /* Generic.Inserted */
.codehilite .go { color: #808080 } /* Generic.Output */
.codehilite .gp { color: #c65d09; font-weight: bold } /* Generic.Prompt */
.codehilite .gs { font-weight: bold } /* Generic.Strong */
.codehilite .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.codehilite .gt { color: #0040D0 } /* Generic.Traceback */
.codehilite .kc { color: #007020; font-weight: bold } /* Keyword.Constant */
.codehilite .kd { color: #007020; font-weight: bold } /* Keyword.Declaration */
.codehilite .kn { color: #007020; font-weight: bold } /* Keyword.Namespace */
.codehilite .kp { color: #007020 } /* Keyword.Pseudo */
.codehilite .kr { color: #007020; font-weight: bold } /* Keyword.Reserved */
.codehilite .kt { color: #902000 } /* Keyword.Type */
.codehilite .m { color: #40a070 } /* Literal.Number */
.codehilite .s { color: #4070a0 } /* Literal.String */
.codehilite .na { color: #4070a0 } /* Name.Attribute */
.codehilite .nb { color: #007020 } /* Name.Builtin */
.codehilite .nc { color: #0e84b5; font-weight: bold } /* Name.Class */
.codehilite .no { color: #60add5 } /* Name.Constant */
.codehilite .nd { color: #555555; font-weight: bold } /* Name.Decorator */
.codehilite .ni { color: #d55537; font-weight: bold } /* Name.Entity */
.codehilite .ne { color: #007020 } /* Name.Exception */
.codehilite .nf { color: #06287e } /* Name.Function */
.codehilite .nl { color: #002070; font-weight: bold } /* Name.Label */
.codehilite .nn { color: #0e84b5; font-weight: bold } /* Name.Namespace */
.codehilite .nt { color: #062873; font-weight: bold } /* Name.Tag */
.codehilite .nv { color: #bb60d5 } /* Name.Variable */
.codehilite .ow { color: #007020; font-weight: bold } /* Operator.Word */
.codehilite .w { color: #bbbbbb } /* Text.Whitespace */
.codehilite .mf { color: #40a070 } /* Literal.Number.Float */
.codehilite .mh { color: #40a070 } /* Literal.Number.Hex */
.codehilite .mi { color: #40a070 } /* Literal.Number.Integer */
.codehilite .mo { color: #40a070 } /* Literal.Number.Oct */
.codehilite .sb { color: #4070a0 } /* Literal.String.Backtick */
.codehilite .sc { color: #4070a0 } /* Literal.String.Char */
.codehilite .sd { color: #4070a0; font-style: italic } /* Literal.String.Doc */
.codehilite .s2 { color: #4070a0 } /* Literal.String.Double */
.codehilite .se { color: #4070a0; font-weight: bold } /* Literal.String.Escape */
.codehilite .sh { color: #4070a0 } /* Literal.String.Heredoc */
.codehilite .si { color: #70a0d0; font-style: italic } /* Literal.String.Interpol */
.codehilite .sx { color: #c65d09 } /* Literal.String.Other */
.codehilite .sr { color: #235388 } /* Literal.String.Regex */
.codehilite .s1 { color: #4070a0 } /* Literal.String.Single */
.codehilite .ss { color: #517918 } /* Literal.String.Symbol */
.codehilite .bp { color: #007020 } /* Name.Builtin.Pseudo */
.codehilite .vc { color: #bb60d5 } /* Name.Variable.Class */
.codehilite .vg { color: #bb60d5 } /* Name.Variable.Global */
.codehilite .vi { color: #bb60d5 } /* Name.Variable.Instance */
.codehilite .il { color: #40a070 } /* Literal.Number.Integer.Long */
</style>

<table class="h-plus-pilcrow">
<tbody>
<tr>
<td class="h-plus-pilcrow-holder"><h1 id="set-up-your-source-tree-for-pants">Set up Your Source Tree for Pants</h1></td>
<td><div class="pilcrow-div">
<a class="pilcrow-link" href="#set-up-your-source-tree-for-pants">¶</a>
</div></td>
</tr>
</tbody>
</table>

<p><strong>As of September 2014, this much more complex than it should be.</strong>
<strong>The Pants community is actively working to simplify it.</strong>
If you're setting up the Pants build tool to work in your source tree, you need to
configure Pants' behavior. (Once it's set up, most folks should be able
<a href="first_concepts.html">to use Pants as normal</a>
and not worry about these things.)</p>

<table class="h-plus-pilcrow">
<tbody>
<tr>
<td class="h-plus-pilcrow-holder"><h2 id="configuring-with-pantsini">Configuring with <code>pants.ini</code></h2></td>
<td><div class="pilcrow-div">
<a class="pilcrow-link" href="#configuring-with-pantsini">¶</a>
</div></td>
</tr>
</tbody>
</table>

<p>Pants Build is very configurable. Your source tree's top-level directory
should contain a <code>pants.ini</code> file that sets many, many options. You can
modify a broad range of settings here, including specific binaries to
use in your toolchain, arguments to pass to tools, etc.</p>
<p>These files are formatted as <a href="http://docs.python.org/install/index.html#inst-config-syntax">Python config
files</a>,
parsed by
<a href="http://docs.python.org/library/configparser.html">ConfigParser</a>. Thus,
they look something like:</p>
<div class="codehilite"><pre><span class="k">[section]</span>
<span class="err">setting1:</span> <span class="err">value1</span>
<span class="err">setting2:</span> <span class="err">value2</span>
</pre></div>
<p>The <code>[DEFAULT]</code> section is special: its values are available in other
sections. It's thus handy for defining values that will be used in
several contexts, as in these excerpts that define/use <code>thrift_workdir</code>:</p>
<div class="codehilite"><pre><span class="k">[DEFAULT]</span>
<span class="err">thrift_workdir:</span> <span class="err">%(pants_workdir)s/thrift</span>

<span class="k">[thrift-gen]</span>
<span class="err">workdir:</span> <span class="err">%(thrift_workdir)s</span>

<span class="k">[java-compile]</span>
<span class="err">args:</span> <span class="err">[</span>
  <span class="err">'-C-Tnowarnprefixes',</span> <span class="err">'-C%(thrift_workdir)s',</span>
<span class="err">]</span>
</pre></div>
<p>It's also handy for defining values that are used in several contexts,
since these values will be available in all those contexts. The code
that combines DEFAULT values with others is in Pants'
<a href="https://github.com/pantsbuild/pants/blob/master/src/python/pants/base/config.py">base/config.py</a>.</p>

<table class="h-plus-pilcrow">
<tbody>
<tr>
<td class="h-plus-pilcrow-holder"><h2 id="configure-pants-own-runtime-dependencies">Configure Pants' own Runtime Dependencies</h2></td>
<td><div class="pilcrow-div">
<a class="pilcrow-link" href="#configure-pants-own-runtime-dependencies">¶</a>
</div></td>
</tr>
</tbody>
</table>

<p>Pants calls out to other tools. E.g., it uses <code>jmake</code> for part of Java compilation.
Some special files in your workspace specify versions of these to fetch.
When setting up your Pants repo, you want to copy these files over from a working Pants
repo and perhaps change some version numbers to fit your situation.</p>
<p><strong>JVM</strong> <code>BUILD.tools</code> has JVM dependencies. For example, when Pants fetches <code>jmake</code>, it looks in
<code>BUILD.tools</code> for that target:</p>
<p>
<div class="md-included-snippet"><div class="codehilite"><pre><span class="n">jar_library</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">'jmake'</span><span class="p">,</span>
            <span class="n">jars</span> <span class="o">=</span> <span class="p">[</span><span class="n">jar</span><span class="p">(</span><span class="n">org</span> <span class="o">=</span> <span class="s">'com.sun.tools'</span><span class="p">,</span> <span class="n">name</span> <span class="o">=</span> <span class="s">'jmake'</span><span class="p">,</span> <span class="n">rev</span> <span class="o">=</span> <span class="s">'1.3.8-3'</span><span class="p">)])</span>
</pre></div></div>
</p>
<p><strong>Python</strong> <code>build-support/python/pants.requirements.txt</code> has Pants' runtime Python requirements,
expressed as a <code>requirements.txt</code> file.</p>

<table class="h-plus-pilcrow">
<tbody>
<tr>
<td class="h-plus-pilcrow-holder"><h2 id="configure-code-layout-with-source_root-maven_layout">Configure Code Layout with <code>source_root</code>, <code>maven_layout</code></h2></td>
<td><div class="pilcrow-div">
<a class="pilcrow-link" href="#configure-code-layout-with-source_root-maven_layout">¶</a>
</div></td>
</tr>
</tbody>
</table>

<p>Maybe someday all the world's programmers will agree on the one true
directory structure for source code. Until then, you'll want some
<a href="build_dictionary.html#bdict_source_root" pantsref="bdict_source_root"><code>source_root</code></a>
rules to specify which directories hold your code. A
typical programming language has a notion of <em>base paths</em> for imports;
you configure pants to tell it those base paths.</p>
<p>If your project's source tree is laid out for Maven, there's a shortcut
function
<a href="build_dictionary.html#bdict_maven_layout" pantsref="bdict_maven_layout"><code>maven_layout</code></a>
that configures source roots for Maven's expected
source code tree structure. See
<a href="https://github.com/pantsbuild/pants/tree/master/testprojects/maven_layout"><code>testprojects/maven_layout</code></a>
for examples of using this style source tree.</p>

<table class="h-plus-pilcrow">
<tbody>
<tr>
<td class="h-plus-pilcrow-holder"><h3 id="organized-by-language">Organized by Language</h3></td>
<td><div class="pilcrow-div">
<a class="pilcrow-link" href="#organized-by-language">¶</a>
</div></td>
</tr>
</tbody>
</table>

<p>If your top-level <code>BUILD</code> file is <code>top/BUILD</code> and your main Java code is
in <code>top/src/java/com/foo/</code> and your Java tests are in
<code>top/src/javatest/com/foo/</code>, then your top-level <code>BUILD</code> file might look
like:</p>
<div class="codehilite"><pre><span class="c"># top/BUILD</span>
<span class="n">source_root</span><span class="p">(</span><span class="s">'src/java'</span><span class="p">)</span>
<span class="n">source_root</span><span class="p">(</span><span class="s">'src/javatest'</span><span class="p">)</span>
<span class="o">...</span>
</pre></div>
<p>Pants can optionally enforce that only certain target types are allowed
under each source root:</p>
<div class="codehilite"><pre><span class="c"># top/BUILD</span>
<span class="n">source_root</span><span class="p">(</span><span class="s">'src/java'</span><span class="p">,</span> <span class="n">annotation_processor</span><span class="p">,</span> <span class="n">doc</span><span class="p">,</span> <span class="n">jvm_binary</span><span class="p">,</span> <span class="n">java_library</span><span class="p">,</span> <span class="n">page</span><span class="p">)</span>
<span class="n">source_root</span><span class="p">(</span><span class="s">'src/javatest'</span><span class="p">,</span> <span class="n">doc</span><span class="p">,</span> <span class="n">java_library</span><span class="p">,</span> <span class="n">java_tests</span><span class="p">,</span> <span class="n">page</span><span class="p">)</span>
<span class="o">...</span>
</pre></div>

<table class="h-plus-pilcrow">
<tbody>
<tr>
<td class="h-plus-pilcrow-holder"><h3 id="organized-by-project">Organized by Project</h3></td>
<td><div class="pilcrow-div">
<a class="pilcrow-link" href="#organized-by-project">¶</a>
</div></td>
</tr>
</tbody>
</table>

<p>If your top-level <code>BUILD</code> file is <code>top/BUILD</code> and the Java code for your
Theodore and Hank projects live in <code>top/theodore/src/java/com/foo/</code>,
then your top-level <code>BUILD</code> file might not contain any <code>source_root</code>
statements. Instead, <code>theodore/BUILD</code> and <code>hank/BUILD</code> might look like:</p>
<div class="codehilite"><pre><span class="c"># top/(project)/BUILD</span>
<span class="n">source_root</span><span class="p">(</span><span class="s">'src/java'</span><span class="p">)</span>
<span class="n">source_root</span><span class="p">(</span><span class="s">'src/javatest'</span><span class="p">)</span>
<span class="o">...</span>
</pre></div>
<p>Or:</p>
<div class="codehilite"><pre><span class="c"># top/(project)/BUILD</span>
<span class="n">source_root</span><span class="p">(</span><span class="s">'src/java'</span><span class="p">,</span> <span class="n">annotation_processor</span><span class="p">,</span> <span class="n">doc</span><span class="p">,</span> <span class="n">jvm_binary</span><span class="p">,</span> <span class="n">java_library</span><span class="p">,</span> <span class="n">page</span><span class="p">)</span>
<span class="n">source_root</span><span class="p">(</span><span class="s">'src/javatest'</span><span class="p">,</span> <span class="n">doc</span><span class="p">,</span> <span class="n">java_library</span><span class="p">,</span> <span class="n">java_tests</span><span class="p">,</span> <span class="n">page</span><span class="p">)</span>
<span class="o">...</span>
</pre></div>

<table class="h-plus-pilcrow">
<tbody>
<tr>
<td class="h-plus-pilcrow-holder"><h2 id="setting-up-build-files">Setting up <code>BUILD</code> files</h2></td>
<td><div class="pilcrow-div">
<a class="pilcrow-link" href="#setting-up-build-files">¶</a>
</div></td>
</tr>
</tbody>
</table>

<p>Pants is well-suited to large multi-project workspaces. You probably have a lot of code
organized in a big directory tree. <a href="build_files.html">The usual BUILD file advice</a>
applies here.</p>
<p><a id="setup_mvn2pants" pantsmark="setup_mvn2pants"> </a></p>
<p><strong>If you're converting a <code>mvn</code>-built workspace to use Pants</strong>, you can get a head start by using
information from your <code>pom.xml</code> files. The <a href="https://github.com/ericzundel/mvn2pants"><code>mvn2pants</code></a>
shows some scripts that convert <code>pom.xml</code> files into <code>BUILD</code> files; Square wrote and used these
to convert some projects. This can get you up and running with Pants faster. Careful, though:
Maven projects tend to be "coarser-grained" than Pants projects. Once you have things working,
you'll probably want to replace the big automatically-generated targets with things that follow
the 1:1:1 rule.</p>

<table class="h-plus-pilcrow">
<tbody>
<tr>
<td class="h-plus-pilcrow-holder"><h2 id="build-and-environment-specific-config"><code>BUILD.*</code> and environment-specific config</h2></td>
<td><div class="pilcrow-div">
<a class="pilcrow-link" href="#build-and-environment-specific-config">¶</a>
</div></td>
</tr>
</tbody>
</table>

<p>When we say <code>BUILD</code> files are named <code>BUILD</code>, we really mean <code>BUILD</code> or <tt>BUILD.<em>something</em></tt>.
If you have some rules that make sense for folks in one environment but not others, you might put
them into a separate BUILD file named <tt>BUILD.<em>something</em></tt>. For example, you might have
some <code>BUILD</code> config that you'd like to ship with your open-source code but some other parts to
keep internal. You can put open-source things in <code>BUILD.oss</code> and internal things in
<code>BUILD.internal</code>. Pants "sees" both of these. When shipping open-source code, you can hold back
the <code>BUILD.internal</code> file.</p>

<table class="h-plus-pilcrow">
<tbody>
<tr>
<td class="h-plus-pilcrow-holder"><h2 id="configure-jvm-artifact-publishing">Configure JVM Artifact Publishing</h2></td>
<td><div class="pilcrow-div">
<a class="pilcrow-link" href="#configure-jvm-artifact-publishing">¶</a>
</div></td>
</tr>
</tbody>
</table>

<p>Pants uses <code>ivy</code> to publish artifacts. To specify where it should publish those artifacts,
bring over a working <code>build-support/ivy/ivysettings.xml</code> file from a working Pants workspace
and tweak to fit your situation. You can change the location of this file in <code>pants.ini</code>:</p>
<div class="codehilite"><pre><span class="k">[ivy]</span>
<span class="err">ivy_settings:</span> <span class="err">some/other/path/ivysettings.xml</span>
</pre></div>

<table class="h-plus-pilcrow">
<tbody>
<tr>
<td class="h-plus-pilcrow-holder"><h2 id="integrate-new-tools-via-a-pants-plugin">Integrate New Tools via a Pants Plugin</h2></td>
<td><div class="pilcrow-div">
<a class="pilcrow-link" href="#integrate-new-tools-via-a-pants-plugin">¶</a>
</div></td>
</tr>
</tbody>
</table>

<p>Pants knows how to build many things, but maybe you need it to learn a new tool.
Maybe your organization has a custom linter, a custom code generator, or some other custom tool.
Maybe your organization uses a tool that, while not custom, has not yet been integrated with Pants.</p>
<ul>
<li>If your organization has some custom tools to integrate, set up a
    <a href="howto_plugin.html">Pants plugin</a>.</li>
<li>If you want to integrate with a not-custom tool, you still want to
    set up a Pants plugin (or perhaps add abilities to an existing
    plugin), but it might make sense to
    <a href="howto_contribute.html">get your changes in upstream</a>.</li>
</ul>

<table class="h-plus-pilcrow">
<tbody>
<tr>
<td class="h-plus-pilcrow-holder"><h2 id="build-in-the-source-tree-for-special-targets"><code>BUILD.*</code> in the source tree for special targets</h2></td>
<td><div class="pilcrow-div">
<a class="pilcrow-link" href="#build-in-the-source-tree-for-special-targets">¶</a>
</div></td>
</tr>
</tbody>
</table>

<p>If you distribute code to different organizations, you might want to
expose some targets to one organization but not to another. You can do
this by defining those targets in a <code>BUILD.*</code> file. You can give that
file to some people and not give it to others. This code will be
processed by people invoking pants on this directory only if they have
the file.</p>
<p>For example, you might work at the Foo Corporation, which maintains a
fleet of machines to run big test jobs. You might define a humungous
test job as a convenient way to send many many tests to the fleet:</p>
<div class="codehilite"><pre><span class="c"># src/javatest/com/foo/BUILD.foo</span>

<span class="c"># many-many test: Run this on the fleet, not your workstation</span>
<span class="c"># (unless you want to wait a few hours for results)</span>
<span class="n">junit_tests</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">'many-many'</span><span class="p">,</span>
<span class="n">dependencies</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s">'bar:all'</span><span class="p">,</span>
  <span class="s">'baz:all'</span><span class="p">,</span>
  <span class="s">'garply:all'</span><span class="p">,</span>
<span class="p">])</span>
</pre></div>
<p>If you don't want to make this test definition available to the public
(lest they complain about how long it takes), you might put this in a
BUILD.foo file and hold back this file when mirroring for the public
repository.</p>
<p><a id="setup_publish" pantsmark="setup_publish"></a></p>

<table class="h-plus-pilcrow">
<tbody>
<tr>
<td class="h-plus-pilcrow-holder"><h2 id="enabling-pants-publish">Enabling Pants Publish</h2></td>
<td><div class="pilcrow-div">
<a class="pilcrow-link" href="#enabling-pants-publish">¶</a>
</div></td>
</tr>
</tbody>
</table>

<p>Pants can ease
<a href="publish.html">"publishing"</a>: uploading versioned compiled
artifacts. There are some special things to set up to enable and
customize publishing.</p>

<table class="h-plus-pilcrow">
<tbody>
<tr>
<td class="h-plus-pilcrow-holder"><h3 id="tell-pants-about-your-artifact-repository">Tell Pants about your Artifact Repository</h3></td>
<td><div class="pilcrow-div">
<a class="pilcrow-link" href="#tell-pants-about-your-artifact-repository">¶</a>
</div></td>
</tr>
</tbody>
</table>

<p>To tell Pants which artifact repsitory to publish to,</p>
<p><a href="howto_plugin.html">Create a plugin</a>
if you haven't already. Register it with Pants.</p>
<p>In the plugin, define and register a <code>Repository</code> in a <code>BUILD</code> file alias
as shown in
<a href="https://github.com/pantsbuild/pants/blob/master/src/python/internal_backend/repositories/register.py"><code>src/python/internal_backend/repositories/register.py</code></a>.</p>
<p><code>BUILD</code> targets can use this Repository's alias as the <code>repo</code> parameter
to an <a href="build_dictionary.html#bdict_artifact" pantsref="bdict_artifact"><code>artifact</code></a>. For example, the
<code>src/java/com/pants/examples/hello/greet/BUILD</code> refers to the <code>public</code>
repostiory defined above. (Notice it's a Python object, not a string.)</p>
<div class="codehilite"><pre><span class="n">provides</span> <span class="o">=</span> <span class="n">artifact</span><span class="p">(</span><span class="n">org</span><span class="o">=</span><span class="s">'com.pants.examples'</span><span class="p">,</span>
                    <span class="n">name</span><span class="o">=</span><span class="s">'hello-greet'</span><span class="p">,</span>
                    <span class="n">repo</span><span class="o">=</span><span class="n">public</span><span class="p">,)</span>
</pre></div>
<p>If you get an error that the repo name (here, <code>public</code>) isn't defined,
your plugin didn't register with Pants successfully. Make sure you
bootstrap Pants in a way that loads your <code>register.py</code>.</p>
<p>In your config file (usually <code>pants.ini</code>), set up a <code>[jar-publish]</code>
section. In that section, create a <code>dict</code> called <code>repos</code>. It should
contain a section for each Repository:</p>
<div class="codehilite"><pre>repos: {
  'public': {  # must match the alias above
    'resolver': 'maven.twttr.com', # must match URL above and &lt;url&gt; name
                                   # in ivysettings.xml
    'confs': ['default', 'sources', 'docs', 'changelog'],
    # 'auth': 'build-support:netrc',
    # 'help': 'Configure your ~/.netrc for artifactory access.
  },
  'testing': { # this key must match the alias name above
    'resolver': 'maven.twttr.com',
    'confs': ['default', 'sources', 'docs', 'changelog'],
    # 'auth': 'build-support:netrc',
    # 'help': 'Configure your ~/.netrc for artifactory access.
  },
}
</pre></div>
<p><a id="setup_publish_restrict_branch" pantsmark="setup_publish_restrict_branch"> </a></p>

<table class="h-plus-pilcrow">
<tbody>
<tr>
<td class="h-plus-pilcrow-holder"><h3 id="restricting-publish-to-release-branch">Restricting Publish to "Release Branch"</h3></td>
<td><div class="pilcrow-div">
<a class="pilcrow-link" href="#restricting-publish-to-release-branch">¶</a>
</div></td>
</tr>
</tbody>
</table>

<p>Your organization might have a notion of a special "release branch": you
want
<a href="publish.html">artifact publishing</a>
to happen on this source control
branch, which you maintain extra-carefully. You can set this branch
using the <code>restrict_push_branches</code> option of the <code>[jar-publish]</code> section
of your config file (usually <code>pants.ini</code>).</p>

<table class="h-plus-pilcrow">
<tbody>
<tr>
<td class="h-plus-pilcrow-holder"><h3 id="task-to-publish-extra-artifacts">Task to Publish "Extra" Artifacts</h3></td>
<td><div class="pilcrow-div">
<a class="pilcrow-link" href="#task-to-publish-extra-artifacts">¶</a>
</div></td>
</tr>
</tbody>
</table>

<p>Pants supports "publish plugins", which allow end-users to add
additional, arbitrary files to be published along with the primary
artifact. For example, let's say that along with publishing your jar
full of class files, you would also like to publish a companion file
that contains some metadata -- code coverage info, source git
repository, java version that created the jar, etc. By
<a href="dev_tasks.html">developing a task</a>
in a <a href="howto_plugin.html">plugin</a>,
you give Pants a new ability.
<a href="dev_tasks_publish_extras.html">Develop a Task to Publish "Extra" Artifacts</a>
to find out how to
develop a special Task to include "extra" data with published artifacts.</p>

<!-- main content end -->
</div>

         <footer>
  
    <div class="rst-footer-buttons">
  <hr/>

  <p>
      &copy; Copyright, Pants project contributors.<br>
      Generated by <a href="http://pantsbuild.github.io/docs.html">publish_docs</a> dist/markdown/html/src/docs/setup_repo.html 2014-12-07T16:14:07.209460
  </p>

  Theme provided by <a href="http://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>
   </section>

  </div>
  

</body>
</html>
