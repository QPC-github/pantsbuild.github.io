

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>BUILD files &mdash; pants 0.1 documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/pants-logo.ico"/>
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  

    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:'./',
        VERSION:'0.1',
        COLLAPSE_INDEX:false,
        FILE_SUFFIX:'.html',
        HAS_SOURCE:  true
      };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
    <link rel="top" title="pants 0.1 documentation" href="index.html"/>
        <link rel="next" title="Invoking Pants Build" href="invoking.html"/>
        <link rel="prev" title="README Files and Markdown" href="page.html"/>
 
<script type="text/javascript">
  // In a plain template, we'd put this in the footer block.
  // In the read-the-docs template, there is no footer. So use jQuery ready:
  $(document).ready(function() {
    // Ping Google analytics
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-39101739-2', 'auto');
    ga('send', 'pageview');

    // Show the travis-ci status graphic
    $('.wy-breadcrumbs').append(
      '<div style="float: right;">' +
      '<a href="https://travis-ci.org/pantsbuild/pants">' +
      '<img src="https://travis-ci.org/pantsbuild/pants.png?branch=master">' +
      '</a></div>');
  });
</script>
<style type="text/css">
/* Shoehorn in pants logo */
body .icon-home:before {
   content: "";
}

body .icon-home{
  background: transparent url(./_static/pants-logo.ico) center left no-repeat;
  background-position-x: 5px;
  padding-left: 40px;
  padding-right: 35px;
  line-height: 40px;
}

body a.icon-home:hover{
  background: #3d8cbf url(./_static/pants-logo.ico) center left no-repeat;
  background-position-x: 5px;
}

</style>


  <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="index.html" class="icon icon-home"> pants</a>
        <form class="wy-form" action="search.html" method="get">
  <input type="text" name="q" placeholder="Search docs" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="first_concepts.html">Pants Conceptual Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="first_concepts.html#goals-and-targets">Goals and Targets</a></li>
<li class="toctree-l2"><a class="reference internal" href="first_concepts.html#target-types">Target Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="first_concepts.html#what-pants-does">What Pants Does</a></li>
<li class="toctree-l2"><a class="reference internal" href="first_concepts.html#next-step">Next Step</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="first_tutorial.html">First Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="first_tutorial.html#invoking-pants">Invoking Pants</a></li>
<li class="toctree-l2"><a class="reference internal" href="first_tutorial.html#build-files">BUILD Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="first_tutorial.html#the-usual-commands">The Usual Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="first_tutorial.html#next">Next</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="target_addresses.html">Target Addresses</a></li>
<li class="toctree-l1"><a class="reference internal" href="JVMProjects.html">JVM Projects with Pants</a><ul>
<li class="toctree-l2"><a class="reference internal" href="JVMProjects.html#relevant-goals-and-targets">Relevant Goals and Targets</a></li>
<li class="toctree-l2"><a class="reference internal" href="JVMProjects.html#build-for-a-simple-binary">BUILD for a Simple Binary</a></li>
<li class="toctree-l2"><a class="reference internal" href="JVMProjects.html#the-usual-commands-jvm">The Usual Commands: JVM</a></li>
<li class="toctree-l2"><a class="reference internal" href="JVMProjects.html#toolchain">Toolchain</a></li>
<li class="toctree-l2"><a class="reference internal" href="JVMProjects.html#java7-vs-java6-which-java">Java7 vs Java6, Which Java</a></li>
<li class="toctree-l2"><a class="reference internal" href="JVMProjects.html#bundles-deploy-able-runnable-file-trees">Bundles: Deploy-able Runnable File Trees</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="python-readme.html">Python Projects with Pants</a><ul>
<li class="toctree-l2"><a class="reference internal" href="python-readme.html#relevant-goals-and-targets">Relevant Goals and Targets</a></li>
<li class="toctree-l2"><a class="reference internal" href="python-readme.html#build-for-a-simple-binary">BUILD for a Simple Binary</a></li>
<li class="toctree-l2"><a class="reference internal" href="python-readme.html#handling-python-requirement">Handling <tt class="docutils literal"><span class="pre">python_requirement</span></tt></a></li>
<li class="toctree-l2"><a class="reference internal" href="python-readme.html#pex-contents">PEX Contents</a></li>
<li class="toctree-l2"><a class="reference internal" href="python-readme.html#repl-and-environment-manipulation-with-pants-py">REPL and environment manipulation with <cite>pants py</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="python-readme.html#python-binary-entry-point">python_binary entry_point</a></li>
<li class="toctree-l2"><a class="reference internal" href="python-readme.html#more-about-python-tests">More About Python Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="python-readme.html#manipulating-pex-behavior-with-environment-variables">Manipulating PEX behavior with environment variables</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="page.html">README Files and Markdown</a><ul>
<li class="toctree-l2"><a class="reference internal" href="page.html#markdown-to-html">Markdown to HTML</a></li>
<li class="toctree-l2"><a class="reference internal" href="page.html#link-to-another-page">Link to Another <tt class="docutils literal"><span class="pre">page</span></tt></a></li>
<li class="toctree-l2"><a class="reference internal" href="page.html#publishing">Publishing</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">BUILD files</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#debugging-a-build-file">Debugging a BUILD File</a></li>
<li class="toctree-l2"><a class="reference internal" href="#default-target">Default Target</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-1-1-1-rule">The 1:1:1 Rule</a></li>
<li class="toctree-l2"><a class="reference internal" href="#avoid-rglobs">Avoid rglobs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#define-separate-targets-for-interface-and-implementation">Define Separate Targets for Interface and Implementation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#depend-on-api-in-library-targets-implementation-in-binary-targets">Depend on API in Library Targets, Implementation in Binary Targets</a></li>
<li class="toctree-l2"><a class="reference internal" href="#which-build-files-are-executed-and-how">Which <tt class="docutils literal"><span class="pre">BUILD</span></tt> Files are &#8220;Executed&#8221;? (and how?)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id1">BUILD.* files</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="invoking.html">Invoking Pants Build</a><ul>
<li class="toctree-l2"><a class="reference internal" href="invoking.html#rc-files">rc files</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tshoot.html">Troubleshooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tshoot.html#maximum-verbosity">Maximum Verbosity</a></li>
<li class="toctree-l2"><a class="reference internal" href="tshoot.html#scrub-the-environment">Scrub the Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="tshoot.html#nailgun-5-seconds">Nailgun 5 seconds</a></li>
<li class="toctree-l2"><a class="reference internal" href="tshoot.html#questions-issues-bug-reports">Questions, Issues, Bug Reports</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="3rdparty.html">Third-Party Dependencies</a><ul>
<li class="toctree-l2"><a class="reference internal" href="3rdparty_jvm.html">JVM 3rdparty Pattern</a></li>
<li class="toctree-l2"><a class="reference internal" href="3rdparty_py.html">Python 3rdparty Pattern</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ThriftDeps.html">Using Pants with Thrift Dependencies</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ThriftDeps.html#generating-code">Generating Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="ThriftDeps.html#thrift-example">Thrift Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="ThriftDeps.html#publishing">Publishing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="publish.html">Publishing Artifacts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="publish.html#life-of-a-publish">Life of a Publish</a></li>
<li class="toctree-l2"><a class="reference internal" href="publish.html#how-to">How To</a></li>
<li class="toctree-l2"><a class="reference internal" href="publish.html#restricting-to-release-branch">Restricting to &#8220;Release Branch&#8221;</a></li>
<li class="toctree-l2"><a class="reference internal" href="publish.html#authenticating-to-the-artifact-repository">Authenticating to the Artifact Repository</a></li>
<li class="toctree-l2"><a class="reference internal" href="publish.html#troubleshooting">Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="publish.html#want-to-publish-something-publish-many-things">Want to Publish Something? Publish Many Things</a></li>
<li class="toctree-l2"><a class="reference internal" href="publish.html#test-with-a-fake-local-publish">Test with a Fake Local &#8220;Publish&#8221;</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="with_intellij.html">Using Pants with IntelliJ IDEA</a><ul>
<li class="toctree-l2"><a class="reference internal" href="with_intellij.html#pants-build-plugin-for-intellij">Pants Build Plugin for IntelliJ</a></li>
<li class="toctree-l2"><a class="reference internal" href="with_intellij.html#generating-idea-project">Generating IDEA Project</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="setup_repo.html">Set up Your Source Tree for Pants</a><ul>
<li class="toctree-l2"><a class="reference internal" href="setup_repo.html#configuring-with-pants-ini">Configuring with <tt class="docutils literal"><span class="pre">pants.ini</span></tt></a></li>
<li class="toctree-l2"><a class="reference internal" href="setup_repo.html#configure-code-layout-with-source-root">Configure Code Layout with <cite>source_root</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="setup_repo.html#top-level-build-for-tree-global-config">Top-level <cite>BUILD.*</cite> for tree-global config</a></li>
<li class="toctree-l2"><a class="reference internal" href="setup_repo.html#build-in-the-source-tree-for-special-targets">BUILD.* in the source tree for special targets</a></li>
<li class="toctree-l2"><a class="reference internal" href="setup_repo.html#restricting-publish-to-release-branch">Restricting Publish to &#8220;Release Branch&#8221;</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installing Pants</a><ul>
<li class="toctree-l2"><a class="reference internal" href="install.html#pex-based-installation">PEX-based Installation</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="build_dictionary.html">BUILD Dictionary</a><ul>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#file">__file__</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#amount">Amount</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#android-binary">android_binary</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#android-resources">android_resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#annotation-processor">annotation_processor</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#artifact">artifact</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#benchmark">benchmark</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#bundle">bundle</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#credentials">credentials</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#dependencies">dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#egg">egg</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#exclude">exclude</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#globs">globs</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#goal">goal</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#jar">jar</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#jar-library">jar_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#java-agent">java_agent</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#java-antlr-library">java_antlr_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#java-library">java_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#java-protobuf-library">java_protobuf_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#java-tests">java_tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#java-thrift-library">java_thrift_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#jaxb-library">jaxb_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#junit-tests">junit_tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#jvm-app">jvm_app</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#jvm-binary">jvm_binary</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#maven-layout">maven_layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#netrc">netrc</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#page">page</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#pants">pants</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#phase">phase</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#python-antlr-library">python_antlr_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#python-binary">python_binary</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#python-library">python_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#python-requirement">python_requirement</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#python-requirement-library">python_requirement_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#python-requirements">python_requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#python-test-suite">python_test_suite</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#python-tests">python_tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#python-thrift-library">python_thrift_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#repo">repo</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#resources">resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#rglobs">rglobs</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#root-dir">ROOT_DIR</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#scala-library">scala_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#scala-specs">scala_specs</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#scala-tests">scala_tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#scalac-plugin">scalac_plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#setup-py">setup_py</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#source-root">source_root</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#time">Time</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#wiki">wiki</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#wiki-artifact">wiki_artifact</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="goals_reference.html">Goals Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#bench">bench</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#binary">binary</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#bootstrap">bootstrap</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#builddict">builddict</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#buildlint">buildlint</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#bundle">bundle</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#check-exclusives">check-exclusives</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#check-published-deps">check_published_deps</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#clean-all">clean-all</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#clean-all-async">clean-all-async</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#compile">compile</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#dependees">dependees</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#dependencies">dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#depmap">depmap</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#detect-duplicates">detect-duplicates</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#doc">doc</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#eclipse">eclipse</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#filedeps">filedeps</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#filemap">filemap</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#filter">filter</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#gen">gen</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#goals">goals</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#gref-phase-idea">idea</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#imports">imports</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#invalidate">invalidate</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#jar">jar</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#killserver">killserver</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#list">list</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#markdown">markdown</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#minimize">minimize</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#ng-killall">ng-killall</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#path">path</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#pathdeps">pathdeps</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#paths">paths</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#provides">provides</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#publish">publish</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#repl">repl</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#repl-dirty">repl-dirty</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#resolve">resolve</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#resources">resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#roots">roots</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#run">run</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#run-dirty">run-dirty</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#server">server</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#sort">sort</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#targets">targets</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#test">test</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#common">Common</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="dev.html">Pants Developer Center</a><ul>
<li class="toctree-l2"><a class="reference internal" href="howto_contribute.html">Pants Contributors Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_ask.html">How To Ask</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_develop.html">Pants Developers Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="dev_tasks.html">Task Developer&#8217;s Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="intellij.html">Pants Development with IntelliJ IDEA</a></li>
<li class="toctree-l2"><a class="reference internal" href="internals.html">Pants Internals</a></li>
<li class="toctree-l2"><a class="reference internal" href="release.html">Release Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="docs.html">About the documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="credits.html">Credits</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top">
        <i data-toggle="wy-nav-top" class="icon icon-reorder"></i>
        <a href="/">pants</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <ul class="wy-breadcrumbs">
  <li><a href="index.html">Docs</a> &raquo;</li>
  <li><a href="">BUILD files</a></li>
  
</ul>
<hr/>

          
  <div class="section" id="build-files">
<h1>BUILD files<a class="headerlink" href="#build-files" title="Permalink to this headline">¶</a></h1>
<p>To tell Pants about your source code, you have files named <tt class="docutils literal"><span class="pre">BUILD</span></tt> in
directories of your source tree. These files define build-able targets
and specify source code layout. This page goes into some detail about
<tt class="docutils literal"><span class="pre">BUILD</span></tt> files. If you instead wanted API docs for things defined in
<tt class="docutils literal"><span class="pre">BUILD</span></tt> files (<tt class="docutils literal"><span class="pre">java_library</span></tt>, <tt class="docutils literal"><span class="pre">python_binary</span></tt>, etc.), please see the
<a class="reference internal" href="build_dictionary.html"><em>BUILD Dictionary</em></a>. If you want less detail-y
information about <tt class="docutils literal"><span class="pre">BUILD</span></tt> files, <a class="reference internal" href="first_tutorial.html"><em>First Tutorial</em></a> is a good place
to start.</p>
<p><tt class="docutils literal"><span class="pre">BUILD</span></tt> files are little Python scripts with
<a class="reference internal" href="build_dictionary.html"><em>some useful functions</em></a>
automatically imported. Thus, function invocations look
<tt class="docutils literal"><span class="pre">like(this)</span></tt>, lists look <tt class="docutils literal"><span class="pre">[like,</span> <span class="pre">this]</span></tt>, and dictionaries (hashmaps)
look <tt class="docutils literal"><span class="pre">{&quot;like&quot;:</span> <span class="pre">&quot;this&quot;}</span></tt>; Python&#8217;s syntax uses
<a class="reference external" href="http://en.wikipedia.org/wiki/Python_syntax_and_semantics#Indentation">indentation</a>
to indicate scope; if you copy-paste some <tt class="docutils literal"><span class="pre">BUILD</span></tt> code from one place to
another, you might need to adjust the indentation. You can
<a class="reference external" href="http://docs.python.org/tutorial">learn more about Python</a>,
but you should be able to &#8220;get along&#8221; in <tt class="docutils literal"><span class="pre">BUILD</span></tt> files if you know
functions, lists, dictionaries, and indentation.</p>
<div class="section" id="debugging-a-build-file">
<span id="debugging"></span><h2>Debugging a BUILD File<a class="headerlink" href="#debugging-a-build-file" title="Permalink to this headline">¶</a></h2>
<p>If you&#8217;re curious to know how Pants interprets your <tt class="docutils literal"><span class="pre">BUILD</span></tt> file, these
goals can be especially helpful:</p>
<p><tt class="docutils literal"><span class="pre">list</span></tt> Did I define the targets I meant to?</p>
<div class="highlight-python"><div class="highlight"><pre>$ ./pants goal list src/java/com/pants/examples/hello/greet
src/java/com/pants/examples/hello/greet/BUILD:greet
</pre></div>
</div>
<p><tt class="docutils literal"><span class="pre">list</span> <span class="pre">::</span></tt> List <strong>every</strong> target to find out:
Did a change in one <tt class="docutils literal"><span class="pre">BUILD</span></tt> file break others?</p>
<div class="highlight-python"><div class="highlight"><pre>$ ./pants goal list ::
  ...lots of output...
  File &quot;pants/targets/internal.py&quot;, line 174, in dependencies
  File &quot;pants/targets/internal.py&quot;, line 189, in _maybe_apply_deps
  File &quot;pants/targets/internal.py&quot;, line 195, in update_dependencies
  File &quot;pants/targets/pants_target.py&quot;, line 60, in resolve
KeyError: &#39;Failed to find target for: src/python/pants/docs/BUILD:obsolete&#39;
$ # Instead of listing all targets, a strack trace. We found a problem
</pre></div>
</div>
<p><tt class="docutils literal"><span class="pre">depmap</span></tt> Do I pull in the dependencies I expect?
(JVM languages only) This lists dependencies from your source; it doesn&#8217;t catch
dependencies pulled in from 3rdparty <tt class="docutils literal"><span class="pre">.jars</span></tt>. For example, here it shows
that <tt class="docutils literal"><span class="pre">main-bin</span></tt> depends on the 3rdparty <tt class="docutils literal"><span class="pre">log4j</span></tt> jar, but not that
<tt class="docutils literal"><span class="pre">log4j</span></tt> depends on <tt class="docutils literal"><span class="pre">javax.mail</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre>$ ./pants goal depmap src/java/com/pants/examples/hello/main
internal-src.java.com.pants.examples.hello.main.main
  internal-src.java.com.pants.examples.hello.main.main-bin
    internal-src.java.com.pants.examples.hello.greet.greet
    log4j-log4j-1.2.15
</pre></div>
</div>
<p><tt class="docutils literal"><span class="pre">filedeps</span></tt> What source files do I depend on?</p>
<div class="highlight-python"><div class="highlight"><pre>$ ./pants goal filedeps src/java/com/pants/examples/hello/main
~archie/workspace/pants/src/java/com/pants/examples/hello/greet/BUILD
~archie/workspace/pants/src/java/com/pants/examples/hello/greet/Greeting.java
~archie/workspace/pants/src/java/com/pants/examples/hello/main/BUILD
~archie/workspace/pants/src/java/com/pants/examples/hello/main/config/log4j.properties
~archie/workspace/pants/src/java/com/pants/examples/hello/main/HelloMain.java
</pre></div>
</div>
</div>
<div class="section" id="default-target">
<span id="usage-default-target"></span><h2>Default Target<a class="headerlink" href="#default-target" title="Permalink to this headline">¶</a></h2>
<p>A build target with the same name as the <tt class="docutils literal"><span class="pre">BUILD</span></tt> file&#8217;s containing
directory is the <em>default target</em>. To signal &#8220;<em>this</em> is the main useful
target here&#8221; and as a convenience to users, you should always have a default.</p>
<p>Consider these libraries that use <tt class="docutils literal"><span class="pre">tugboat</span></tt> functionality. You can see that
this code depends on just the default <tt class="docutils literal"><span class="pre">tugboat</span></tt> target, and thus uses just core
functionality:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># depends on plain ol&#39; tugboat</span>
<span class="n">java_library</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;theodore&#39;</span><span class="p">,</span>
  <span class="n">dependencies</span><span class="o">=</span><span class="p">[</span>
    <span class="n">pants</span><span class="p">(</span><span class="s">&#39;src/java/com/twitter/tugboat&#39;</span><span class="p">),</span>
  <span class="p">],</span>
  <span class="n">sources</span><span class="o">=</span><span class="n">globs</span><span class="p">(</span><span class="s">&#39;*.java&#39;</span><span class="p">),</span>
<span class="p">)</span>
</pre></div>
</div>
<p>You can tell this code uses optional functionality because it depends on a specific
non-default target:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># depends on optional tugboat functionality</span>
<span class="n">java_library</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;hank&#39;</span><span class="p">,</span>
  <span class="n">dependencies</span><span class="o">=</span><span class="p">[</span>
    <span class="n">pants</span><span class="p">(</span><span class="s">&#39;src/java/com/twitter/tugboat:hispeed&#39;</span><span class="p">),</span>
  <span class="p">],</span>
  <span class="n">sources</span><span class="o">=</span><span class="n">globs</span><span class="p">(</span><span class="s">&#39;*.java&#39;</span><span class="p">),</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Default targets are more convenient to reference on the command line and less
verbose as build dependencies. For example, consider the following names for the
same target:</p>
<div class="highlight-python"><div class="highlight"><pre>src/java/com/twitter/tugboat/BUILD:tugboat  # absolute target name
src/java/com/twitter/tugboat/BUILD          # references default target &quot;tugboat&quot;
src/java/com/twitter/tugboat   # references default build file &quot;BUILD&quot; and default target &quot;tugboat&quot;
src/java/com/twitter/tugboat/  # trailing slashes are ignored - useful for command-line completion
</pre></div>
</div>
<p>By providing a target with the default name, you simplify interacting with your target from the
command-line. This gives users a better experience using your library.
In BUILD files, dependencies are less verbose, which improves readability.</p>
</div>
<div class="section" id="the-1-1-1-rule">
<h2>The 1:1:1 Rule<a class="headerlink" href="#the-1-1-1-rule" title="Permalink to this headline">¶</a></h2>
<p>Your code&#8217;s organization, including <tt class="docutils literal"><span class="pre">BUILD</span></tt> target configuration, makes
building easier or harder. Some folks summarize clear and scalable code
layout choice
with the <strong>1:1:1</strong> rule of thumb:</p>
<ul class="simple">
<li><strong>1 Folder</strong></li>
<li><strong>1 Package</strong></li>
<li><strong>1 BUILD Target</strong></li>
</ul>
<p>If there&#8217;s a set of code that usually goes together, it makes sense for it to
be in one folder using one package namespace.
The folder should have a <tt class="docutils literal"><span class="pre">BUILD</span></tt> file with one target to build that set of
code.</p>
<p>If there&#8217;s a subset of code that <em>doesn&#8217;t</em> usually go together with the rest
of the code in some directory/target, it makes sense to move that code out
into another folder and its own package namespace.
The new folder should have its own <tt class="docutils literal"><span class="pre">BUILD</span></tt> file containing a target to build
that code.</p>
<p>Code belongs at the &#8220;leaves&#8221; of your directory tree. E.g., if
<tt class="docutils literal"><span class="pre">.../foo/Foo.java</span></tt> exists, you don&#8217;t want to create <tt class="docutils literal"><span class="pre">.../foo/bar/Bar.java</span></tt>
in a subdirectory. (Or if you do, then you want to move the other foo
code to <tt class="docutils literal"><span class="pre">../foo/justfoonotbar/Foo.java</span></tt> or somesuch.) This keeps all the code
for a package in 1 Folder, 1 BUILD target.</p>
<p><strong>1:1:1</strong>  is a &#8220;rule of thumb&#8221;, not a law.
If your code breaks this rule, it will still build.
<strong>1:1:1</strong> tends to make your code easier to work with.</p>
<p>If you&#8217;re new to Pants, you might feel overwhelmed by all these <tt class="docutils literal"><span class="pre">BUILD</span></tt>
files; you might think it&#8217;s simpler to have fewer of them: maybe just one
<tt class="docutils literal"><span class="pre">BUILD</span></tt> file in the &#8220;top folder&#8221; for a project that builds code from
several directories. But this &#8220;target coarseness&#8221; can waste your time:
you have a huge target that depends on everything that your source depends on.
If you divide your code into smaller, coherent targets, each of those targets
has only a subset of those dependencies.</p>
</div>
<div class="section" id="avoid-rglobs">
<span id="usage-avoid-rglobs"></span><h2>Avoid rglobs<a class="headerlink" href="#avoid-rglobs" title="Permalink to this headline">¶</a></h2>
<p>Many pants targets have <cite>sources</cite>, a list of filenames owned by the target.
It&#8217;s common pattern to specify source files with <cite>globs</cite>; it&#8217;s a common
<em>anti-pattern</em>, especially in targets hastily converted from Maven poms,
to specify source files with <cite>rglobs</cite>, the recursive version of <cite>globs</cite>.</p>
<p>While valid, <cite>rglobs</cite> increases the chances of multiple targets
claiming the same sources. Consider the following refactor adding a
subpackage:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># &#39;maint&#39; subpackage has been added.</span>
<span class="n">src</span><span class="o">/</span><span class="n">java</span><span class="o">/</span><span class="n">com</span><span class="o">/</span><span class="n">twitter</span><span class="o">/</span><span class="n">tugboat</span><span class="o">/</span><span class="n">BUILD</span>
<span class="n">src</span><span class="o">/</span><span class="n">java</span><span class="o">/</span><span class="n">com</span><span class="o">/</span><span class="n">twitter</span><span class="o">/</span><span class="n">tugboat</span><span class="o">/</span><span class="n">Tugboat</span><span class="o">.</span><span class="n">java</span>
<span class="n">src</span><span class="o">/</span><span class="n">java</span><span class="o">/</span><span class="n">com</span><span class="o">/</span><span class="n">twitter</span><span class="o">/</span><span class="n">tugboat</span><span class="o">/</span><span class="n">maint</span><span class="o">/</span><span class="n">BUILD</span>
<span class="n">src</span><span class="o">/</span><span class="n">java</span><span class="o">/</span><span class="n">com</span><span class="o">/</span><span class="n">twitter</span><span class="o">/</span><span class="n">tugboat</span><span class="o">/</span><span class="n">maint</span><span class="o">/</span><span class="n">MaintenanceLog</span><span class="o">.</span><span class="n">java</span>

<span class="c"># target src/java/com/twitter/tugboat</span>
<span class="c"># Existing target now untentionally claims the &#39;maint&#39; package.</span>
<span class="n">java_library</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;tugboat&#39;</span><span class="p">,</span>
  <span class="n">sources</span><span class="o">=</span><span class="n">rglobs</span><span class="p">(</span><span class="s">&#39;*.java&#39;</span><span class="p">),</span>
<span class="p">)</span>

<span class="c"># target src/java/com/twitter/tugboat/maint</span>
<span class="c"># Sources are claimed by multiple targets.</span>
<span class="n">java_library</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;maint&#39;</span><span class="p">,</span>
  <span class="n">sources</span><span class="o">=</span><span class="n">globs</span><span class="p">(</span><span class="s">&#39;*.java&#39;</span><span class="p">),</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Existing tugboat users now depend on tugboat&#8217;s <cite>maint</cite> package, even though the dependency was
never intended. <strong>Avoiding rglobs helps avoid surprises.</strong></p>
<p>Using <tt class="docutils literal"><span class="pre">rglobs</span></tt> also makes it easy to fall into making circular dependencies. You want to avoid
circular dependencies. If you later want to factor your big target into a few
focused-purpose targets, you&#8217;ll have to untangle those circular dependencies.</p>
<p>When a target should claim files in subpackages, it&#8217;s both easy and recommended to explicitly list
which subpackages should be claimed.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># target src/java/com/twitter/tugboat</span>
<span class="c"># Intentionally claims the &#39;maint&#39; package.</span>
<span class="n">java_library</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;tugboat&#39;</span><span class="p">,</span>
  <span class="n">sources</span><span class="o">=</span><span class="n">globs</span><span class="p">(</span>
    <span class="s">&#39;*.java&#39;</span><span class="p">,</span>
    <span class="s">&#39;maint/*.java&#39;</span><span class="p">,</span>
  <span class="p">),</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="define-separate-targets-for-interface-and-implementation">
<h2>Define Separate Targets for Interface and Implementation<a class="headerlink" href="#define-separate-targets-for-interface-and-implementation" title="Permalink to this headline">¶</a></h2>
<p>If your code defines an API to be used by other modules, define a target
that builds just that interface.</p>
<p>Many programs provide a plugin interface so users can provide their own functionality. For example,
a tool might define a <cite>DataImporter</cite> interface and let users provide
plugins for each data source.</p>
<p>The simple approach of providing a single BUILD target for both interface and implementations has a
significant drawback: anyone wishing to implement the interface must depend on all dependencies
for all implementations co-published with the interface. The classpath bloats.
The risk of dependency conflicts increases greatly. For example:</p>
<div class="highlight-python"><div class="highlight"><pre># Less than ideal layout - interface and implementations together.
src/java/com/twitter/etl/from/BUILD
src/java/com/twitter/etl/from/DataImporter.java
src/java/com/twitter/etl/from/FileDataImporter.java
src/java/com/twitter/etl/from/HBaseDataImporter.java

# DO NOT bundle interface and implementations - forces extra dependencies.
java_library(name=&#39;from&#39;,
  dependencies=[
    pants(&#39;3rdparty/jvm/org/apache/hbase&#39;),
  ],
  sources=globs(&#39;*.java&#39;),
)
</pre></div>
</div>
<p>An improved code organization uses separate packages when many fellow travelers are introduced. For
example, if <tt class="docutils literal"><span class="pre">FileDataImporter.java</span></tt> only uses standard library classes its entirely appropriate to
package it with the interface. HBase, however, its quite large itself, has many transitive
dependencies, and is only required by jobs that actually read from HBase. <strong>Implementations with
many fellow travelers should be published as separate pants targets.</strong></p>
<div class="highlight-python"><div class="highlight"><pre># Ideal repo layout - hbase as a subpackage and separate target.
src/java/com/twitter/etl/from/BUILD
src/java/com/twitter/etl/from/DataImporter.java
src/java/com/twitter/etl/from/FileDataImporter.java
src/java/com/twitter/etl/from/hbase/BUILD
src/java/com/twitter/etl/from/hbase/HBaseDataImporter.java

# pants target src/java/com/twitter/etl/from
# Including FileDataImporter is appropriate because it has no additional dependencies.
java_library(name=&#39;from&#39;,
  dependencies=[], # no extra dependencies
  sources=globs(&#39;*.java&#39;),
)

# pants target src/java/com/twitter/etl/from/hbase
java_library(name=&#39;hbase&#39;,
  dependencies=[
    pants(&#39;3rdparty/jvm/org/apache/hbase&#39;),
  ],
  sources=globs(&#39;*.java&#39;),
)
</pre></div>
</div>
<p>Existing code using a package for both an interface and implementations should still expose the interface separately.</p>
<div class="highlight-python"><div class="highlight"><pre># Less than ideal layout - interface and implementations together.
src/java/com/twitter/etl/from/BUILD
src/java/com/twitter/etl/from/DataImporter.java
src/java/com/twitter/etl/from/FileDataImporter.java
src/java/com/twitter/etl/from/HBaseDataImporter.java

# Default target contains interface and lightweight implementation.
java_library(name=&#39;from&#39;,
  sources=[
    &#39;DataImporter.java&#39;,
    &#39;FileDataImporter.java&#39;,
  ],
)

# Implementation with heavyweight dependencies exposed separately.
java_library(name=&#39;hbase&#39;,
  dependencies=[
    pants(&#39;3rdparty/jvm/org/apache/hbase&#39;),
  ],
  sources=[&#39;HBaseDataImporter.java&#39;],
)
</pre></div>
</div>
</div>
<div class="section" id="depend-on-api-in-library-targets-implementation-in-binary-targets">
<h2>Depend on API in Library Targets, Implementation in Binary Targets<a class="headerlink" href="#depend-on-api-in-library-targets-implementation-in-binary-targets" title="Permalink to this headline">¶</a></h2>
<p>Some projects helpfully publish their API separately from implementation, especially if multiple
implementations are available. SLF4J is a widely-used example.</p>
<p>Consider the following library target that depends on both <cite>slf4j-api</cite> and the specific implementation <cite>slf4j-jdk14</cite>.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Incorrect - forces a logging implementation on all library users.</span>
<span class="n">scala_library</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;mylib&#39;</span><span class="p">,</span>
  <span class="n">dependencies</span><span class="o">=</span><span class="p">[</span>
    <span class="n">pants</span><span class="p">(</span><span class="s">&#39;3rdparty:slf4j-api&#39;</span><span class="p">),</span>
    <span class="n">pants</span><span class="p">(</span><span class="s">&#39;3rdparty:slf4j-jdk14&#39;</span><span class="p">),</span>
  <span class="p">],</span>
<span class="p">)</span>

<span class="n">jvm_binary</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;mybin&#39;</span><span class="p">,</span>
  <span class="n">dependencies</span><span class="o">=</span><span class="p">[</span><span class="n">pants</span><span class="p">(</span><span class="s">&#39;:mylib&#39;</span><span class="p">)],</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Structure these dependencies to only depending on the API in library code.
Allow binary targets to specify the logging implementation of their choosing.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Better approach - only depend on API in a library target.</span>
<span class="n">scala_library</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;mylib&#39;</span><span class="p">,</span>
  <span class="n">dependencies</span><span class="o">=</span><span class="p">[</span>
    <span class="n">pants</span><span class="p">(</span><span class="s">&#39;3rdparty:slf4j-api&#39;</span><span class="p">),</span>
  <span class="p">],</span>
<span class="p">)</span>

<span class="c"># Bring your own API implementation in the binary.</span>
<span class="n">jvm_binary</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;mybin&#39;</span><span class="p">,</span>
  <span class="n">dependencies</span><span class="o">=</span><span class="p">[</span>
    <span class="n">pants</span><span class="p">(</span><span class="s">&#39;3rdparty:slf4j-jdk14&#39;</span><span class="p">),</span>
    <span class="n">pants</span><span class="p">(</span><span class="s">&#39;:mylib&#39;</span><span class="p">),</span>
  <span class="p">],</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="which-build-files-are-executed-and-how">
<h2>Which <tt class="docutils literal"><span class="pre">BUILD</span></tt> Files are &#8220;Executed&#8221;? (and how?)<a class="headerlink" href="#which-build-files-are-executed-and-how" title="Permalink to this headline">¶</a></h2>
<p><tt class="docutils literal"><span class="pre">BUILD</span></tt> files are little Python scripts. When you
notice a target in one <tt class="docutils literal"><span class="pre">BUILD</span></tt> file can depend on a target in another
<tt class="docutils literal"><span class="pre">BUILD</span></tt> file, you might think those little Python scripts are linked
together into one big Python program, but that&#8217;s not exactly what&#8217;s going on.
If one <tt class="docutils literal"><span class="pre">BUILD</span></tt> file has a Python variable <tt class="docutils literal"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">&quot;Hello</span> <span class="pre">world&quot;</span></tt> and another
<tt class="docutils literal"><span class="pre">BUILD</span></tt> file says <tt class="docutils literal"><span class="pre">print(x)</span></tt>, you&#8217;ll get an error: <tt class="docutils literal"><span class="pre">x</span></tt> is not defined.</p>
<p>Pants executes <tt class="docutils literal"><span class="pre">BUILD</span></tt> files separately. Commands in <tt class="docutils literal"><span class="pre">BUILD</span></tt> files define
targets and register those targets in a Pants data structure.</p>
<p>Though your repo might contain many <tt class="docutils literal"><span class="pre">BUILD</span></tt> files, Pants might not execute all
of them. If you invoke:</p>
<div class="highlight-python"><div class="highlight"><pre>./pants goal test tests/java/com/pants/examples/hello/greet:greet
</pre></div>
</div>
<p>Pants executes the source tree&#8217;s top-level <tt class="docutils literal"><span class="pre">BUILD</span></tt> file (executed on every Pants run) and
<tt class="docutils literal"><span class="pre">tests/java/com/pants/examples/hello/greet/BUILD</span></tt>. The <tt class="docutils literal"><span class="pre">greet</span></tt> target
depends on targets from other <tt class="docutils literal"><span class="pre">BUILD</span></tt> files, so Pants executes those <tt class="docutils literal"><span class="pre">BUILD</span></tt>
files, too; it iterates over the dependency tree, executing <tt class="docutils literal"><span class="pre">BUILD</span></tt> files as it
goes. It does <em>not</em> execute <tt class="docutils literal"><span class="pre">BUILD</span></tt> files that don&#8217;t contain targets in that
dependency tree.</p>
<p>If there&#8217;s some <tt class="docutils literal"><span class="pre">BUILD</span></tt> code that should be executed on every run, put it in
the source tree&#8217;s top-level <tt class="docutils literal"><span class="pre">BUILD</span></tt> file; that gets executed on every Pants run.</p>
</div>
<div class="section" id="id1">
<h2>BUILD.* files<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>We call them &#8220;<tt class="docutils literal"><span class="pre">BUILD</span></tt> files&#8221; because they&#8217;re usually named <tt class="docutils literal"><span class="pre">BUILD</span></tt>, but
they can also be named <tt class="docutils literal"><span class="pre">BUILD.something</span></tt>, where <em>something</em> is typically
a short nickname for an organization, e.g., <tt class="docutils literal"><span class="pre">BUILD.twitter</span></tt>. This can be
handy if your organization has some internal definitions that you need to
combine with code that you open-source, perhaps a <tt class="docutils literal"><span class="pre">credentials</span></tt> definition
that only makes sense behind your organization&#8217;s firewall.</p>
<p>A build target defined in <tt class="docutils literal"><span class="pre">BUILD.foo</span></tt> can&#8217;t have the same <tt class="docutils literal"><span class="pre">name</span></tt> as
a build target defined in the same directory&#8217;s <tt class="docutils literal"><span class="pre">BUILD</span></tt> file; they share
a namespace.</p>
</div>
</div>


          <footer>
  
    <div class="rst-footer-buttons">
      
        <a href="invoking.html" class="btn btn-neutral float-right" title="Invoking Pants Build"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="page.html" class="btn btn-neutral" title="README Files and Markdown"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <p>
      &copy; Copyright 2014, Pants project contributors.
  </p>

  <a href="https://www.github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="http://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  

</body>
</html>