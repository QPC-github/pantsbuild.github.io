<!DOCTYPE html>
<html lang="en">

<!--
  Copyright 2014 Pants project contributors (see CONTRIBUTORS.md).
  Licensed under the Apache License, Version 2.0 (see LICENSE).
-->

<head>
  <meta charset="utf-8" />
  <title>Invoking Pants Build</title>
  <link rel="stylesheet" href="s.css">
  <script src="s.js"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="shortcut icon" href="logo.ico">
  <!-- In case this is a "test publish", tell search engines where real version lives: -->
  <link rel="canonical" href="https://pantsbuild.github.io/invoking.html">
</head>

<body>

<div id="navtoggler">
&#x25c4; <!-- triangle -->
</div>
<div class="mainflow">
<nav class="breadcrumbs">
<ul>
<li><a href="index.html">Pants Build</a>
<li><a href="invoking.html">Invoking Pants Build</a>
</ul>
</nav>

<nav class="pagetoc">
<ul>
<li class="toc-h1"><a href="#order-of-arguments">Order of Arguments</a></li>
<li class="toc-h1"><a href="#setting-options-other-ways">Setting Options Other Ways</a></li>
<li class="toc-h2"><a href="#pants_-environment-variables">PANTS_... Environment Variables</a></li>
<li class="toc-h2"><a href="#pantsini-settings-file">pants.ini Settings File</a></li>
<li class="toc-h2"><a href="#overlay-ini-files-with-config-override">Overlay .ini Files with --config-override</a></li>
</ul>
</nav>

<!-- main content start -->
<!-- generated by pants! -->
<style>
.codehilite .hll { background-color: #ffffcc }
.codehilite  { background: #f0f0f0; }
.codehilite .c { color: #60a0b0; font-style: italic } /* Comment */
.codehilite .err { border: 1px solid #FF0000 } /* Error */
.codehilite .k { color: #007020; font-weight: bold } /* Keyword */
.codehilite .o { color: #666666 } /* Operator */
.codehilite .cm { color: #60a0b0; font-style: italic } /* Comment.Multiline */
.codehilite .cp { color: #007020 } /* Comment.Preproc */
.codehilite .c1 { color: #60a0b0; font-style: italic } /* Comment.Single */
.codehilite .cs { color: #60a0b0; background-color: #fff0f0 } /* Comment.Special */
.codehilite .gd { color: #A00000 } /* Generic.Deleted */
.codehilite .ge { font-style: italic } /* Generic.Emph */
.codehilite .gr { color: #FF0000 } /* Generic.Error */
.codehilite .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.codehilite .gi { color: #00A000 } /* Generic.Inserted */
.codehilite .go { color: #808080 } /* Generic.Output */
.codehilite .gp { color: #c65d09; font-weight: bold } /* Generic.Prompt */
.codehilite .gs { font-weight: bold } /* Generic.Strong */
.codehilite .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.codehilite .gt { color: #0040D0 } /* Generic.Traceback */
.codehilite .kc { color: #007020; font-weight: bold } /* Keyword.Constant */
.codehilite .kd { color: #007020; font-weight: bold } /* Keyword.Declaration */
.codehilite .kn { color: #007020; font-weight: bold } /* Keyword.Namespace */
.codehilite .kp { color: #007020 } /* Keyword.Pseudo */
.codehilite .kr { color: #007020; font-weight: bold } /* Keyword.Reserved */
.codehilite .kt { color: #902000 } /* Keyword.Type */
.codehilite .m { color: #40a070 } /* Literal.Number */
.codehilite .s { color: #4070a0 } /* Literal.String */
.codehilite .na { color: #4070a0 } /* Name.Attribute */
.codehilite .nb { color: #007020 } /* Name.Builtin */
.codehilite .nc { color: #0e84b5; font-weight: bold } /* Name.Class */
.codehilite .no { color: #60add5 } /* Name.Constant */
.codehilite .nd { color: #555555; font-weight: bold } /* Name.Decorator */
.codehilite .ni { color: #d55537; font-weight: bold } /* Name.Entity */
.codehilite .ne { color: #007020 } /* Name.Exception */
.codehilite .nf { color: #06287e } /* Name.Function */
.codehilite .nl { color: #002070; font-weight: bold } /* Name.Label */
.codehilite .nn { color: #0e84b5; font-weight: bold } /* Name.Namespace */
.codehilite .nt { color: #062873; font-weight: bold } /* Name.Tag */
.codehilite .nv { color: #bb60d5 } /* Name.Variable */
.codehilite .ow { color: #007020; font-weight: bold } /* Operator.Word */
.codehilite .w { color: #bbbbbb } /* Text.Whitespace */
.codehilite .mf { color: #40a070 } /* Literal.Number.Float */
.codehilite .mh { color: #40a070 } /* Literal.Number.Hex */
.codehilite .mi { color: #40a070 } /* Literal.Number.Integer */
.codehilite .mo { color: #40a070 } /* Literal.Number.Oct */
.codehilite .sb { color: #4070a0 } /* Literal.String.Backtick */
.codehilite .sc { color: #4070a0 } /* Literal.String.Char */
.codehilite .sd { color: #4070a0; font-style: italic } /* Literal.String.Doc */
.codehilite .s2 { color: #4070a0 } /* Literal.String.Double */
.codehilite .se { color: #4070a0; font-weight: bold } /* Literal.String.Escape */
.codehilite .sh { color: #4070a0 } /* Literal.String.Heredoc */
.codehilite .si { color: #70a0d0; font-style: italic } /* Literal.String.Interpol */
.codehilite .sx { color: #c65d09 } /* Literal.String.Other */
.codehilite .sr { color: #235388 } /* Literal.String.Regex */
.codehilite .s1 { color: #4070a0 } /* Literal.String.Single */
.codehilite .ss { color: #517918 } /* Literal.String.Symbol */
.codehilite .bp { color: #007020 } /* Name.Builtin.Pseudo */
.codehilite .vc { color: #bb60d5 } /* Name.Variable.Class */
.codehilite .vg { color: #bb60d5 } /* Name.Variable.Global */
.codehilite .vi { color: #bb60d5 } /* Name.Variable.Instance */
.codehilite .il { color: #40a070 } /* Literal.Number.Integer.Long */
</style>

<table class="h-plus-pilcrow">
<tbody>
<tr>
<td class="h-plus-pilcrow-holder"><h1 id="invoking-pants-build">Invoking Pants Build</h1></td>
<td><div class="pilcrow-div">
<a class="pilcrow-link" href="#invoking-pants-build">¶</a>
</div></td>
</tr>
</tbody>
</table>

<p>This page discusses some advanced features of invoking the Pants build
tool on the command line. We assume you already know the
<a href="first_tutorial.html">basic command-line structure</a>,
something like:</p>
<div class="codehilite"><pre><span class="nv">$ </span>./pants test.junit --fail-fast bundle path/to/target path/to/another/target
</pre></div>
<p>For a full description of specifying target addresses, see
<a href="target_addresses.html">Target Addresses</a>.
For a list of Pants' goals and their options, see the
<a href="options_reference.html">Options Reference</a>.</p>

<table class="h-plus-pilcrow">
<tbody>
<tr>
<td class="h-plus-pilcrow-holder"><h2 id="order-of-arguments">Order of Arguments</h2></td>
<td><div class="pilcrow-div">
<a class="pilcrow-link" href="#order-of-arguments">¶</a>
</div></td>
</tr>
</tbody>
</table>

<p>A simple Pants command line looks like <tt>./pants <var>goal</var> <var>target</var></tt>.
A less-simple Pants command looks like:</p>
<div class="codehilite"><pre>./pants &lt;global options&gt; &lt;goal1&gt; &lt;options <span class="k">for </span>goal1&gt; &lt;goal2&gt; &lt;options <span class="k">for </span>goal2&gt; <span class="se">\</span>
        &lt;target1&gt; &lt;target2&gt; <span class="o">[</span>-- pass-through options <span class="k">for </span>last goal<span class="o">]</span>
</pre></div>
<p>You can specify one or more goals. You can specify options for any goal right after that goal's
name:</p>
<div class="codehilite"><pre><span class="nv">$ </span>./pants list --sep<span class="o">=</span><span class="s1">'|'</span> examples/src/python/example:
examples/src/python/example:readme|examples/src/python/example:pex_design|examples/sr...
</pre></div>
<p>Some goals are made up of tasks; to specify an option for that task, use the dotted
<em>goal.task</em> notation:</p>
<div class="codehilite"><pre><span class="c"># compile src, keeping Java compile's "scratch files"</span>
./pants compile.java --no-delete-scratch src::
</pre></div>
<p>You can specify one or more targets to operate upon. Target specifications come after goals
and goal options on the command line.</p>
<p><em>Global options</em> are the options that <code>./pants -h</code> lists, options that affect the whole
Pants run, e.g., <code>-ldebug</code>. Specify global options after "goal".</p>
<p>When setting a value for an option, beware spaces. For example, <code>-l debug</code> and <code>--level debug</code>
don't do what you want. If you're tempted to put a space between an option and its value, use an
equals sign instead: <code>--level=debug</code>, <code>-ldebug</code>, and even <code>-l=debug</code> all work.</p>
<p>Some goals and tasks take "passthrough" args. That is, you can specify command-line args that are
passed through to some tool that Pants invoke in turn. These are specified last on the command
line after a double-hyphen like <code>-- foo bar</code> and are passed to the last goal specified. E.g., to
pass <code>-k list</code> to <code>pytest</code> (to say "only run tests whose names contain <code>list</code>") you could invoke:</p>
<div class="codehilite"><pre>./pants test.pytest tests/python/pants_test/tasks -- -k list
</pre></div>
<p>You could use <code>test</code> instead of <code>test.pytest</code> above; Pants then applies the
passthrough args to tools called by all of <code>test</code>, not just <code>test.pytest</code>.
This gets tricky. We happen to know we can pass <code>-k list</code> here, that <code>pytest</code> accepts passthrough
args, and that this <code>test</code> invocation upon <code>tests/python/...</code> won't invoke any other tools
(assuming nobody hid a <code>junit</code> test in the <code>python</code> directory).</p>

<table class="h-plus-pilcrow">
<tbody>
<tr>
<td class="h-plus-pilcrow-holder"><h2 id="setting-options-other-ways">Setting Options Other Ways</h2></td>
<td><div class="pilcrow-div">
<a class="pilcrow-link" href="#setting-options-other-ways">¶</a>
</div></td>
</tr>
</tbody>
</table>

<p>Instead of passing an option on the command line, you can set an environment variable or change
an option in an <code>.ini</code> file. Pants "looks" for an option value on the command line, environment
variable, and <code>.ini</code> file; it uses the first it finds.
For a complete, precedence-ordered list of places Pants looks for option values, see the
<code>Options</code> docstring in [src/python/pants/option/options.py]
(https://github.com/pantsbuild/pants/blob/master/src/python/pants/option/options.py).</p>

<table class="h-plus-pilcrow">
<tbody>
<tr>
<td class="h-plus-pilcrow-holder"><h3 id="pants_-environment-variables"><code>PANTS_...</code> Environment Variables</h3></td>
<td><div class="pilcrow-div">
<a class="pilcrow-link" href="#pants_-environment-variables">¶</a>
</div></td>
</tr>
</tbody>
</table>

<p>Each goal option also has a corresponding environment variable. For example, either of these
commands opens a coverage report in your browser:</p>
<div class="codehilite"><pre><span class="nv">$ </span>./pants test.junit --coverage-html-open examples/tests/java/org/pantsbuild/example::

<span class="nv">$ PANTS_TEST_JUNIT_COVERAGE_HTML_OPEN</span><span class="o">=</span>1 ./pants <span class="nb">test </span>examples/tests/java/org/pantsbuild/example::
</pre></div>
<p>Pants checks for an environment variable whose name is <code>PANTS</code> + the goal name (or goal+task name)
+ the option name; all of these in all-caps, joined by underscores (instead of dots or hyphens).</p>

<table class="h-plus-pilcrow">
<tbody>
<tr>
<td class="h-plus-pilcrow-holder"><h3 id="pantsini-settings-file"><code>pants.ini</code> Settings File</h3></td>
<td><div class="pilcrow-div">
<a class="pilcrow-link" href="#pantsini-settings-file">¶</a>
</div></td>
</tr>
</tbody>
</table>

<p>Pants can also read command-line options (and other options) from a configuration file named
<code>pants.ini</code> at the root of the repo. For example, if your <code>pants.ini</code> file contains</p>
<div class="codehilite"><pre>[test.junit]
coverage_html_open: True
</pre></div>
<p>...then whenever Pants carries out the <code>test.junit</code> task, it will behave as if you passed
<code>test.junit --coverage-html-open</code>. If an environment variable and an <code>.ini</code> configuration both
specify a value for some option, the environment variable "wins".</p>
<p>The format of the config file is similar to Microsoft Windows INI files. See the
<a href="https://docs.python.org/2/library/configparser.html">ConfigParser</a> Python documentation.</p>
<p>Some options are intended to only be set in the <code>pants.ini</code> file and are thus normally hidden from
the online help output.  To see these options, use <code>./pants &lt;goal&gt; --help-advanced</code> or
view them all with the <code>./pants --help-all --help-advanced</code> command.</p>
<p>There are a few differences in using options in the config file compared to invoking them from the
command line:</p>
<ul>
<li>Omit the leading double dash ('--')</li>
<li>Dash characters ('-') are transposed to underscores ('_').</li>
<li>Flag values are enabled and disabled by setting the value of the option to <code>True</code> or <code>False</code></li>
<li>The prefix for long form options is not specified. Instead, you must organize the options
    into their appropriate sections.</li>
</ul>
<p>Sections in the .ini file are described in the help output:</p>
<div class="codehilite"><pre><span class="nv">$ </span>./pants compile.zinc --help

compile.zinc options:
Compile Scala and Java code using Zinc.

--<span class="o">[</span>no-<span class="o">]</span>compile-zinc-debug-symbols <span class="o">(</span>default: False<span class="o">)</span>
    Compile with debug symbol enabled.
--<span class="o">[</span>no-<span class="o">]</span>compile-zinc-use-nailgun <span class="o">(</span>default: True<span class="o">)</span>
    Use nailgun to make repeated invocations of this task quicker.
--<span class="o">[</span>no-<span class="o">]</span>compile-zinc-warnings <span class="o">(</span>default: True<span class="o">)</span>
    Compile with all configured warnings enabled.
</pre></div>
<p>The section name is also used to form the long form command-line option prefixes, but you cannot
arbitrarily strip off the first part of the option name and use it in a section.   Section names
can have multiple parts.  You must be careful to use the correct section name as specified
in the help output:</p>
<div class="codehilite"><pre><span class="c"># Wrong</span>
<span class="err">[compile]</span>  <span class="c"># The correct section name is compile.zinc for this option</span>
<span class="err">zinc_warnings:</span> <span class="err">False</span>

<span class="c"># Right</span>
<span class="k">[compile.zinc]</span>
<span class="err">warnings:</span> <span class="err">False</span>
</pre></div>
<p>Settings that span multiple lines should be indented.  To minimize problems, follow these
conventions:</p>
<ul>
<li>Followon lines should be indented four spaces.</li>
<li>The ending bracket for lists and dicts should be indented two spaces.</li>
</ul>
<p>Here are some examples of correctly and incorrectly formatted values:</p>
<div class="codehilite"><pre><span class="c"># Right</span>
<span class="err">jvm_options:</span> <span class="k">[ "foo", "bar" ]</span>

<span class="c"># Right</span>
<span class="err">jvm_options:</span> <span class="err">[</span>
    <span class="err">"foo",</span> <span class="err">"bar"</span>
  <span class="err">]</span>

<span class="c"># Wrong</span>
<span class="err">jvm_options:</span> <span class="err">[</span> <span class="err">"foo",</span>
<span class="err">"bar"</span> <span class="err">]</span>  <span class="c"># Followon line must be indented</span>

<span class="c"># Wrong</span>
<span class="err">jvm_options:</span> <span class="err">[</span>
    <span class="err">"foo",</span> <span class="err">"bar"</span>
<span class="err">]</span> <span class="c"># closing bracket must be indented</span>
</pre></div>
<p>The <code>pants.ini</code> file allows string interpolation for variables defined in the <code>[DEFAULT]</code> section by
using the syntax <code>%(&lt;variable name&gt;)s</code> inside of a string.</p>
<div class="codehilite"><pre><span class="na">local_artifact_cache</span> <span class="o">=</span> <span class="s">%(pants_bootstrapdir)s/artifact_cache</span>
<span class="na">read_from</span> <span class="o">=</span> <span class="s">["%(local_artifact_cache)s"]</span>
</pre></div>

<table class="h-plus-pilcrow">
<tbody>
<tr>
<td class="h-plus-pilcrow-holder"><h3 id="overlay-ini-files-with-config-override">Overlay <code>.ini</code> Files with <code>--config-override</code></h3></td>
<td><div class="pilcrow-div">
<a class="pilcrow-link" href="#overlay-ini-files-with-config-override">¶</a>
</div></td>
</tr>
</tbody>
</table>

<p>Sometimes it's convenient to keep <code>.ini</code> settings in more than one file. Perhaps you usually
operate Pants in one "mode", but occasionally need to use a tweaked set of settings.</p>
<p>Use the <code>--config-override</code> command-line option to specify a second <code>.ini</code> file. Each of
this <code>.ini</code> file's values override the corresponding value in <code>pants.ini</code>, if any.
For example, if your <code>pants.ini</code> contains the section</p>
<div class="codehilite"><pre>[test.junit]
coverage_html_open: True
debug: False
</pre></div>
<p>...and you invoke <code>--config-override=quick.ini</code> and your <code>quick.ini</code> says</p>
<div class="codehilite"><pre>[test.junit]
coverage_html_open: False
skip: True
</pre></div>
<p>...then Pants will act as if you specified</p>
<div class="codehilite"><pre>[test.junit]
coverage_html_open: False
skip: True
debug: False
</pre></div>

<!-- main content end -->

<div class="generated">
Generated by <a href="http://pantsbuild.github.io/docs.html">publish_docs</a>
from dist/markdown/html/src/docs/invoking.html 2015-12-12T16:05:27.794343
</div>

</div> <!-- end of mainflow -->

<nav class="bignav">
  <div class="bignav-logo">
    <a href="index.html">
      <img src="logo.ico" alt="[pantsbuild logo]">
    </a>
  </div>
  <form class="search" action="https://www.google.com/search">
  <input name="as_q" class="query" placeholder="Search">
  <input name="as_sitesearch" value="pantsbuild.github.io" type="hidden">
  </form>

<div class="site-toc">
<ul>
<li class="toc-h1 ">
<a href="first_concepts.html">Pants Conceptual Overview</a>
</li>
<li class="toc-h1 ">
<a href="install.html">Installing Pants</a>
</li>
<li class="toc-h1 ">
<a href="first_tutorial.html">First Tutorial</a>
</li>
<li class="toc-h1 ">
<a href="target_addresses.html">Target Addresses</a>
</li>
<li class="toc-h1 ">
<a href="JVMProjects.html">JVM Projects with Pants</a>
</li>
<li class="toc-h2 ">
<a href="3rdparty_jvm.html">JVM 3rdparty Pattern</a>
</li>
<li class="toc-h2 ">
<a href="scala.html">Scala Projects with Pants</a>
</li>
<li class="toc-h2 ">
<a href="from_maven.html">Pants for Maven Experts</a>
</li>
<li class="toc-h1 ">
<a href="python-readme.html">Python Projects with Pants</a>
</li>
<li class="toc-h2 ">
<a href="3rdparty_py.html">Python 3rdparty Pattern</a>
</li>
<li class="toc-h2 ">
<a href="pex_design.html">PEX Design</a>
</li>
<li class="toc-h1 ">
<a href="page.html">README Files and Markdown</a>
</li>
<li class="toc-h1 ">
<a href="build_files.html">BUILD files</a>
</li>
<li class="toc-h1 toc-here">
Invoking Pants Build
</li>
<li class="toc-h1 ">
<a href="tshoot.html">Troubleshooting</a>
</li>
<li class="toc-h1 ">
<a href="3rdparty.html">Third-Party Dependencies</a>
</li>
<li class="toc-h2 ">
<a href="3rdparty_jvm.html">JVM 3rdparty Pattern</a>
</li>
<li class="toc-h2 ">
<a href="3rdparty_py.html">Python 3rdparty Pattern</a>
</li>
<li class="toc-h1 ">
<a href="ThriftDeps.html">Using Pants with Thrift Dependencies</a>
</li>
<li class="toc-h1 ">
<a href="publish.html">Publishing Artifacts</a>
</li>
<li class="toc-h1 ">
<a href="with_emacs.html">Emacs With Pants</a>
</li>
<li class="toc-h1 ">
<a href="with_intellij.html">Using Pants with IntelliJ IDEA</a>
</li>
<li class="toc-h1 ">
<a href="setup_repo.html">Set up Your Source Tree for Pants</a>
</li>
<li class="toc-h1 ">
<a href="build_dictionary.html">Pants BUILD Dictionary</a>
</li>
<li class="toc-h1 ">
<a href="options_reference.html">Pants Options Reference</a>
</li>
<li class="toc-h1 ">
<a href="changelog.html">RELEASE HISTORY</a>
</li>
<li class="toc-h1 ">
<a href="export.html">Export Format</a>
</li>
<li class="toc-h1 ">
<a href="dev.html">Pants Developer Center</a>
</li>
<li class="toc-h2 ">
<a href="howto_contribute.html">Pants Contributors Guide</a>
</li>
<li class="toc-h2 ">
<a href="howto_ask.html">How To Ask</a>
</li>
<li class="toc-h2 ">
<a href="howto_develop.html">Pants Developers Guide</a>
</li>
<li class="toc-h2 ">
<a href="dev_tasks.html">Task Developer's Guide</a>
</li>
<li class="toc-h3 ">
<a href="dev_tasks_publish_extras.html">Develop a Task to Publish &quot;Extra&quot; Artifacts</a>
</li>
<li class="toc-h2 ">
<a href="howto_plugin.html">Developing a Pants Plugin</a>
</li>
<li class="toc-h2 ">
<a href="intellij.html">Pants Development with IntelliJ IDEA</a>
</li>
<li class="toc-h2 ">
<a href="internals.html">Pants Internals</a>
</li>
<li class="toc-h2 ">
<a href="release.html">Release Process</a>
</li>
<li class="toc-h3 ">
<a href="release_jvm.html">JVM Artifact Release Process</a>
</li>
<li class="toc-h2 ">
<a href="docs.html">About the documentation</a>
</li>
<li class="toc-h2 ">
<a href="credits.html">Credits</a>
</li>
</ul>
</div>
</nav>

<div class="ci-status">
<a href="https://travis-ci.org/pantsbuild/pants">
<img src="https://travis-ci.org/pantsbuild/pants.png?branch=master"
     alt="Are the tests passing?" title="Are the tests passing?"></a><br>
<a href="https://coveralls.io/r/pantsbuild/pants?branch=master">
<img src="https://coveralls.io/repos/pantsbuild/pants/badge.png?branch=master"
     alt="Test Coverage Status" title="Test Coverage Status"></a>
</div>

</body>
</html>
