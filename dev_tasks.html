

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Task Developerâ€™s Guide &mdash; pants 0.1 documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/pants-logo.ico"/>
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  

    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:'./',
        VERSION:'0.1',
        COLLAPSE_INDEX:false,
        FILE_SUFFIX:'.html',
        HAS_SOURCE:  true
      };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
    <link rel="top" title="pants 0.1 documentation" href="index.html"/>
        <link rel="up" title="Pants Developer Center" href="dev.html"/>
        <link rel="next" title="Developing a Pants Plugin" href="howto_plugin.html"/>
        <link rel="prev" title="Pants Developers Guide" href="howto_develop.html"/>
 
<script type="text/javascript">
  // In a plain template, we'd put this in the footer block.
  // In the read-the-docs template, there is no footer. So use jQuery ready:
  $(document).ready(function() {
    // Ping Google analytics
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-39101739-2', 'auto');
    ga('send', 'pageview');

    // Show the travis-ci status graphic.
    $('.wy-breadcrumbs').append(
      '<div style="float: right; padding: 1px;">' +
        '<a href="https://travis-ci.org/pantsbuild/pants">' +
          '<img src="https://travis-ci.org/pantsbuild/pants.png?branch=master">' +
        '</a>' +
      '</div>');

    // Show the coveralls status graphic.
    $('.wy-breadcrumbs').append(
      '<div style="float: right; padding: 1px;">' +
        '<a href="https://coveralls.io/r/pantsbuild/pants?branch=master">' +
          '<img src="https://coveralls.io/repos/pantsbuild/pants/badge.png?branch=master"' +
          '     alt="Coverage Status">' +
        '</a>' +
      '</div>');
  });
</script>
<style type="text/css">
/* Shoehorn in pants logo */
body .icon-home:before {
   content: "";
}

body .icon-home{
  background: transparent url(./_static/pants-logo.ico) center left no-repeat;
  background-position-x: 5px;
  padding-left: 40px;
  padding-right: 35px;
  line-height: 40px;
}

body a.icon-home:hover{
  background: #3d8cbf url(./_static/pants-logo.ico) center left no-repeat;
  background-position-x: 5px;
}

</style>


  <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="index.html" class="icon icon-home"> pants</a>
        <form class="wy-form" action="search.html" method="get">
  <input type="text" name="q" placeholder="Search docs" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix">
        
        
            <ul>
<li class="toctree-l1"><a class="reference internal" href="first_concepts.html">Pants Conceptual Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="first_concepts.html#goals-and-targets">Goals and Targets</a></li>
<li class="toctree-l2"><a class="reference internal" href="first_concepts.html#target-types">Target Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="first_concepts.html#what-pants-does">What Pants Does</a></li>
<li class="toctree-l2"><a class="reference internal" href="first_concepts.html#next-step">Next Step</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="first_tutorial.html">First Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="first_tutorial.html#invoking-pants">Invoking Pants</a></li>
<li class="toctree-l2"><a class="reference internal" href="first_tutorial.html#build-files">BUILD Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="first_tutorial.html#the-usual-commands">The Usual Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="first_tutorial.html#next">Next</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="target_addresses.html">Target Addresses</a></li>
<li class="toctree-l1"><a class="reference internal" href="JVMProjects.html">JVM Projects with Pants</a><ul>
<li class="toctree-l2"><a class="reference internal" href="JVMProjects.html#relevant-goals-and-targets">Relevant Goals and Targets</a></li>
<li class="toctree-l2"><a class="reference internal" href="JVMProjects.html#build-for-a-simple-binary">BUILD for a Simple Binary</a></li>
<li class="toctree-l2"><a class="reference internal" href="JVMProjects.html#the-usual-commands-jvm">The Usual Commands: JVM</a></li>
<li class="toctree-l2"><a class="reference internal" href="JVMProjects.html#toolchain">Toolchain</a></li>
<li class="toctree-l2"><a class="reference internal" href="JVMProjects.html#java7-vs-java6-which-java">Java7 vs Java6, Which Java</a></li>
<li class="toctree-l2"><a class="reference internal" href="JVMProjects.html#bundles-deploy-able-runnable-file-trees">Bundles: Deploy-able Runnable File Trees</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="python-readme.html">Python Projects with Pants</a><ul>
<li class="toctree-l2"><a class="reference internal" href="python-readme.html#relevant-goals-and-targets">Relevant Goals and Targets</a></li>
<li class="toctree-l2"><a class="reference internal" href="python-readme.html#build-for-a-simple-binary">BUILD for a Simple Binary</a></li>
<li class="toctree-l2"><a class="reference internal" href="python-readme.html#handling-python-requirement">Handling <tt class="docutils literal"><span class="pre">python_requirement</span></tt></a></li>
<li class="toctree-l2"><a class="reference internal" href="python-readme.html#pex-contents">PEX Contents</a></li>
<li class="toctree-l2"><a class="reference internal" href="python-readme.html#repl-and-environment-manipulation-with-pants-py">REPL and environment manipulation with <cite>pants py</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="python-readme.html#python-binary-entry-point">python_binary entry_point</a></li>
<li class="toctree-l2"><a class="reference internal" href="python-readme.html#more-about-python-tests">More About Python Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="python-readme.html#manipulating-pex-behavior-with-environment-variables">Manipulating PEX behavior with environment variables</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="page.html">README Files and Markdown</a><ul>
<li class="toctree-l2"><a class="reference internal" href="page.html#markdown-to-html">Markdown to HTML</a></li>
<li class="toctree-l2"><a class="reference internal" href="page.html#link-to-another-page">Link to Another <tt class="docutils literal"><span class="pre">page</span></tt></a></li>
<li class="toctree-l2"><a class="reference internal" href="page.html#include-a-file-snippet">Include a File Snippet</a></li>
<li class="toctree-l2"><a class="reference internal" href="page.html#publishing">Publishing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="build_files.html">BUILD files</a><ul>
<li class="toctree-l2"><a class="reference internal" href="build_files.html#debugging-a-build-file">Debugging a BUILD File</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_files.html#default-target">Default Target</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_files.html#the-1-1-1-rule">The 1:1:1 Rule</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_files.html#avoid-rglobs">Avoid rglobs</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_files.html#define-separate-targets-for-interface-and-implementation">Define Separate Targets for Interface and Implementation</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_files.html#depend-on-api-in-library-targets-implementation-in-binary-targets">Depend on API in Library Targets, Implementation in Binary Targets</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_files.html#which-build-files-are-executed-and-how">Which <tt class="docutils literal"><span class="pre">BUILD</span></tt> Files are &#8220;Executed&#8221;? (and how?)</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_files.html#id1">BUILD.* files</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_files.html#tag-incompatibilities-with-exclusives">Tag Incompatibilities with exclusives</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_files.html#what-happened-to-the-pants-wrapper-around-targets">What happened to the pants() wrapper around targets?</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_files.html#using-an-older-version-of-pants">Using an older version of Pants?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="invoking.html">Invoking Pants Build</a><ul>
<li class="toctree-l2"><a class="reference internal" href="invoking.html#rc-files">rc files</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tshoot.html">Troubleshooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tshoot.html#maximum-verbosity">Maximum Verbosity</a></li>
<li class="toctree-l2"><a class="reference internal" href="tshoot.html#scrub-the-environment">Scrub the Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="tshoot.html#nailgun-5-seconds">Nailgun 5 seconds</a></li>
<li class="toctree-l2"><a class="reference internal" href="tshoot.html#questions-issues-bug-reports">Questions, Issues, Bug Reports</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="3rdparty.html">Third-Party Dependencies</a><ul>
<li class="toctree-l2"><a class="reference internal" href="3rdparty_jvm.html">JVM 3rdparty Pattern</a></li>
<li class="toctree-l2"><a class="reference internal" href="3rdparty_py.html">Python 3rdparty Pattern</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ThriftDeps.html">Using Pants with Thrift Dependencies</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ThriftDeps.html#generating-code">Generating Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="ThriftDeps.html#thrift-example">Thrift Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="ThriftDeps.html#publishing">Publishing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="publish.html">Publishing Artifacts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="publish.html#life-of-a-publish">Life of a Publish</a></li>
<li class="toctree-l2"><a class="reference internal" href="publish.html#how-to">How To</a></li>
<li class="toctree-l2"><a class="reference internal" href="publish.html#restricting-to-release-branch">Restricting to &#8220;Release Branch&#8221;</a></li>
<li class="toctree-l2"><a class="reference internal" href="publish.html#authenticating-to-the-artifact-repository">Authenticating to the Artifact Repository</a></li>
<li class="toctree-l2"><a class="reference internal" href="publish.html#troubleshooting">Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="publish.html#want-to-publish-something-publish-many-things">Want to Publish Something? Publish Many Things</a></li>
<li class="toctree-l2"><a class="reference internal" href="publish.html#test-with-a-fake-local-publish">Test with a Fake Local &#8220;Publish&#8221;</a></li>
<li class="toctree-l2"><a class="reference internal" href="publish.html#setting-up-your-workspace">Setting Up Your Workspace</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="with_emacs.html">Ensime With Pants</a></li>
<li class="toctree-l1"><a class="reference internal" href="with_intellij.html">Using Pants with IntelliJ IDEA</a><ul>
<li class="toctree-l2"><a class="reference internal" href="with_intellij.html#pants-build-plugin-for-intellij">Pants Build Plugin for IntelliJ</a></li>
<li class="toctree-l2"><a class="reference internal" href="with_intellij.html#generating-idea-project">Generating IDEA Project</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="setup_repo.html">Set up Your Source Tree for Pants</a><ul>
<li class="toctree-l2"><a class="reference internal" href="setup_repo.html#configuring-with-pants-ini">Configuring with <tt class="docutils literal"><span class="pre">pants.ini</span></tt></a></li>
<li class="toctree-l2"><a class="reference internal" href="setup_repo.html#configure-code-layout-with-source-root">Configure Code Layout with <cite>source_root</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="setup_repo.html#top-level-build-for-tree-global-config">Top-level <cite>BUILD.*</cite> for tree-global config</a></li>
<li class="toctree-l2"><a class="reference internal" href="setup_repo.html#integrate-new-tools-via-a-pants-plugin">Integrate New Tools via a Pants Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="setup_repo.html#build-in-the-source-tree-for-special-targets">BUILD.* in the source tree for special targets</a></li>
<li class="toctree-l2"><a class="reference internal" href="setup_repo.html#enabling-pants-publish">Enabling Pants Publish</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installing Pants</a><ul>
<li class="toctree-l2"><a class="reference internal" href="install.html#virtualenv-based-installation">Virtualenv-based Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="install.html#system-wide-installation">System-wide Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="install.html#pex-based-installation">PEX-based Installation</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="build_dictionary.html">BUILD Dictionary</a><ul>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#android-binary">android_binary</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#android-resources">android_resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#annotation-processor">annotation_processor</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#artifact">artifact</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#benchmark">benchmark</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#buildfile-path">buildfile_path</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#bundle">bundle</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#confluencepublish">ConfluencePublish</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#credentials">credentials</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#dependencies">dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#directoryremapper">DirectoryReMapper</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#duplicate">Duplicate</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#egg">egg</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#bdict-exclude">exclude</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#get-buildroot">get_buildroot</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#globs">globs</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#jar">jar</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#jar-library">jar_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#jar-rules">jar_rules</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#java-agent">java_agent</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#java-antlr-library">java_antlr_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#java-library">java_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#java-protobuf-library">java_protobuf_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#java-ragel-library">java_ragel_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#java-tests">java_tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#java-thrift-library">java_thrift_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#jaxb-library">jaxb_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#junit-tests">junit_tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#jvm-app">jvm_app</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#jvm-binary">jvm_binary</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#keystore">keystore</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#maven-layout">maven_layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#netrc">netrc</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#page">page</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#pants">pants</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#pants-version">pants_version</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#prep-command">prep_command</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#python-antlr-library">python_antlr_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#python-binary">python_binary</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#python-library">python_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#python-requirement">python_requirement</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#bdict-python-requirement-library">python_requirement_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#python-requirements">python_requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#python-test-suite">python_test_suite</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#python-tests">python_tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#python-thrift-library">python_thrift_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#repository">Repository</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#bdict-resources">resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#rglobs">rglobs</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#scala-library">scala_library</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#scala-specs">scala_specs</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#scala-tests">scala_tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#scalac-plugin">scalac_plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#bdict-setup-py">setup_py</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#bdict-skip">Skip</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#source-root">source_root</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#target">target</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#wiki">Wiki</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#wiki-artifact">wiki_artifact</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_dictionary.html#zglobs">zglobs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="goals_reference.html">Goals Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#bench">bench</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#binary">binary</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#bootstrap">bootstrap</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#builddict">builddict</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#buildlint">buildlint</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#bundle">bundle</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#changed">changed</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#check-exclusives">check-exclusives</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#check-published-deps">check_published_deps</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#clean-all">clean-all</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#clean-all-async">clean-all-async</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#compile">compile</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#dependees">dependees</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#dependencies">dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#depmap">depmap</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#detect-duplicates">detect-duplicates</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#dex">dex</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#doc">doc</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#eclipse">eclipse</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#ensime">ensime</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#filedeps">filedeps</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#filemap">filemap</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#filter">filter</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#gen">gen</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#goals">goals</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#gref-goal-idea">idea</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#imports">imports</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#invalidate">invalidate</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#jar">jar</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#killserver">killserver</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#list">list</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#markdown">markdown</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#minimize">minimize</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#ng-killall">ng-killall</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#path">path</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#pathdeps">pathdeps</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#paths">paths</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#provides">provides</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#publish">publish</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#repl">repl</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#repl-dirty">repl-dirty</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#resolve">resolve</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#resources">resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#roots">roots</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#run">run</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#run-dirty">run-dirty</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#server">server</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#sign">sign</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#sitegen">sitegen</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#sort">sort</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#targets">targets</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#test">test</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#thrift-linter">thrift-linter</a></li>
<li class="toctree-l2"><a class="reference internal" href="goals_reference.html#common">Common</a></li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="dev.html">Pants Developer Center</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="howto_contribute.html">Pants Contributors Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_ask.html">How To Ask</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_develop.html">Pants Developers Guide</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Task Developer&#8217;s Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_plugin.html">Developing a Pants Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto_customize.html">Custom Pants for Your Site</a></li>
<li class="toctree-l2"><a class="reference internal" href="intellij.html">Pants Development with IntelliJ IDEA</a></li>
<li class="toctree-l2"><a class="reference internal" href="internals.html">Pants Internals</a></li>
<li class="toctree-l2"><a class="reference internal" href="release.html">Release Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="docs.html">About the documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="credits.html">Credits</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top">
        <i data-toggle="wy-nav-top" class="icon icon-reorder"></i>
        <a href="/">pants</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <ul class="wy-breadcrumbs">
  <li><a href="index.html">Docs</a> &raquo;</li>
  <li><a href="">Task Developer&#8217;s Guide</a></li>
  
</ul>
<hr/>

          
  <div class="section" id="task-developer-s-guide">
<h1>Task Developer&#8217;s Guide<a class="headerlink" href="#task-developer-s-guide" title="Permalink to this headline">Â¶</a></h1>
<p>In Pants, code that does &#8220;real build work&#8221;
(e.g., downloads prebuilt artifacts, compiles Java code, runs tests)
lives in <em>Tasks</em>. To add a feature to Pants so that it can, e.g.,
compile a new language, you want to write a new Task.</p>
<p>This page documents how to develop a Pants Task, enabling you to teach pants
how to do things it does not already know how to do today.
To see the Tasks that are built into Pants, look over
<tt class="docutils literal"><span class="pre">src/python/pants/backend/*/tasks/*.py</span></tt>.
The code makes more sense if you know the concepts from <a class="reference internal" href="internals.html"><em>Pants Internals</em></a>.
The rest of this page introduces some concepts especially useful when
defining a Task.</p>
<div class="section" id="hello-task">
<h2>Hello Task<a class="headerlink" href="#hello-task" title="Permalink to this headline">Â¶</a></h2>
<p>To implement a Task, you define a subclass of
<a class="reference external" href="https://github.com/pantsbuild/pants/blob/master/src/python/pants/backend/core/tasks/task.py">pants.backend.core.tasks.task.Task</a>
and define an <tt class="docutils literal"><span class="pre">execute</span></tt> method for that class.
The <tt class="docutils literal"><span class="pre">execute</span></tt> method does the work.</p>
<p>The Task can see (and affect) the state of the build via its
<tt class="docutils literal"><span class="pre">.context</span></tt> member, a
<a class="reference external" href="https://github.com/pantsbuild/pants/blob/master/src/python/pants/goal/context.py">pants.goal.context.Context.</a></p>
<p><strong>Which targets to act on?</strong> A typical Task wants to act on all &#8220;in play&#8221;
targets that match some predicate. Here, &#8220;&#8216;in play&#8217; targets&#8221; means those
targets the user specified on the command line, the targets needed to build
those targets, the targets needed to build <em>those</em> targets, etc. Call
<tt class="docutils literal"><span class="pre">self.context.targets()</span></tt> to get these.  This method takes an optional
parameter, a predicate function; this is useful for filtering just those
targets that match some criteria.</p>
</div>
<div class="section" id="task-installation-associate-task-with-goal-s">
<h2>Task Installation: Associate Task with Goal[s]<a class="headerlink" href="#task-installation-associate-task-with-goal-s" title="Permalink to this headline">Â¶</a></h2>
<p>Defining a Task is nice, but doesn&#8217;t hook it up so users can get to it.
<em>Install</em> a task to make it available to users. To do this,
you register it with Pants, associating it with a goal.
A plugin&#8217;s <tt class="docutils literal"><span class="pre">register.py</span></tt> registers goals in its <tt class="docutils literal"><span class="pre">register_goals</span></tt>
function. Here&#8217;s an excerpt from
<a class="reference external" href="https://github.com/pantsbuild/pants/blob/master/src/python/pants/backend/jvm/register.py">Pants&#8217; own JVM backend</a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">register_goals</span><span class="p">():</span>
  <span class="n">ng_killall</span> <span class="o">=</span> <span class="n">task</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;ng-killall&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">NailgunKillall</span><span class="p">)</span>
  <span class="n">ng_killall</span><span class="o">.</span><span class="n">install</span><span class="p">()</span><span class="o">.</span><span class="n">with_description</span><span class="p">(</span><span class="s">&#39;Kill running nailgun servers.&#39;</span><span class="p">)</span>

  <span class="n">Goal</span><span class="o">.</span><span class="n">by_name</span><span class="p">(</span><span class="s">&#39;invalidate&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">install</span><span class="p">(</span><span class="n">ng_killall</span><span class="p">,</span> <span class="n">first</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
  <span class="n">Goal</span><span class="o">.</span><span class="n">by_name</span><span class="p">(</span><span class="s">&#39;clean-all&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">install</span><span class="p">(</span><span class="n">ng_killall</span><span class="p">,</span> <span class="n">first</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
  <span class="n">Goal</span><span class="o">.</span><span class="n">by_name</span><span class="p">(</span><span class="s">&#39;clean-all-async&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">install</span><span class="p">(</span><span class="n">ng_killall</span><span class="p">,</span> <span class="n">first</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

  <span class="n">task</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;bootstrap-jvm-tools&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">BootstrapJvmTools</span>
  <span class="p">)</span><span class="o">.</span><span class="n">install</span><span class="p">(</span><span class="s">&#39;bootstrap&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">with_description</span><span class="p">(</span><span class="s">&#39;Bootstrap tools needed for building.&#39;</span><span class="p">)</span>

  <span class="c"># Dependency resolution.</span>
  <span class="n">task</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;ivy&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">IvyResolve</span><span class="p">,</span>
       <span class="n">dependencies</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;gen&#39;</span><span class="p">,</span> <span class="s">&#39;check-exclusives&#39;</span><span class="p">,</span> <span class="s">&#39;bootstrap&#39;</span><span class="p">]</span>
  <span class="p">)</span><span class="o">.</span><span class="n">install</span><span class="p">(</span><span class="s">&#39;resolve&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">with_description</span><span class="p">(</span><span class="s">&#39;Resolve dependencies and produce dependency reports.&#39;</span><span class="p">)</span>

  <span class="n">task</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;ivy-imports&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">IvyImports</span><span class="p">,</span>
       <span class="n">dependencies</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;bootstrap&#39;</span><span class="p">]</span>
  <span class="p">)</span><span class="o">.</span><span class="n">install</span><span class="p">(</span><span class="s">&#39;imports&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>That <tt class="docutils literal"><span class="pre">task(...)</span></tt> is a name for <tt class="docutils literal"><span class="pre">pants.goal.task_registrar.TaskRegistrar</span></tt>.
Calling its <tt class="docutils literal"><span class="pre">install</span></tt> method installs the task in a goal with the same name.
To install a task in goal <tt class="docutils literal"><span class="pre">foo</span></tt>, use <tt class="docutils literal"><span class="pre">Goal.by_name('foo').install</span></tt>.
You can install more than one task in a goal; e.g., there are separate tasks
to run Java tests and Python tests; but both are in the <tt class="docutils literal"><span class="pre">test</span></tt> goal.</p>
</div>
<div class="section" id="product-types-and-require-data-why-test-comes-after-compile">
<h2>product_types and require_data: Why &#8220;test&#8221; comes after &#8220;compile&#8221;<a class="headerlink" href="#product-types-and-require-data-why-test-comes-after-compile" title="Permalink to this headline">Â¶</a></h2>
<p>It might only make sense to run your Task after some other Task has finished.
E.g., Pants has separate tasks to compile Java code and run Java tests; it
only makes sense to run those tests after compiling. To tell Pants about
these inter-task dependencies...</p>
<p>The &#8220;early&#8221; task class defines a <tt class="docutils literal"><span class="pre">product_types</span></tt> class method that
returns a list of strings:</p>
<div class="highlight-python"><div class="highlight"><pre>  <span class="nd">@classmethod</span>
  <span class="k">def</span> <span class="nf">product_types</span><span class="p">(</span><span class="n">cls</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">[</span><span class="s">&#39;ivy_imports&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>The &#8220;late&#8221; task defines a <tt class="docutils literal"><span class="pre">prepare</span></tt> method that calls
<tt class="docutils literal"><span class="pre">round_manager.require_data</span></tt> to &#8220;require&#8221; one of those
same strings:</p>
<div class="highlight-python"><div class="highlight"><pre>  <span class="k">def</span> <span class="nf">prepare</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">round_manager</span><span class="p">):</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">ProtobufGen</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">prepare</span><span class="p">(</span><span class="n">round_manager</span><span class="p">)</span>
    <span class="n">round_manager</span><span class="o">.</span><span class="n">require_data</span><span class="p">(</span><span class="s">&#39;ivy_imports&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Pants uses this information to determine which tasks must run
first to prepare data required by other tasks. (If one task requires
data that no task provides, Pants errors out.)</p>
</div>
<div class="section" id="products-map-how-one-task-uses-products-of-another">
<h2>Products Map: how one task uses products of another<a class="headerlink" href="#products-map-how-one-task-uses-products-of-another" title="Permalink to this headline">Â¶</a></h2>
<p>One task might need the products of another. E.g., the Java test runner
task uses Java <tt class="docutils literal"><span class="pre">.class</span></tt> files that the Java compile task produces.
Pants tasks keep track of this in a
<a class="reference external" href="https://github.com/pantsbuild/pants/blob/master/src/python/pants/goal/products.py">pants.goal.products.ProductMapping.</a></p>
<p>The <tt class="docutils literal"><span class="pre">ProductMapping</span></tt> is basically a dict.
Calling <tt class="docutils literal"><span class="pre">self.context.products.get('jar_dependencies')</span></tt> looks up
<tt class="docutils literal"><span class="pre">jar_dependencies</span></tt> in that dict. Tasks can set/change the value stored
at that key; later tasks can read (and perhaps further change) that value.
That value might be, say, a dictionary that maps target specs to file paths.</p>
<div class="section" id="require-data-is-required">
<h3>require_data, is_required<a class="headerlink" href="#require-data-is-required" title="Permalink to this headline">Â¶</a></h3>
<p>It might &#8220;expensive&#8221; for a task to generate some not-always-useful product.
E.g., if Ivy takes a while to compute jar dependencies but they&#8217;re not always
needed, then it might make sense to skip generating them in most cases.
In one tasks&#8217;s <tt class="docutils literal"><span class="pre">__init__</span></tt>, it can call
<tt class="docutils literal"><span class="pre">self.context.products.isrequired('jar_dependencies')</span></tt> to say it needs that
data.
The Ivy task uses <tt class="docutils literal"><span class="pre">if</span> <span class="pre">self.context.products.isrequired('jar_dependencies'):</span></tt>
to find out if another task needs this data.</p>
</div>
</div>
<div class="section" id="task-configuration">
<h2>Task Configuration<a class="headerlink" href="#task-configuration" title="Permalink to this headline">Â¶</a></h2>
<p>Tasks may be configured in two ways:</p>
<ul class="simple">
<li>a configuration file</li>
<li>command-line flags</li>
</ul>
<p>The configuration file is normally called <tt class="docutils literal"><span class="pre">pants.ini</span></tt> and is a standard
<tt class="docutils literal"><span class="pre">ini</span></tt> file loaded with <tt class="docutils literal"><span class="pre">ConfigParser</span></tt>. During instantiation, tasks have
access to a <tt class="docutils literal"><span class="pre">pants.base.config.Config</span></tt> to read these settings.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Let&#39;s read mykey from the mytask pants.ini section.</span>
<span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;mytask&#39;</span><span class="p">,</span> <span class="s">&#39;mykey&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>To define a command-line flag, handle your Task&#8217;s <tt class="docutils literal"><span class="pre">register_options</span></tt> class
method and call the passed-in <tt class="docutils literal"><span class="pre">register</span></tt> function:</p>
<div class="highlight-python"><div class="highlight"><pre>  <span class="nd">@classmethod</span>
  <span class="k">def</span> <span class="nf">register_options</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">register</span><span class="p">):</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">ListGoals</span><span class="p">,</span> <span class="n">cls</span><span class="p">)</span><span class="o">.</span><span class="n">register_options</span><span class="p">(</span><span class="n">register</span><span class="p">)</span>
    <span class="n">register</span><span class="p">(</span><span class="s">&#39;--graph&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span>
             <span class="n">help</span><span class="o">=</span><span class="s">&#39;Generate a graphviz graph of installed goals.&#39;</span><span class="p">,</span>
             <span class="n">legacy</span><span class="o">=</span><span class="s">&#39;goal_list_graph&#39;</span><span class="p">)</span>
    <span class="n">register</span><span class="p">(</span><span class="s">&#39;--all&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span>
             <span class="n">help</span><span class="o">=</span><span class="s">&#39;List all goals even if no description is available.&#39;</span><span class="p">,</span>
             <span class="n">legacy</span><span class="o">=</span><span class="s">&#39;goal_list_all&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Option values are available via <tt class="docutils literal"><span class="pre">self.get_options()</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre># Did user pass in the --all CLI flag (or set it in .ini)?
if self.get_options().all:
</pre></div>
</div>
</div>
<div class="section" id="grouptask">
<h2>GroupTask<a class="headerlink" href="#grouptask" title="Permalink to this headline">Â¶</a></h2>
<p>Some <tt class="docutils literal"><span class="pre">Task</span></tt>s are grouped together under a parent <tt class="docutils literal"><span class="pre">GroupTask</span></tt>.
Specifically, the JVM compile tasks:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">jvm_compile</span> <span class="o">=</span> <span class="n">GroupTask</span><span class="o">.</span><span class="n">named</span><span class="p">(</span>
<span class="s">&#39;jvm-compilers&#39;</span><span class="p">,</span>
<span class="n">product_type</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;classes_by_target&#39;</span><span class="p">,</span> <span class="s">&#39;classes_by_source&#39;</span><span class="p">],</span>
<span class="n">flag_namespace</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;compile&#39;</span><span class="p">])</span>

<span class="n">jvm_compile</span><span class="o">.</span><span class="n">add_member</span><span class="p">(</span><span class="n">ScalaCompile</span><span class="p">)</span>
<span class="n">jvm_compile</span><span class="o">.</span><span class="n">add_member</span><span class="p">(</span><span class="n">AptCompile</span><span class="p">)</span>
<span class="n">jvm_compile</span><span class="o">.</span><span class="n">add_member</span><span class="p">(</span><span class="n">JavaCompile</span><span class="p">)</span>
</pre></div>
</div>
<p>A <tt class="docutils literal"><span class="pre">GroupTask</span></tt> allows its constituent tasks to &#8216;claim&#8217; targets for processing, and can iterate
between those tasks until all work is done. This allows, e.g., Java code to depend on Scala code
which itself depends on some other Java code.</p>
</div>
<div class="section" id="jvm-tool-bootstrapping">
<h2>JVM Tool Bootstrapping<a class="headerlink" href="#jvm-tool-bootstrapping" title="Permalink to this headline">Â¶</a></h2>
<p>If you want to integrate an existing JVM-based tool with a pants task, Pants
must be able to bootstrap it. That is, a running Pants will need to fetch
the tool and create a classpath with which to run it.</p>
<p>Your job as a task
developer is to set up the arguments passed to your tool (e.g.: source file names
to compile) and do something useful after the tool has run. For example, a code
generation tool would identify targets that own IDL sources, pass those sources
as arguments to the code generator, create targets of the correct type to own
generated sources, and mutate the targets graph rewriting dependencies on targets
owning IDL sources to point at targets that own the generated code.</p>
<p>The <a class="reference external" href="http://www.scalastyle.org/">Scalastyle</a> tool enforces style policies
for scala code. The
<a class="reference external" href="https://github.com/pantsbuild/pants/blob/master/src/python/pants/backend/jvm/tasks/scalastyle.py">Pants Scalastyle task</a>
shows some useful idioms for JVM tasks.</p>
<ul class="simple">
<li>Inherit <tt class="docutils literal"><span class="pre">NailgunTask</span></tt> to avoid starting up a new JVM.</li>
<li>Specify the tool executable as a Pants <tt class="docutils literal"><span class="pre">jar</span></tt>; Pants knows how to download
and run those.</li>
<li>Let organizations/users override the jar in <tt class="docutils literal"><span class="pre">pants.ini</span></tt>; it makes it
easy to use/test a new version.</li>
</ul>
</div>
</div>


          <footer>
  
    <div class="rst-footer-buttons">
      
        <a href="howto_plugin.html" class="btn btn-neutral float-right" title="Developing a Pants Plugin"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="howto_develop.html" class="btn btn-neutral" title="Pants Developers Guide"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <p>
      &copy; Copyright 2014, Pants project contributors.
  </p>

  <a href="https://www.github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="http://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  

</body>
</html>